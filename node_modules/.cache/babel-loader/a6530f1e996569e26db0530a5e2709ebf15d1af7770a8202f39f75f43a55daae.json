{"ast":null,"code":"import _objectSpread from\"/Users/dbroxton/Documents/Projects/soccer-management-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useAuth}from'../context/AuthContext';import{collection,query,orderBy,onSnapshot,doc,getDoc}from\"firebase/firestore\";import{db}from\"../firebase\";import UserSearch from'./UserSearch';import{COLORS,MOBILE_BREAKPOINT}from'../constants';import{Users,Search,UserPlus,Globe}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Groups(){const{fetchUserGroups,createGroup,createGroupPost,addGroupMembers,updateGroupMemberRole,transferGroupOwnership,removeGroupMember,submitJoinRequest,subscribeToUserRequests,subscribeToDiscoverableRosters,loggedInUser}=useAuth();// --- Navigation State ---\nconst[currentView,setCurrentView]=useState('hub');const[myGroups,setMyGroups]=useState([]);const[selectedGroup,setSelectedGroup]=useState(null);const[isLoading,setIsLoading]=useState(true);const[isMobile,setIsMobile]=useState(window.innerWidth<MOBILE_BREAKPOINT);// Find Teams State\nconst[discoverableTeams,setDiscoverableTeams]=useState([]);const[myRequests,setMyRequests]=useState([]);// Create Group Form State\nconst[showCreateForm,setShowCreateForm]=useState(false);const[newGroupName,setNewGroupName]=useState(\"\");const[newGroupDesc,setNewGroupDesc]=useState(\"\");// Group Detail State\nconst[activeTab,setActiveTab]=useState('posts');const[groupPosts,setGroupPosts]=useState([]);const[newPostText,setNewPostText]=useState(\"\");const[showAddMember,setShowAddMember]=useState(false);const[selectedMemberEmails,setSelectedMemberEmails]=useState([]);const[activeMemberMenu,setActiveMemberMenu]=useState(null);// --- Effects ---\nuseEffect(()=>{const handleResize=()=>setIsMobile(window.innerWidth<MOBILE_BREAKPOINT);window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);// Updated: wrapped in useCallback\nconst loadGroups=useCallback(async()=>{if(!loggedInUser)return;setIsLoading(true);const data=await fetchUserGroups(loggedInUser.uid);setMyGroups(data);setIsLoading(false);},[loggedInUser,fetchUserGroups]);// Updated: Added loadGroups to dependency array\nuseEffect(()=>{if(loggedInUser)loadGroups();},[loggedInUser,loadGroups]);useEffect(()=>{if(!selectedGroup)return;setCurrentView('detail');const postsRef=collection(db,\"groups\",selectedGroup.id,\"posts\");const q=query(postsRef,orderBy(\"createdAt\",\"desc\"));const unsubscribe=onSnapshot(q,snapshot=>{const posts=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setGroupPosts(posts);});return()=>unsubscribe();},[selectedGroup]);// Updated: Added dependency array\nuseEffect(()=>{if(currentView==='findTeams'){setIsLoading(true);const unsubRosters=subscribeToDiscoverableRosters(data=>{setDiscoverableTeams(data);setIsLoading(false);});const unsubRequests=subscribeToUserRequests(data=>{setMyRequests(data);});return()=>{unsubRosters();unsubRequests();};}},[currentView,subscribeToDiscoverableRosters,subscribeToUserRequests]);// --- Logic Helpers ---\nconst refreshSelectedGroup=async()=>{if(!selectedGroup)return;const groupRef=doc(db,\"groups\",selectedGroup.id);const groupSnap=await getDoc(groupRef);if(groupSnap.exists()){setSelectedGroup(_objectSpread({id:groupSnap.id},groupSnap.data()));}};const handleCreateGroup=async e=>{e.preventDefault();if(!newGroupName)return;const success=await createGroup({name:newGroupName,description:newGroupDesc,links:[]});if(success){alert(\"Group created!\");setShowCreateForm(false);setNewGroupName(\"\");setNewGroupDesc(\"\");loadGroups();}};const handlePostSubmit=async e=>{e.preventDefault();if(!newPostText)return;await createGroupPost(selectedGroup.id,newPostText,null);setNewPostText(\"\");};const handleAddMembers=async()=>{if(selectedMemberEmails.length===0)return;const success=await addGroupMembers(selectedGroup.id,selectedMemberEmails);if(success){alert(\"Members added!\");setShowAddMember(false);setSelectedMemberEmails([]);refreshSelectedGroup();}};const handleJoinRequest=async team=>{await submitJoinRequest(team.id,team.name,team.createdBy);};const getRequestStatus=teamId=>{const req=myRequests.find(r=>r.rosterId===teamId);return req?req.status:null;};// Role Management Wrappers\nconst handlePromote=async uid=>{const success=await updateGroupMemberRole(selectedGroup.id,uid,'admin',selectedGroup.memberDetails);if(success){setActiveMemberMenu(null);refreshSelectedGroup();}};const handleDemote=async uid=>{const success=await updateGroupMemberRole(selectedGroup.id,uid,'member',selectedGroup.memberDetails);if(success){setActiveMemberMenu(null);refreshSelectedGroup();}};const handleTransfer=async uid=>{if(window.confirm(\"Transfer ownership?\")){const success=await transferGroupOwnership(selectedGroup.id,uid,selectedGroup.memberDetails);if(success){setActiveMemberMenu(null);refreshSelectedGroup();}}};const handleRemove=async uid=>{if(window.confirm(\"Remove member?\")){const success=await removeGroupMember(selectedGroup.id,uid,selectedGroup.memberDetails,selectedGroup.members);if(success){setActiveMemberMenu(null);refreshSelectedGroup();}}};const getMyGroupRole=()=>{if(!selectedGroup||!selectedGroup.memberDetails)return'member';const me=selectedGroup.memberDetails.find(m=>m.uid===loggedInUser.uid);return me?me.role||'member':'member';};const HubButton=_ref=>{let{title,desc,icon:Icon,onClick,color=COLORS.primary}=_ref;return/*#__PURE__*/_jsxs(\"button\",{onClick:onClick,style:{backgroundColor:'#282c34',border:\"1px solid \".concat(COLORS.border),borderRadius:'12px',padding:'20px',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',cursor:'pointer',transition:'transform 0.2s, background-color 0.2s',height:'100%',width:'100%',textAlign:'center',boxSizing:'border-box',minHeight:0},onMouseEnter:e=>e.currentTarget.style.backgroundColor='#333',onMouseLeave:e=>e.currentTarget.style.backgroundColor='#282c34',children:[/*#__PURE__*/_jsx(Icon,{size:40,color:color,style:{marginBottom:'15px'}}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'18px',fontWeight:'bold',color:'white',marginBottom:'8px'},children:title}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'13px',color:'#aaa'},children:desc})]});};// ... (Views for Hub, MyGroups, FindTeams, Detail remain unchanged from previous step, just ensure they use the new variables)\nif(currentView==='hub'){return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'1000px',margin:'0 auto',textAlign:'left',height:'100%',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:'15px',flexShrink:0},children:\"Community\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'1fr 1fr',gridTemplateRows:isMobile?'repeat(4, 1fr)':'repeat(2, 1fr)',gap:'15px',flex:1,minHeight:0},children:[/*#__PURE__*/_jsx(HubButton,{title:\"Explore Communities\",desc:\"Discover new groups and communities\",icon:Globe,onClick:()=>alert(\"Feature coming soon!\")}),/*#__PURE__*/_jsx(HubButton,{title:\"Find Teams\",desc:\"Search for local teams to join\",icon:Search,onClick:()=>setCurrentView('findTeams')}),/*#__PURE__*/_jsx(HubButton,{title:\"Find Players\",desc:\"Connect with other players (Coming Soon)\",icon:UserPlus,color:\"#888\",onClick:()=>alert(\"Feature coming soon!\")}),/*#__PURE__*/_jsx(HubButton,{title:\"My Groups\",desc:\"Teams, groups and communities that I've already joined\",icon:Users,onClick:()=>setCurrentView('myGroups')})]})]});}if(currentView==='myGroups'){return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'800px',margin:'0 auto',textAlign:'left'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('hub'),style:{background:'none',border:'none',color:COLORS.primary,cursor:'pointer',marginBottom:'15px',fontSize:'16px'},children:\"\\u2190 Back to Hub\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'30px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Groups\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreateForm(!showCreateForm),style:{padding:'10px 15px',backgroundColor:COLORS.primary,border:'none',cursor:'pointer',fontWeight:'bold',borderRadius:'5px'},children:showCreateForm?\"Cancel\":\"+ Create Group\"})]}),showCreateForm&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateGroup,style:{backgroundColor:'#3a3f4a',padding:'20px',borderRadius:'8px',marginBottom:'30px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0},children:\"New Group\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Group Name\",value:newGroupName,onChange:e=>setNewGroupName(e.target.value),style:{display:'block',width:'100%',padding:'10px',marginBottom:'10px',boxSizing:'border-box'}}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Description\",value:newGroupDesc,onChange:e=>setNewGroupDesc(e.target.value),style:{display:'block',width:'100%',padding:'10px',marginBottom:'10px',minHeight:'60px',boxSizing:'border-box'}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{padding:'10px 20px',backgroundColor:COLORS.primary,border:'none',cursor:'pointer',fontWeight:'bold'},children:\"Create\"})]}),isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):myGroups.length===0?/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',fontStyle:'italic'},children:\"You haven't joined any groups yet.\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'15px',gridTemplateColumns:'repeat(auto-fill, minmax(250px, 1fr))'},children:myGroups.map(group=>{var _group$memberDetails;return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setSelectedGroup(group),style:{backgroundColor:'#282c34',padding:'20px',borderRadius:'8px',border:\"1px solid \".concat(COLORS.border),cursor:'pointer',transition:'transform 0.2s'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 10px 0',color:COLORS.primary},children:group.name}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,color:'#ccc',fontSize:'14px',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'},children:group.description}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'15px',fontSize:'12px',color:'#888'},children:[((_group$memberDetails=group.memberDetails)===null||_group$memberDetails===void 0?void 0:_group$memberDetails.length)||0,\" Members\"]})]},group.id);})})]});}if(currentView==='findTeams'){return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'800px',margin:'0 auto',textAlign:'left'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('hub'),style:{background:'none',border:'none',color:COLORS.primary,cursor:'pointer',marginBottom:'15px',fontSize:'16px'},children:\"\\u2190 Back to Hub\"}),/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:'20px'},children:\"Find Teams\"}),isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading teams...\"}):discoverableTeams.length===0?/*#__PURE__*/_jsx(\"p\",{style:{color:'#888'},children:\"No teams found.\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'15px'},children:discoverableTeams.map(team=>{var _team$playerIDs,_team$players;const status=getRequestStatus(team.id);const alreadyJoined=(_team$playerIDs=team.playerIDs)===null||_team$playerIDs===void 0?void 0:_team$playerIDs.includes(loggedInUser.uid);return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#282c34',padding:'20px',borderRadius:'8px',border:\"1px solid \".concat(COLORS.border),display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 5px 0',color:'white'},children:team.name}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:0,color:'#aaa',fontSize:'14px'},children:[team.season,\" \\u2022 \",((_team$players=team.players)===null||_team$players===void 0?void 0:_team$players.length)||0,\"/\",team.maxCapacity,\" Players\"]})]}),/*#__PURE__*/_jsx(\"div\",{children:alreadyJoined?/*#__PURE__*/_jsx(\"span\",{style:{color:'#28a745',fontSize:'14px',fontWeight:'bold'},children:\"Joined\"}):status==='pending'?/*#__PURE__*/_jsx(\"span\",{style:{color:'#ffc107',fontSize:'14px',fontWeight:'bold'},children:\"Pending\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleJoinRequest(team),style:{padding:'8px 15px',backgroundColor:COLORS.primary,border:'none',borderRadius:'5px',cursor:'pointer',fontWeight:'bold'},children:\"Request to Join\"})})]},team.id);})})]});}if(currentView==='detail'&&selectedGroup){var _selectedGroup$member2;// (Rendering logic for detail view is identical to before, omitted for brevity but assumed included)\n// Copy the detail view logic from previous responses if needed.\nconst myRole=getMyGroupRole();const renderMembers=()=>{var _selectedGroup$member;const owners=[];const admins=[];const members=[];(_selectedGroup$member=selectedGroup.memberDetails)===null||_selectedGroup$member===void 0?void 0:_selectedGroup$member.forEach(m=>{if(m.role==='owner')owners.push(m);else if(m.role==='admin')admins.push(m);else members.push(m);});return['Owner','Admins','Members'].map(section=>{let list=section==='Owner'?owners:section==='Admins'?admins:members;if(list.length===0)return null;return/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'30px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{borderBottom:'1px solid #666',paddingBottom:'5px',color:'#aaa',textTransform:'uppercase',fontSize:'12px'},children:section}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0},children:list.map(m=>/*#__PURE__*/_jsxs(\"li\",{style:{padding:'10px',borderBottom:'1px solid #333',display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'15px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'40px',height:'40px',borderRadius:'50%',overflow:'hidden',backgroundColor:'#444',display:'flex',justifyContent:'center',alignItems:'center',border:\"1px solid \".concat(COLORS.primary)},children:m.photoURL?/*#__PURE__*/_jsx(\"img\",{src:m.photoURL,alt:m.name,style:{width:'100%',height:'100%',objectFit:'cover'}}):/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'16px',color:'#ccc'},children:m.name?m.name.charAt(0).toUpperCase():\"?\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold'},children:m.name}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#888'},children:m.email})]})]}),myRole==='owner'&&m.uid!==loggedInUser.uid||myRole==='admin'&&m.role!=='owner'&&m.role!=='admin'&&m.uid!==loggedInUser.uid?/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveMemberMenu(activeMemberMenu===m.uid?null:m.uid),style:{background:'none',border:'none',color:'#aaa',fontSize:'20px',cursor:'pointer',padding:'0 10px'},children:\"\\u22EE\"}),activeMemberMenu===m.uid&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',right:0,top:'100%',backgroundColor:'#222',border:'1px solid #555',borderRadius:'5px',zIndex:10,width:'160px',boxShadow:'0 2px 10px rgba(0,0,0,0.5)'},children:[myRole==='owner'&&m.role!=='admin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePromote(m.uid),style:{display:'block',width:'100%',padding:'10px',textAlign:'left',background:'none',border:'none',color:'white',cursor:'pointer',borderBottom:'1px solid #333'},children:\"Promote to Admin\"}),myRole==='owner'&&m.role==='admin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDemote(m.uid),style:{display:'block',width:'100%',padding:'10px',textAlign:'left',background:'none',border:'none',color:'white',cursor:'pointer',borderBottom:'1px solid #333'},children:\"Demote to Member\"}),myRole==='owner'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleTransfer(m.uid),style:{display:'block',width:'100%',padding:'10px',textAlign:'left',background:'none',border:'none',color:'#ff6b6b',cursor:'pointer',borderBottom:'1px solid #333'},children:\"Transfer Ownership\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemove(m.uid),style:{display:'block',width:'100%',padding:'10px',textAlign:'left',background:'none',border:'none',color:'#ff6b6b',cursor:'pointer',borderBottom:'1px solid #333'},children:\"Remove\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveMemberMenu(null),style:{display:'block',width:'100%',padding:'10px',textAlign:'left',background:'none',border:'none',color:'#aaa',cursor:'pointer'},children:\"Cancel\"})]})]}):null]},m.uid))})]},section);});};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'800px',margin:'0 auto',textAlign:'left'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedGroup(null);setCurrentView('myGroups');},style:{background:'none',border:'none',color:COLORS.primary,cursor:'pointer',marginBottom:'15px',fontSize:'16px'},children:\"\\u2190 Back to My Groups\"}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#282c34',padding:'20px',borderRadius:'8px',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0},children:selectedGroup.name}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#ccc',marginTop:'5px'},children:selectedGroup.description})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',borderBottom:'1px solid #444',marginBottom:'20px'},children:['posts','about','members'].map(tab=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(tab),style:{padding:'10px 20px',background:'none',border:'none',cursor:'pointer',color:activeTab===tab?COLORS.primary:'#888',borderBottom:activeTab===tab?\"2px solid \".concat(COLORS.primary):'none',fontWeight:activeTab===tab?'bold':'normal'},children:tab.charAt(0).toUpperCase()+tab.slice(1)},tab))}),activeTab==='posts'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePostSubmit,style:{marginBottom:'30px',display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Share something...\",value:newPostText,onChange:e=>setNewPostText(e.target.value),style:{flex:1,padding:'12px',borderRadius:'20px',border:'none',backgroundColor:'#3a3f4a',color:'white'}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{padding:'10px 20px',borderRadius:'20px',border:'none',backgroundColor:COLORS.primary,color:'#000',fontWeight:'bold',cursor:'pointer'},children:\"Post\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'15px'},children:groupPosts.map(post=>{var _post$authorName,_post$createdAt;return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#222',padding:'15px',borderRadius:'8px',border:\"1px solid \".concat(COLORS.border)},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#888',marginBottom:'5px',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'24px',height:'24px',borderRadius:'50%',backgroundColor:'#444',overflow:'hidden',display:'flex',alignItems:'center',justifyContent:'center'},children:post.authorPhoto?/*#__PURE__*/_jsx(\"img\",{src:post.authorPhoto,alt:post.authorName,style:{width:'100%',height:'100%',objectFit:'cover'}}):/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'10px',color:'#ccc'},children:(_post$authorName=post.authorName)===null||_post$authorName===void 0?void 0:_post$authorName.charAt(0).toUpperCase()})}),/*#__PURE__*/_jsx(\"strong\",{children:post.authorName}),\" \\u2022 \",(_post$createdAt=post.createdAt)===null||_post$createdAt===void 0?void 0:_post$createdAt.toDate().toLocaleString()]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'15px',marginLeft:'32px'},children:post.text})]},post.id);})})]}),activeTab==='about'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"About this Group\"}),/*#__PURE__*/_jsx(\"p\",{children:selectedGroup.description||\"No description.\"})]}),activeTab==='members'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'15px'},children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Members (\",((_selectedGroup$member2=selectedGroup.memberDetails)===null||_selectedGroup$member2===void 0?void 0:_selectedGroup$member2.length)||0,\")\"]}),(myRole==='owner'||myRole==='admin')&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddMember(true),style:{padding:'8px 15px',backgroundColor:COLORS.primary,border:'none',borderRadius:'5px',cursor:'pointer',fontWeight:'bold'},children:\"+ Add Member\"})]}),showAddMember&&/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#3a3f4a',padding:'20px',borderRadius:'8px',marginBottom:'20px',border:\"1px solid \".concat(COLORS.primary)},children:[/*#__PURE__*/_jsx(\"h4\",{style:{marginTop:0},children:\"Add Members to Group\"}),/*#__PURE__*/_jsx(UserSearch,{onSelectionChange:setSelectedMemberEmails}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginTop:'15px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddMembers,style:{flex:1,padding:'8px',backgroundColor:COLORS.primary,border:'none',cursor:'pointer',fontWeight:'bold'},children:\"Add Selected\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowAddMember(false);setSelectedMemberEmails([]);},style:{flex:1,padding:'8px',backgroundColor:'#555',border:'none',cursor:'pointer',color:'white'},children:\"Cancel\"})]})]}),renderMembers()]})]});}return/*#__PURE__*/_jsx(\"div\",{children:\"Error: View state unknown\"});}export default Groups;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useAuth","collection","query","orderBy","onSnapshot","doc","getDoc","db","UserSearch","COLORS","MOBILE_BREAKPOINT","Users","Search","UserPlus","Globe","jsx","_jsx","jsxs","_jsxs","Groups","fetchUserGroups","createGroup","createGroupPost","addGroupMembers","updateGroupMemberRole","transferGroupOwnership","removeGroupMember","submitJoinRequest","subscribeToUserRequests","subscribeToDiscoverableRosters","loggedInUser","currentView","setCurrentView","myGroups","setMyGroups","selectedGroup","setSelectedGroup","isLoading","setIsLoading","isMobile","setIsMobile","window","innerWidth","discoverableTeams","setDiscoverableTeams","myRequests","setMyRequests","showCreateForm","setShowCreateForm","newGroupName","setNewGroupName","newGroupDesc","setNewGroupDesc","activeTab","setActiveTab","groupPosts","setGroupPosts","newPostText","setNewPostText","showAddMember","setShowAddMember","selectedMemberEmails","setSelectedMemberEmails","activeMemberMenu","setActiveMemberMenu","handleResize","addEventListener","removeEventListener","loadGroups","data","uid","postsRef","id","q","unsubscribe","snapshot","posts","docs","map","_objectSpread","unsubRosters","unsubRequests","refreshSelectedGroup","groupRef","groupSnap","exists","handleCreateGroup","e","preventDefault","success","name","description","links","alert","handlePostSubmit","handleAddMembers","length","handleJoinRequest","team","createdBy","getRequestStatus","teamId","req","find","r","rosterId","status","handlePromote","memberDetails","handleDemote","handleTransfer","confirm","handleRemove","members","getMyGroupRole","me","m","role","HubButton","_ref","title","desc","icon","Icon","onClick","color","primary","style","backgroundColor","border","concat","borderRadius","padding","display","flexDirection","alignItems","justifyContent","cursor","transition","height","width","textAlign","boxSizing","minHeight","onMouseEnter","currentTarget","onMouseLeave","children","size","marginBottom","fontSize","fontWeight","maxWidth","margin","flexShrink","gridTemplateColumns","gridTemplateRows","gap","flex","background","onSubmit","marginTop","type","placeholder","value","onChange","target","fontStyle","group","_group$memberDetails","whiteSpace","overflow","textOverflow","_team$playerIDs","_team$players","alreadyJoined","playerIDs","includes","season","players","maxCapacity","_selectedGroup$member2","myRole","renderMembers","_selectedGroup$member","owners","admins","forEach","push","section","list","borderBottom","paddingBottom","textTransform","listStyle","photoURL","src","alt","objectFit","charAt","toUpperCase","email","position","right","top","zIndex","boxShadow","tab","slice","post","_post$authorName","_post$createdAt","authorPhoto","authorName","createdAt","toDate","toLocaleString","marginLeft","text","onSelectionChange"],"sources":["/Users/dbroxton/Documents/Projects/soccer-management-app/src/components/Groups.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { collection, query, orderBy, onSnapshot, doc, getDoc } from \"firebase/firestore\"; \nimport { db } from \"../firebase\";\nimport UserSearch from './UserSearch';\nimport { COLORS, MOBILE_BREAKPOINT } from '../constants';\nimport { Users, Search, UserPlus, Globe } from 'lucide-react';\n\nfunction Groups() {\n  const { \n    fetchUserGroups, createGroup, createGroupPost, \n    addGroupMembers, updateGroupMemberRole, transferGroupOwnership, removeGroupMember,\n    submitJoinRequest,\n    subscribeToUserRequests, subscribeToDiscoverableRosters,\n    loggedInUser \n  } = useAuth();\n\n  // --- Navigation State ---\n  const [currentView, setCurrentView] = useState('hub');\n\n  const [myGroups, setMyGroups] = useState([]);\n  const [selectedGroup, setSelectedGroup] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isMobile, setIsMobile] = useState(window.innerWidth < MOBILE_BREAKPOINT);\n\n  // Find Teams State\n  const [discoverableTeams, setDiscoverableTeams] = useState([]);\n  const [myRequests, setMyRequests] = useState([]);\n\n  // Create Group Form State\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [newGroupName, setNewGroupName] = useState(\"\");\n  const [newGroupDesc, setNewGroupDesc] = useState(\"\");\n\n  // Group Detail State\n  const [activeTab, setActiveTab] = useState('posts'); \n  const [groupPosts, setGroupPosts] = useState([]);\n  const [newPostText, setNewPostText] = useState(\"\");\n  const [showAddMember, setShowAddMember] = useState(false);\n  const [selectedMemberEmails, setSelectedMemberEmails] = useState([]);\n  const [activeMemberMenu, setActiveMemberMenu] = useState(null); \n\n  // --- Effects ---\n\n  useEffect(() => {\n    const handleResize = () => setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Updated: wrapped in useCallback\n  const loadGroups = useCallback(async () => {\n    if (!loggedInUser) return;\n    setIsLoading(true);\n    const data = await fetchUserGroups(loggedInUser.uid);\n    setMyGroups(data);\n    setIsLoading(false);\n  }, [loggedInUser, fetchUserGroups]);\n\n  // Updated: Added loadGroups to dependency array\n  useEffect(() => {\n    if (loggedInUser) loadGroups();\n  }, [loggedInUser, loadGroups]);\n\n  useEffect(() => {\n    if (!selectedGroup) return;\n    setCurrentView('detail');\n    const postsRef = collection(db, \"groups\", selectedGroup.id, \"posts\");\n    const q = query(postsRef, orderBy(\"createdAt\", \"desc\"));\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const posts = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setGroupPosts(posts);\n    });\n    return () => unsubscribe();\n  }, [selectedGroup]);\n\n  // Updated: Added dependency array\n  useEffect(() => {\n      if (currentView === 'findTeams') {\n          setIsLoading(true);\n          \n          const unsubRosters = subscribeToDiscoverableRosters((data) => {\n             setDiscoverableTeams(data);\n             setIsLoading(false); \n          });\n          \n          const unsubRequests = subscribeToUserRequests((data) => {\n             setMyRequests(data);\n          });\n          \n          return () => {\n              unsubRosters();\n              unsubRequests();\n          };\n      }\n  }, [currentView, subscribeToDiscoverableRosters, subscribeToUserRequests]); \n\n  // --- Logic Helpers ---\n\n  const refreshSelectedGroup = async () => {\n    if (!selectedGroup) return;\n    const groupRef = doc(db, \"groups\", selectedGroup.id);\n    const groupSnap = await getDoc(groupRef);\n    if (groupSnap.exists()) {\n      setSelectedGroup({ id: groupSnap.id, ...groupSnap.data() });\n    }\n  };\n\n  const handleCreateGroup = async (e) => {\n    e.preventDefault();\n    if (!newGroupName) return;\n    const success = await createGroup({\n      name: newGroupName,\n      description: newGroupDesc,\n      links: [] \n    });\n    if (success) {\n      alert(\"Group created!\");\n      setShowCreateForm(false);\n      setNewGroupName(\"\");\n      setNewGroupDesc(\"\");\n      loadGroups();\n    }\n  };\n\n  const handlePostSubmit = async (e) => {\n    e.preventDefault();\n    if (!newPostText) return;\n    await createGroupPost(selectedGroup.id, newPostText, null);\n    setNewPostText(\"\");\n  };\n\n  const handleAddMembers = async () => {\n    if (selectedMemberEmails.length === 0) return;\n    const success = await addGroupMembers(selectedGroup.id, selectedMemberEmails);\n    if (success) {\n      alert(\"Members added!\");\n      setShowAddMember(false);\n      setSelectedMemberEmails([]);\n      refreshSelectedGroup(); \n    }\n  };\n\n  const handleJoinRequest = async (team) => {\n      await submitJoinRequest(team.id, team.name, team.createdBy);\n  };\n\n  const getRequestStatus = (teamId) => {\n      const req = myRequests.find(r => r.rosterId === teamId);\n      return req ? req.status : null;\n  };\n\n  // Role Management Wrappers\n  const handlePromote = async (uid) => {\n    const success = await updateGroupMemberRole(selectedGroup.id, uid, 'admin', selectedGroup.memberDetails);\n    if(success) { setActiveMemberMenu(null); refreshSelectedGroup(); }\n  };\n  const handleDemote = async (uid) => {\n    const success = await updateGroupMemberRole(selectedGroup.id, uid, 'member', selectedGroup.memberDetails);\n    if(success) { setActiveMemberMenu(null); refreshSelectedGroup(); }\n  };\n  const handleTransfer = async (uid) => {\n    if (window.confirm(\"Transfer ownership?\")) {\n      const success = await transferGroupOwnership(selectedGroup.id, uid, selectedGroup.memberDetails);\n      if(success) { setActiveMemberMenu(null); refreshSelectedGroup(); }\n    }\n  };\n  const handleRemove = async (uid) => {\n    if (window.confirm(\"Remove member?\")) {\n      const success = await removeGroupMember(selectedGroup.id, uid, selectedGroup.memberDetails, selectedGroup.members);\n      if(success) { setActiveMemberMenu(null); refreshSelectedGroup(); }\n    }\n  };\n\n  const getMyGroupRole = () => {\n    if (!selectedGroup || !selectedGroup.memberDetails) return 'member';\n    const me = selectedGroup.memberDetails.find(m => m.uid === loggedInUser.uid);\n    return me ? (me.role || 'member') : 'member';\n  };\n\n  const HubButton = ({ title, desc, icon: Icon, onClick, color = COLORS.primary }) => (\n    <button \n      onClick={onClick}\n      style={{\n        backgroundColor: '#282c34',\n        border: `1px solid ${COLORS.border}`,\n        borderRadius: '12px',\n        padding: '20px',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        cursor: 'pointer',\n        transition: 'transform 0.2s, background-color 0.2s',\n        height: '100%', \n        width: '100%',\n        textAlign: 'center',\n        boxSizing: 'border-box',\n        minHeight: 0 \n      }}\n      onMouseEnter={(e) => e.currentTarget.style.backgroundColor = '#333'}\n      onMouseLeave={(e) => e.currentTarget.style.backgroundColor = '#282c34'}\n    >\n      <Icon size={40} color={color} style={{ marginBottom: '15px' }} />\n      <div style={{ fontSize: '18px', fontWeight: 'bold', color: 'white', marginBottom: '8px' }}>\n        {title}\n      </div>\n      <div style={{ fontSize: '13px', color: '#aaa' }}>\n        {desc}\n      </div>\n    </button>\n  );\n\n  // ... (Views for Hub, MyGroups, FindTeams, Detail remain unchanged from previous step, just ensure they use the new variables)\n  \n  if (currentView === 'hub') {\n    return (\n      <div style={{ maxWidth: '1000px', margin: '0 auto', textAlign: 'left', height: '100%', display: 'flex', flexDirection: 'column' }}>\n        <h2 style={{ marginBottom: '15px', flexShrink: 0 }}>Community</h2>\n        <div style={{ \n          display: 'grid', \n          gridTemplateColumns: isMobile ? '1fr' : '1fr 1fr', \n          gridTemplateRows: isMobile ? 'repeat(4, 1fr)' : 'repeat(2, 1fr)', \n          gap: '15px', flex: 1, minHeight: 0 \n        }}>\n          <HubButton title=\"Explore Communities\" desc=\"Discover new groups and communities\" icon={Globe} onClick={() => alert(\"Feature coming soon!\")} />\n          <HubButton title=\"Find Teams\" desc=\"Search for local teams to join\" icon={Search} onClick={() => setCurrentView('findTeams')} />\n          <HubButton title=\"Find Players\" desc=\"Connect with other players (Coming Soon)\" icon={UserPlus} color=\"#888\" onClick={() => alert(\"Feature coming soon!\")} />\n          <HubButton title=\"My Groups\" desc=\"Teams, groups and communities that I've already joined\" icon={Users} onClick={() => setCurrentView('myGroups')} />\n        </div>\n      </div>\n    );\n  }\n\n  if (currentView === 'myGroups') {\n    return (\n      <div style={{ maxWidth: '800px', margin: '0 auto', textAlign: 'left' }}>\n        <button onClick={() => setCurrentView('hub')} style={{ background: 'none', border: 'none', color: COLORS.primary, cursor: 'pointer', marginBottom: '15px', fontSize: '16px' }}>← Back to Hub</button>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '30px' }}>\n          <h2>My Groups</h2>\n          <button onClick={() => setShowCreateForm(!showCreateForm)} style={{ padding: '10px 15px', backgroundColor: COLORS.primary, border: 'none', cursor: 'pointer', fontWeight: 'bold', borderRadius: '5px' }}>\n            {showCreateForm ? \"Cancel\" : \"+ Create Group\"}\n          </button>\n        </div>\n        {showCreateForm && (\n          <form onSubmit={handleCreateGroup} style={{ backgroundColor: '#3a3f4a', padding: '20px', borderRadius: '8px', marginBottom: '30px' }}>\n            <h3 style={{ marginTop: 0 }}>New Group</h3>\n            <input type=\"text\" placeholder=\"Group Name\" value={newGroupName} onChange={(e) => setNewGroupName(e.target.value)} style={{ display: 'block', width: '100%', padding: '10px', marginBottom: '10px', boxSizing: 'border-box' }} />\n            <textarea placeholder=\"Description\" value={newGroupDesc} onChange={(e) => setNewGroupDesc(e.target.value)} style={{ display: 'block', width: '100%', padding: '10px', marginBottom: '10px', minHeight: '60px', boxSizing: 'border-box' }} />\n            <button type=\"submit\" style={{ padding: '10px 20px', backgroundColor: COLORS.primary, border: 'none', cursor: 'pointer', fontWeight: 'bold' }}>Create</button>\n          </form>\n        )}\n        {isLoading ? <p>Loading...</p> : myGroups.length === 0 ? (\n          <p style={{ color: '#888', fontStyle: 'italic' }}>You haven't joined any groups yet.</p>\n        ) : (\n          <div style={{ display: 'grid', gap: '15px', gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))' }}>\n            {myGroups.map(group => (\n              <div key={group.id} onClick={() => setSelectedGroup(group)} style={{ backgroundColor: '#282c34', padding: '20px', borderRadius: '8px', border: `1px solid ${COLORS.border}`, cursor: 'pointer', transition: 'transform 0.2s' }}>\n                <h3 style={{ margin: '0 0 10px 0', color: COLORS.primary }}>{group.name}</h3>\n                <p style={{ margin: 0, color: '#ccc', fontSize: '14px', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>{group.description}</p>\n                <div style={{ marginTop: '15px', fontSize: '12px', color: '#888' }}>{group.memberDetails?.length || 0} Members</div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  if (currentView === 'findTeams') {\n      return (\n        <div style={{ maxWidth: '800px', margin: '0 auto', textAlign: 'left' }}>\n            <button onClick={() => setCurrentView('hub')} style={{ background: 'none', border: 'none', color: COLORS.primary, cursor: 'pointer', marginBottom: '15px', fontSize: '16px' }}>← Back to Hub</button>\n            <h2 style={{ marginBottom: '20px' }}>Find Teams</h2>\n            \n            {isLoading ? <p>Loading teams...</p> : discoverableTeams.length === 0 ? <p style={{ color: '#888' }}>No teams found.</p> : (\n                <div style={{ display: 'grid', gap: '15px' }}>\n                    {discoverableTeams.map(team => {\n                        const status = getRequestStatus(team.id);\n                        const alreadyJoined = team.playerIDs?.includes(loggedInUser.uid);\n                        return (\n                            <div key={team.id} style={{ backgroundColor: '#282c34', padding: '20px', borderRadius: '8px', border: `1px solid ${COLORS.border}`, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                                <div>\n                                    <h3 style={{ margin: '0 0 5px 0', color: 'white' }}>{team.name}</h3>\n                                    <p style={{ margin: 0, color: '#aaa', fontSize: '14px' }}>\n                                        {team.season} • {team.players?.length || 0}/{team.maxCapacity} Players\n                                    </p>\n                                </div>\n                                <div>\n                                    {alreadyJoined ? (\n                                        <span style={{ color: '#28a745', fontSize: '14px', fontWeight: 'bold' }}>Joined</span>\n                                    ) : status === 'pending' ? (\n                                        <span style={{ color: '#ffc107', fontSize: '14px', fontWeight: 'bold' }}>Pending</span>\n                                    ) : (\n                                        <button \n                                            onClick={() => handleJoinRequest(team)}\n                                            style={{ padding: '8px 15px', backgroundColor: COLORS.primary, border: 'none', borderRadius: '5px', cursor: 'pointer', fontWeight: 'bold' }}\n                                        >\n                                            Request to Join\n                                        </button>\n                                    )}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            )}\n        </div>\n      );\n  }\n\n  if (currentView === 'detail' && selectedGroup) {\n      // (Rendering logic for detail view is identical to before, omitted for brevity but assumed included)\n      // Copy the detail view logic from previous responses if needed.\n       const myRole = getMyGroupRole();\n       const renderMembers = () => {\n            const owners = []; const admins = []; const members = [];\n            selectedGroup.memberDetails?.forEach(m => {\n                if (m.role === 'owner') owners.push(m);\n                else if (m.role === 'admin') admins.push(m);\n                else members.push(m);\n            });\n            return ['Owner', 'Admins', 'Members'].map(section => {\n                let list = (section === 'Owner' ? owners : section === 'Admins' ? admins : members);\n                if (list.length === 0) return null;\n                return (\n                    <div key={section} style={{ marginBottom: '30px' }}>\n                      <h4 style={{ borderBottom: '1px solid #666', paddingBottom: '5px', color: '#aaa', textTransform: 'uppercase', fontSize: '12px' }}>{section}</h4>\n                      <ul style={{ listStyle: 'none', padding: 0 }}>\n                        {list.map(m => (\n                          <li key={m.uid} style={{ padding: '10px', borderBottom: '1px solid #333', display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n                              <div style={{ width: '40px', height: '40px', borderRadius: '50%', overflow: 'hidden', backgroundColor: '#444', display: 'flex', justifyContent: 'center', alignItems: 'center', border: `1px solid ${COLORS.primary}` }}>\n                                {m.photoURL ? <img src={m.photoURL} alt={m.name} style={{ width: '100%', height: '100%', objectFit: 'cover' }} /> : <span style={{ fontSize: '16px', color: '#ccc' }}>{m.name ? m.name.charAt(0).toUpperCase() : \"?\"}</span>}\n                              </div>\n                              <div>\n                                <div style={{ fontWeight: 'bold' }}>{m.name}</div>\n                                <div style={{ fontSize: '12px', color: '#888' }}>{m.email}</div>\n                              </div>\n                            </div>\n                            { (myRole === 'owner' && m.uid !== loggedInUser.uid) || (myRole === 'admin' && m.role !== 'owner' && m.role !== 'admin' && m.uid !== loggedInUser.uid) ? (\n                              <div style={{ position: 'relative' }}>\n                                <button onClick={() => setActiveMemberMenu(activeMemberMenu === m.uid ? null : m.uid)} style={{ background: 'none', border: 'none', color: '#aaa', fontSize: '20px', cursor: 'pointer', padding: '0 10px' }}>⋮</button>\n                                {activeMemberMenu === m.uid && (\n                                  <div style={{ position: 'absolute', right: 0, top: '100%', backgroundColor: '#222', border: '1px solid #555', borderRadius: '5px', zIndex: 10, width: '160px', boxShadow: '0 2px 10px rgba(0,0,0,0.5)' }}>\n                                    {myRole === 'owner' && m.role !== 'admin' && <button onClick={() => handlePromote(m.uid)} style={{ display: 'block', width: '100%', padding: '10px', textAlign: 'left', background: 'none', border: 'none', color: 'white', cursor: 'pointer', borderBottom: '1px solid #333' }}>Promote to Admin</button>}\n                                    {myRole === 'owner' && m.role === 'admin' && <button onClick={() => handleDemote(m.uid)} style={{ display: 'block', width: '100%', padding: '10px', textAlign: 'left', background: 'none', border: 'none', color: 'white', cursor: 'pointer', borderBottom: '1px solid #333' }}>Demote to Member</button>}\n                                    {myRole === 'owner' && <button onClick={() => handleTransfer(m.uid)} style={{ display: 'block', width: '100%', padding: '10px', textAlign: 'left', background: 'none', border: 'none', color: '#ff6b6b', cursor: 'pointer', borderBottom: '1px solid #333' }}>Transfer Ownership</button>}\n                                    <button onClick={() => handleRemove(m.uid)} style={{ display: 'block', width: '100%', padding: '10px', textAlign: 'left', background: 'none', border: 'none', color: '#ff6b6b', cursor: 'pointer', borderBottom: '1px solid #333' }}>Remove</button>\n                                    <button onClick={() => setActiveMemberMenu(null)} style={{ display: 'block', width: '100%', padding: '10px', textAlign: 'left', background: 'none', border: 'none', color: '#aaa', cursor: 'pointer' }}>Cancel</button>\n                                  </div>\n                                )}\n                              </div>\n                            ) : null}\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                );\n            });\n        };\n\n      return (\n      <div style={{ maxWidth: '800px', margin: '0 auto', textAlign: 'left' }}>\n        <button onClick={() => { setSelectedGroup(null); setCurrentView('myGroups'); }} style={{ background: 'none', border: 'none', color: COLORS.primary, cursor: 'pointer', marginBottom: '15px', fontSize: '16px' }}>← Back to My Groups</button>\n        <div style={{ backgroundColor: '#282c34', padding: '20px', borderRadius: '8px', marginBottom: '20px' }}>\n          <h2 style={{ margin: 0 }}>{selectedGroup.name}</h2>\n          <p style={{ color: '#ccc', marginTop: '5px' }}>{selectedGroup.description}</p>\n        </div>\n        <div style={{ display: 'flex', borderBottom: '1px solid #444', marginBottom: '20px' }}>\n          {['posts', 'about', 'members'].map(tab => (\n            <button key={tab} onClick={() => setActiveTab(tab)} style={{ padding: '10px 20px', background: 'none', border: 'none', cursor: 'pointer', color: activeTab === tab ? COLORS.primary : '#888', borderBottom: activeTab === tab ? `2px solid ${COLORS.primary}` : 'none', fontWeight: activeTab === tab ? 'bold' : 'normal' }}>{tab.charAt(0).toUpperCase() + tab.slice(1)}</button>\n          ))}\n        </div>\n        {activeTab === 'posts' && (\n          <div>\n            <form onSubmit={handlePostSubmit} style={{ marginBottom: '30px', display: 'flex', gap: '10px' }}>\n              <input type=\"text\" placeholder=\"Share something...\" value={newPostText} onChange={(e) => setNewPostText(e.target.value)} style={{ flex: 1, padding: '12px', borderRadius: '20px', border: 'none', backgroundColor: '#3a3f4a', color: 'white' }} />\n              <button type=\"submit\" style={{ padding: '10px 20px', borderRadius: '20px', border: 'none', backgroundColor: COLORS.primary, color: '#000', fontWeight: 'bold', cursor: 'pointer' }}>Post</button>\n            </form>\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '15px' }}>\n              {groupPosts.map(post => (\n                <div key={post.id} style={{ backgroundColor: '#222', padding: '15px', borderRadius: '8px', border: `1px solid ${COLORS.border}` }}>\n                  <div style={{ fontSize: '12px', color: '#888', marginBottom: '5px', display: 'flex', alignItems: 'center', gap: '8px' }}>\n                    <div style={{ width: '24px', height: '24px', borderRadius: '50%', backgroundColor: '#444', overflow: 'hidden', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                       {post.authorPhoto ? <img src={post.authorPhoto} alt={post.authorName} style={{ width: '100%', height: '100%', objectFit: 'cover' }} /> : <span style={{ fontSize: '10px', color: '#ccc' }}>{post.authorName?.charAt(0).toUpperCase()}</span>}\n                    </div>\n                    <strong>{post.authorName}</strong> • {post.createdAt?.toDate().toLocaleString()}\n                  </div>\n                  <div style={{ fontSize: '15px', marginLeft: '32px' }}>{post.text}</div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n        {activeTab === 'about' && (\n          <div>\n            <h3>About this Group</h3>\n            <p>{selectedGroup.description || \"No description.\"}</p>\n          </div>\n        )}\n        {activeTab === 'members' && (\n          <div>\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '15px' }}>\n              <h3>Members ({selectedGroup.memberDetails?.length || 0})</h3>\n              {(myRole === 'owner' || myRole === 'admin') && <button onClick={() => setShowAddMember(true)} style={{ padding: '8px 15px', backgroundColor: COLORS.primary, border: 'none', borderRadius: '5px', cursor: 'pointer', fontWeight: 'bold' }}>+ Add Member</button>}\n            </div>\n            {showAddMember && (\n              <div style={{ backgroundColor: '#3a3f4a', padding: '20px', borderRadius: '8px', marginBottom: '20px', border: `1px solid ${COLORS.primary}` }}>\n                <h4 style={{ marginTop: 0 }}>Add Members to Group</h4>\n                <UserSearch onSelectionChange={setSelectedMemberEmails} />\n                <div style={{ display: 'flex', gap: '10px', marginTop: '15px' }}>\n                  <button onClick={handleAddMembers} style={{ flex: 1, padding: '8px', backgroundColor: COLORS.primary, border: 'none', cursor: 'pointer', fontWeight: 'bold' }}>Add Selected</button>\n                  <button onClick={() => { setShowAddMember(false); setSelectedMemberEmails([]); }} style={{ flex: 1, padding: '8px', backgroundColor: '#555', border: 'none', cursor: 'pointer', color: 'white' }}>Cancel</button>\n                </div>\n              </div>\n            )}\n            {renderMembers()}\n          </div>\n        )}\n      </div>\n      );\n  }\n\n  return <div>Error: View state unknown</div>;\n}\n\nexport default Groups;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}