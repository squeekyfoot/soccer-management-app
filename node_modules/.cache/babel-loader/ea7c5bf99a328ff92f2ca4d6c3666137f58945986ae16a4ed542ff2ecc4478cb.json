{"ast":null,"code":"import _objectSpread from\"/Users/dbroxton/Documents/Projects/soccer-management-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{useAuth}from'../context/AuthContext';import{useChat}from'../context/ChatContext';import{collection,query,orderBy,onSnapshot,limit}from\"firebase/firestore\";import{db}from\"../firebase\";import UserSearch from'./UserSearch';import{COLORS,MOBILE_BREAKPOINT}from'../constants';// Components\nimport ChatList from'./chat/ChatList';import ImageViewer from'./chat/ImageViewer';import ChatHeader from'./chat/ChatHeader';import MessageList from'./chat/MessageList';import MessageInput from'./chat/MessageInput';import ChatDetailsModal from'./chat/ChatDetailsModal';// NEW Component\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function TeamChat(){const{uploadImage,loggedInUser}=useAuth();const{sendMessage,createChat,hideChat,renameChat,myChats,markChatAsRead}=useChat();const[selectedChat,setSelectedChat]=useState(null);const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState(\"\");const[selectedFile,setSelectedFile]=useState(null);const fileInputRef=useRef(null);const[isCreatingChat,setIsCreatingChat]=useState(false);// Default false now\nconst[selectedEmails,setSelectedEmails]=useState([]);const[newChatName,setNewChatName]=useState(\"\");const[viewingImage,setViewingImage]=useState(null);const[showChatDetails,setShowChatDetails]=useState(false);// New Modal State\nconst[userProfiles,setUserProfiles]=useState({});// Mobile View State\nconst[isMobile,setIsMobile]=useState(window.innerWidth<MOBILE_BREAKPOINT);useEffect(()=>{const handleResize=()=>{setIsMobile(window.innerWidth<MOBILE_BREAKPOINT);};window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);// Total Unread Count for Back Button\nconst totalUnread=myChats.reduce((acc,chat)=>{const count=chat.unreadCounts&&chat.unreadCounts[loggedInUser.uid]||0;return acc+count;},0);// Fetch Live Profiles\nuseEffect(()=>{const usersRef=collection(db,\"users\");const unsubscribe=onSnapshot(usersRef,snapshot=>{const profiles={};snapshot.docs.forEach(doc=>{profiles[doc.id]=doc.data();});setUserProfiles(profiles);});return()=>unsubscribe();},[]);// Listen for Messages\nuseEffect(()=>{if(!selectedChat||isCreatingChat){setMessages([]);return;}markChatAsRead(selectedChat.id);const messagesRef=collection(db,\"chats\",selectedChat.id,\"messages\");const q=query(messagesRef,orderBy(\"createdAt\",\"asc\"),limit(50));const unsubscribe=onSnapshot(q,snapshot=>{const msgs=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setMessages(msgs);// Mark read again if new message comes in while looking\nmarkChatAsRead(selectedChat.id);});return()=>unsubscribe();},[selectedChat,isCreatingChat]);const handleFileChange=e=>{if(e.target.files[0]){setSelectedFile(e.target.files[0]);}if(fileInputRef.current){fileInputRef.current.value=\"\";}};const startNewChat=()=>{setIsCreatingChat(true);setSelectedChat(null);setNewChatName(\"\");setSelectedEmails([]);setNewMessage(\"\");setSelectedFile(null);};const handleSelectChat=chat=>{setSelectedChat(chat);setIsCreatingChat(false);};const handleBackToList=()=>{setSelectedChat(null);setIsCreatingChat(false);};const handleRenameGroup=async()=>{if(!selectedChat)return;const newName=window.prompt(\"Enter new group name:\",selectedChat.name);if(newName&&newName.trim()!==\"\"){await renameChat(selectedChat.id,newName.trim());}setShowChatDetails(false);};const handleSend=async e=>{e.preventDefault();if(isCreatingChat){if(selectedEmails.length===0){alert(\"Please add at least one person to the chat.\");return;}const chatResult=await createChat(selectedEmails,newChatName);if(chatResult&&chatResult.id){const newChatId=chatResult.id;const participants=chatResult.participants;const text=newMessage;const fileToUpload=selectedFile;setNewMessage(\"\");setSelectedFile(null);let imageUrl=null;if(fileToUpload){imageUrl=await uploadImage(fileToUpload,\"chat_images/\".concat(newChatId));}if(text||imageUrl){await sendMessage(newChatId,text,participants,imageUrl);}// Switch to the new chat view\nconst optimisticChat={id:newChatId,name:chatResult.name||newChatName||\"New Chat\",type:selectedEmails.length>0?'group':'dm',participants:participants,participantDetails:chatResult.participantDetails||[]};setSelectedChat(optimisticChat);setIsCreatingChat(false);setNewChatName(\"\");setSelectedEmails([]);}}else{if(!newMessage.trim()&&!selectedFile||!selectedChat)return;const text=newMessage;const fileToUpload=selectedFile;setNewMessage(\"\");setSelectedFile(null);let imageUrl=null;try{if(fileToUpload){imageUrl=await uploadImage(fileToUpload,\"chat_images/\".concat(selectedChat.id));}await sendMessage(selectedChat.id,text,selectedChat.participants,imageUrl);}catch(error){console.error(\"Error sending message/image:\",error);alert(\"Failed to send message.\");}}};const handleDeleteChat=async chat=>{if(chat.type==='roster'){alert(\"Team Roster chats cannot be deleted.\");return;}if(window.confirm(\"Are you sure you want to delete this chat?\")){await hideChat(chat.id,chat.visibleTo,chat.type);setSelectedChat(null);setShowChatDetails(false);}};const canSend=isCreatingChat?selectedEmails.length>0:true;// --- RENDER LOGIC ---\n// If mobile: Show EITHER list OR chat. \n// If desktop: Show split view.\nconst showList=!isMobile||!selectedChat&&!isCreatingChat;const showChat=!isMobile||selectedChat||isCreatingChat;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',height:'100%',width:'100%',maxWidth:'1000px',margin:'0 auto',backgroundColor:COLORS.background,borderRadius:isMobile?'0':'8px',overflow:'hidden',boxSizing:'border-box',border:isMobile?'none':\"1px solid \".concat(COLORS.border)},children:[showList&&/*#__PURE__*/_jsx(ChatList,{myChats:myChats,selectedChat:selectedChat,onSelectChat:handleSelectChat,onStartNewChat:startNewChat,onDeleteChat:handleDeleteChat,userProfiles:userProfiles,isMobile:isMobile}),showChat&&/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,display:'flex',flexDirection:'column',backgroundColor:COLORS.sidebar,minWidth:0,height:'100%'},children:[isCreatingChat?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'15px',borderBottom:\"1px solid \".concat(COLORS.border),backgroundColor:COLORS.background,display:'flex',alignItems:'center'},children:[isMobile&&/*#__PURE__*/_jsx(\"button\",{onClick:handleBackToList,style:{background:'none',border:'none',color:COLORS.primary,fontSize:'24px',marginRight:'10px',cursor:'pointer'},children:\"\\u2039\"}),/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,color:'white'},children:\"New Message\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px'},children:/*#__PURE__*/_jsx(UserSearch,{onSelectionChange:setSelectedEmails})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}})]}):selectedChat?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ChatHeader,{selectedChat:selectedChat,userProfiles:userProfiles,loggedInUser:loggedInUser,onShowDetails:()=>setShowChatDetails(true),onBack:isMobile?handleBackToList:null,totalUnreadCount:totalUnread}),/*#__PURE__*/_jsx(MessageList,{messages:messages,loggedInUser:loggedInUser,onImageClick:setViewingImage,selectedChatId:selectedChat.id})]}):/*#__PURE__*//* Desktop Placeholder */_jsx(\"div\",{style:{flex:1,display:'flex',justifyContent:'center',alignItems:'center',color:'#888'},children:\"Select a conversation or start a new one.\"}),(isCreatingChat||selectedChat)&&/*#__PURE__*/_jsx(MessageInput,{messageText:newMessage,onMessageChange:setNewMessage,onSend:handleSend,selectedFile:selectedFile,onFileChange:handleFileChange,onRemoveFile:()=>setSelectedFile(null),fileInputRef:fileInputRef,canSend:canSend})]}),/*#__PURE__*/_jsx(ImageViewer,{imageUrl:viewingImage,onClose:()=>setViewingImage(null)}),showChatDetails&&/*#__PURE__*/_jsx(ChatDetailsModal,{chat:selectedChat,onClose:()=>setShowChatDetails(false),onRename:handleRenameGroup,onDelete:handleDeleteChat,userProfiles:userProfiles,loggedInUser:loggedInUser})]});}export default TeamChat;","map":{"version":3,"names":["React","useState","useEffect","useRef","useAuth","useChat","collection","query","orderBy","onSnapshot","limit","db","UserSearch","COLORS","MOBILE_BREAKPOINT","ChatList","ImageViewer","ChatHeader","MessageList","MessageInput","ChatDetailsModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TeamChat","uploadImage","loggedInUser","sendMessage","createChat","hideChat","renameChat","myChats","markChatAsRead","selectedChat","setSelectedChat","messages","setMessages","newMessage","setNewMessage","selectedFile","setSelectedFile","fileInputRef","isCreatingChat","setIsCreatingChat","selectedEmails","setSelectedEmails","newChatName","setNewChatName","viewingImage","setViewingImage","showChatDetails","setShowChatDetails","userProfiles","setUserProfiles","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","totalUnread","reduce","acc","chat","count","unreadCounts","uid","usersRef","unsubscribe","snapshot","profiles","docs","forEach","doc","id","data","messagesRef","q","msgs","map","_objectSpread","handleFileChange","e","target","files","current","value","startNewChat","handleSelectChat","handleBackToList","handleRenameGroup","newName","prompt","name","trim","handleSend","preventDefault","length","alert","chatResult","newChatId","participants","text","fileToUpload","imageUrl","concat","optimisticChat","type","participantDetails","error","console","handleDeleteChat","confirm","visibleTo","canSend","showList","showChat","style","display","height","width","maxWidth","margin","backgroundColor","background","borderRadius","overflow","boxSizing","border","children","onSelectChat","onStartNewChat","onDeleteChat","flex","flexDirection","sidebar","minWidth","padding","borderBottom","alignItems","onClick","color","primary","fontSize","marginRight","cursor","onSelectionChange","onShowDetails","onBack","totalUnreadCount","onImageClick","selectedChatId","justifyContent","messageText","onMessageChange","onSend","onFileChange","onRemoveFile","onClose","onRename","onDelete"],"sources":["/Users/dbroxton/Documents/Projects/soccer-management-app/src/components/TeamChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useChat } from '../context/ChatContext'; \nimport { collection, query, orderBy, onSnapshot, limit } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport UserSearch from './UserSearch';\nimport { COLORS, MOBILE_BREAKPOINT } from '../constants';\n\n// Components\nimport ChatList from './chat/ChatList';\nimport ImageViewer from './chat/ImageViewer';\nimport ChatHeader from './chat/ChatHeader';\nimport MessageList from './chat/MessageList';\nimport MessageInput from './chat/MessageInput';\nimport ChatDetailsModal from './chat/ChatDetailsModal'; // NEW Component\n\nfunction TeamChat() {\n  const { uploadImage, loggedInUser } = useAuth();\n  const { sendMessage, createChat, hideChat, renameChat, myChats, markChatAsRead } = useChat();\n  \n  const [selectedChat, setSelectedChat] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  \n  const [selectedFile, setSelectedFile] = useState(null);\n  const fileInputRef = useRef(null); \n  \n  const [isCreatingChat, setIsCreatingChat] = useState(false); // Default false now\n  const [selectedEmails, setSelectedEmails] = useState([]); \n  const [newChatName, setNewChatName] = useState(\"\");\n\n  const [viewingImage, setViewingImage] = useState(null);\n  const [showChatDetails, setShowChatDetails] = useState(false); // New Modal State\n  \n  const [userProfiles, setUserProfiles] = useState({});\n  \n  // Mobile View State\n  const [isMobile, setIsMobile] = useState(window.innerWidth < MOBILE_BREAKPOINT);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Total Unread Count for Back Button\n  const totalUnread = myChats.reduce((acc, chat) => {\n    const count = (chat.unreadCounts && chat.unreadCounts[loggedInUser.uid]) || 0;\n    return acc + count;\n  }, 0);\n\n  // Fetch Live Profiles\n  useEffect(() => {\n    const usersRef = collection(db, \"users\");\n    const unsubscribe = onSnapshot(usersRef, (snapshot) => {\n      const profiles = {};\n      snapshot.docs.forEach(doc => {\n        profiles[doc.id] = doc.data();\n      });\n      setUserProfiles(profiles);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  // Listen for Messages\n  useEffect(() => {\n    if (!selectedChat || isCreatingChat) {\n        setMessages([]); \n        return;\n    }\n\n    markChatAsRead(selectedChat.id);\n\n    const messagesRef = collection(db, \"chats\", selectedChat.id, \"messages\");\n    const q = query(messagesRef, orderBy(\"createdAt\", \"asc\"), limit(50));\n\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const msgs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setMessages(msgs);\n      // Mark read again if new message comes in while looking\n      markChatAsRead(selectedChat.id);\n    });\n\n    return () => unsubscribe();\n  }, [selectedChat, isCreatingChat]);\n\n  const handleFileChange = (e) => {\n    if (e.target.files[0]) {\n      setSelectedFile(e.target.files[0]);\n    }\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n\n  const startNewChat = () => {\n      setIsCreatingChat(true);\n      setSelectedChat(null);\n      setNewChatName(\"\");\n      setSelectedEmails([]);\n      setNewMessage(\"\");\n      setSelectedFile(null);\n  };\n\n  const handleSelectChat = (chat) => {\n    setSelectedChat(chat);\n    setIsCreatingChat(false);\n  };\n\n  const handleBackToList = () => {\n    setSelectedChat(null);\n    setIsCreatingChat(false);\n  };\n\n  const handleRenameGroup = async () => {\n    if (!selectedChat) return;\n    const newName = window.prompt(\"Enter new group name:\", selectedChat.name);\n    if (newName && newName.trim() !== \"\") {\n      await renameChat(selectedChat.id, newName.trim());\n    }\n    setShowChatDetails(false);\n  };\n\n  const handleSend = async (e) => {\n    e.preventDefault();\n\n    if (isCreatingChat) {\n        if (selectedEmails.length === 0) {\n            alert(\"Please add at least one person to the chat.\");\n            return;\n        }\n        const chatResult = await createChat(selectedEmails, newChatName);\n        \n        if (chatResult && chatResult.id) {\n             const newChatId = chatResult.id;\n             const participants = chatResult.participants;\n             const text = newMessage;\n             const fileToUpload = selectedFile;\n             \n             setNewMessage(\"\"); \n             setSelectedFile(null); \n             \n             let imageUrl = null;\n             if (fileToUpload) {\n                 imageUrl = await uploadImage(fileToUpload, `chat_images/${newChatId}`);\n             }\n             \n             if (text || imageUrl) {\n                await sendMessage(newChatId, text, participants, imageUrl);\n             }\n\n             // Switch to the new chat view\n             const optimisticChat = {\n                 id: newChatId,\n                 name: chatResult.name || newChatName || \"New Chat\",\n                 type: selectedEmails.length > 0 ? 'group' : 'dm',\n                 participants: participants,\n                 participantDetails: chatResult.participantDetails || [] \n             };\n\n             setSelectedChat(optimisticChat);\n             setIsCreatingChat(false);\n             setNewChatName(\"\");\n             setSelectedEmails([]);\n        }\n\n    } else {\n        if ((!newMessage.trim() && !selectedFile) || !selectedChat) return;\n        const text = newMessage;\n        const fileToUpload = selectedFile;\n        setNewMessage(\"\"); \n        setSelectedFile(null); \n        let imageUrl = null;\n        try {\n            if (fileToUpload) {\n                imageUrl = await uploadImage(fileToUpload, `chat_images/${selectedChat.id}`);\n            }\n            await sendMessage(selectedChat.id, text, selectedChat.participants, imageUrl);\n        } catch (error) {\n            console.error(\"Error sending message/image:\", error);\n            alert(\"Failed to send message.\");\n        }\n    }\n  };\n\n  const handleDeleteChat = async (chat) => {\n    if (chat.type === 'roster') {\n      alert(\"Team Roster chats cannot be deleted.\");\n      return;\n    }\n    if (window.confirm(\"Are you sure you want to delete this chat?\")) {\n        await hideChat(chat.id, chat.visibleTo, chat.type);\n        setSelectedChat(null);\n        setShowChatDetails(false);\n    }\n  };\n\n  const canSend = isCreatingChat \n    ? (selectedEmails.length > 0) \n    : true; \n\n  // --- RENDER LOGIC ---\n  // If mobile: Show EITHER list OR chat. \n  // If desktop: Show split view.\n  \n  const showList = !isMobile || (!selectedChat && !isCreatingChat);\n  const showChat = !isMobile || (selectedChat || isCreatingChat);\n\n  return (\n    <div style={{ \n      display: 'flex', height: '100%', width: '100%', maxWidth: '1000px', \n      margin: '0 auto', backgroundColor: COLORS.background, \n      borderRadius: isMobile ? '0' : '8px', overflow: 'hidden', boxSizing: 'border-box',\n      border: isMobile ? 'none' : `1px solid ${COLORS.border}`\n    }}>\n      \n      {/* LEFT: Chat List */}\n      {showList && (\n        <ChatList \n          myChats={myChats}\n          selectedChat={selectedChat}\n          onSelectChat={handleSelectChat}\n          onStartNewChat={startNewChat}\n          onDeleteChat={handleDeleteChat}\n          userProfiles={userProfiles}\n          isMobile={isMobile}\n        />\n      )}\n\n      {/* RIGHT: Chat Window */}\n      {showChat && (\n        <div style={{ flex: 1, display: 'flex', flexDirection: 'column', backgroundColor: COLORS.sidebar, minWidth: 0, height: '100%' }}>\n          \n          {isCreatingChat ? (\n              <>\n                  <div style={{ padding: '15px', borderBottom: `1px solid ${COLORS.border}`, backgroundColor: COLORS.background, display: 'flex', alignItems: 'center' }}>\n                      {isMobile && (\n                        <button onClick={handleBackToList} style={{ background: 'none', border: 'none', color: COLORS.primary, fontSize: '24px', marginRight: '10px', cursor: 'pointer' }}>\n                          â€¹\n                        </button>\n                      )}\n                      <h3 style={{ margin: 0, color: 'white' }}>New Message</h3>\n                  </div>\n                  <div style={{ padding: '20px' }}>\n                       <UserSearch onSelectionChange={setSelectedEmails} />\n                  </div>\n                  <div style={{ flex: 1 }} />\n              </>\n          ) : selectedChat ? (\n            <>\n              <ChatHeader \n                selectedChat={selectedChat}\n                userProfiles={userProfiles}\n                loggedInUser={loggedInUser}\n                onShowDetails={() => setShowChatDetails(true)}\n                onBack={isMobile ? handleBackToList : null}\n                totalUnreadCount={totalUnread}\n              />\n\n              <MessageList \n                messages={messages}\n                loggedInUser={loggedInUser}\n                onImageClick={setViewingImage}\n                selectedChatId={selectedChat.id}\n              />\n            </>\n          ) : (\n             /* Desktop Placeholder */\n             <div style={{ flex: 1, display: 'flex', justifyContent: 'center', alignItems: 'center', color: '#888' }}>\n                Select a conversation or start a new one.\n             </div>\n          )}\n\n          {(isCreatingChat || selectedChat) && (\n              <MessageInput \n                messageText={newMessage}\n                onMessageChange={setNewMessage}\n                onSend={handleSend}\n                selectedFile={selectedFile}\n                onFileChange={handleFileChange}\n                onRemoveFile={() => setSelectedFile(null)}\n                fileInputRef={fileInputRef}\n                canSend={canSend}\n              />\n          )}\n        </div>\n      )}\n\n      {/* Modals */}\n      <ImageViewer imageUrl={viewingImage} onClose={() => setViewingImage(null)} />\n      \n      {showChatDetails && (\n        <ChatDetailsModal \n          chat={selectedChat} \n          onClose={() => setShowChatDetails(false)}\n          onRename={handleRenameGroup}\n          onDelete={handleDeleteChat}\n          userProfiles={userProfiles}\n          loggedInUser={loggedInUser}\n        />\n      )}\n\n    </div>\n  );\n}\n\nexport default TeamChat;"],"mappings":"6IAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,OAAO,KAAQ,wBAAwB,CAChD,OAASC,OAAO,KAAQ,wBAAwB,CAChD,OAASC,UAAU,CAAEC,KAAK,CAAEC,OAAO,CAAEC,UAAU,CAAEC,KAAK,KAAQ,oBAAoB,CAClF,OAASC,EAAE,KAAQ,aAAa,CAChC,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,OAASC,MAAM,CAAEC,iBAAiB,KAAQ,cAAc,CAExD;AACA,MAAO,CAAAC,QAAQ,KAAM,iBAAiB,CACtC,MAAO,CAAAC,WAAW,KAAM,oBAAoB,CAC5C,MAAO,CAAAC,UAAU,KAAM,mBAAmB,CAC1C,MAAO,CAAAC,WAAW,KAAM,oBAAoB,CAC5C,MAAO,CAAAC,YAAY,KAAM,qBAAqB,CAC9C,MAAO,CAAAC,gBAAgB,KAAM,yBAAyB,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAExD,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,KAAM,CAAEC,WAAW,CAAEC,YAAa,CAAC,CAAGzB,OAAO,CAAC,CAAC,CAC/C,KAAM,CAAE0B,WAAW,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,UAAU,CAAEC,OAAO,CAAEC,cAAe,CAAC,CAAG9B,OAAO,CAAC,CAAC,CAE5F,KAAM,CAAC+B,YAAY,CAAEC,eAAe,CAAC,CAAGpC,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACqC,QAAQ,CAAEC,WAAW,CAAC,CAAGtC,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACuC,UAAU,CAAEC,aAAa,CAAC,CAAGxC,QAAQ,CAAC,EAAE,CAAC,CAEhD,KAAM,CAACyC,YAAY,CAAEC,eAAe,CAAC,CAAG1C,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAAA2C,YAAY,CAAGzC,MAAM,CAAC,IAAI,CAAC,CAEjC,KAAM,CAAC0C,cAAc,CAAEC,iBAAiB,CAAC,CAAG7C,QAAQ,CAAC,KAAK,CAAC,CAAE;AAC7D,KAAM,CAAC8C,cAAc,CAAEC,iBAAiB,CAAC,CAAG/C,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAACgD,WAAW,CAAEC,cAAc,CAAC,CAAGjD,QAAQ,CAAC,EAAE,CAAC,CAElD,KAAM,CAACkD,YAAY,CAAEC,eAAe,CAAC,CAAGnD,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACoD,eAAe,CAAEC,kBAAkB,CAAC,CAAGrD,QAAQ,CAAC,KAAK,CAAC,CAAE;AAE/D,KAAM,CAACsD,YAAY,CAAEC,eAAe,CAAC,CAAGvD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAEpD;AACA,KAAM,CAACwD,QAAQ,CAAEC,WAAW,CAAC,CAAGzD,QAAQ,CAAC0D,MAAM,CAACC,UAAU,CAAG9C,iBAAiB,CAAC,CAE/EZ,SAAS,CAAC,IAAM,CACd,KAAM,CAAA2D,YAAY,CAAGA,CAAA,GAAM,CACzBH,WAAW,CAACC,MAAM,CAACC,UAAU,CAAG9C,iBAAiB,CAAC,CACpD,CAAC,CACD6C,MAAM,CAACG,gBAAgB,CAAC,QAAQ,CAAED,YAAY,CAAC,CAC/C,MAAO,IAAMF,MAAM,CAACI,mBAAmB,CAAC,QAAQ,CAAEF,YAAY,CAAC,CACjE,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAG,WAAW,CAAG9B,OAAO,CAAC+B,MAAM,CAAC,CAACC,GAAG,CAAEC,IAAI,GAAK,CAChD,KAAM,CAAAC,KAAK,CAAID,IAAI,CAACE,YAAY,EAAIF,IAAI,CAACE,YAAY,CAACxC,YAAY,CAACyC,GAAG,CAAC,EAAK,CAAC,CAC7E,MAAO,CAAAJ,GAAG,CAAGE,KAAK,CACpB,CAAC,CAAE,CAAC,CAAC,CAEL;AACAlE,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqE,QAAQ,CAAGjE,UAAU,CAACK,EAAE,CAAE,OAAO,CAAC,CACxC,KAAM,CAAA6D,WAAW,CAAG/D,UAAU,CAAC8D,QAAQ,CAAGE,QAAQ,EAAK,CACrD,KAAM,CAAAC,QAAQ,CAAG,CAAC,CAAC,CACnBD,QAAQ,CAACE,IAAI,CAACC,OAAO,CAACC,GAAG,EAAI,CAC3BH,QAAQ,CAACG,GAAG,CAACC,EAAE,CAAC,CAAGD,GAAG,CAACE,IAAI,CAAC,CAAC,CAC/B,CAAC,CAAC,CACFvB,eAAe,CAACkB,QAAQ,CAAC,CAC3B,CAAC,CAAC,CACF,MAAO,IAAMF,WAAW,CAAC,CAAC,CAC5B,CAAC,CAAE,EAAE,CAAC,CAEN;AACAtE,SAAS,CAAC,IAAM,CACd,GAAI,CAACkC,YAAY,EAAIS,cAAc,CAAE,CACjCN,WAAW,CAAC,EAAE,CAAC,CACf,OACJ,CAEAJ,cAAc,CAACC,YAAY,CAAC0C,EAAE,CAAC,CAE/B,KAAM,CAAAE,WAAW,CAAG1E,UAAU,CAACK,EAAE,CAAE,OAAO,CAAEyB,YAAY,CAAC0C,EAAE,CAAE,UAAU,CAAC,CACxE,KAAM,CAAAG,CAAC,CAAG1E,KAAK,CAACyE,WAAW,CAAExE,OAAO,CAAC,WAAW,CAAE,KAAK,CAAC,CAAEE,KAAK,CAAC,EAAE,CAAC,CAAC,CAEpE,KAAM,CAAA8D,WAAW,CAAG/D,UAAU,CAACwE,CAAC,CAAGR,QAAQ,EAAK,CAC9C,KAAM,CAAAS,IAAI,CAAGT,QAAQ,CAACE,IAAI,CAACQ,GAAG,CAACN,GAAG,EAAAO,aAAA,EAChCN,EAAE,CAAED,GAAG,CAACC,EAAE,EACPD,GAAG,CAACE,IAAI,CAAC,CAAC,CACb,CAAC,CACHxC,WAAW,CAAC2C,IAAI,CAAC,CACjB;AACA/C,cAAc,CAACC,YAAY,CAAC0C,EAAE,CAAC,CACjC,CAAC,CAAC,CAEF,MAAO,IAAMN,WAAW,CAAC,CAAC,CAC5B,CAAC,CAAE,CAACpC,YAAY,CAAES,cAAc,CAAC,CAAC,CAElC,KAAM,CAAAwC,gBAAgB,CAAIC,CAAC,EAAK,CAC9B,GAAIA,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAE,CACrB7C,eAAe,CAAC2C,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CACpC,CACA,GAAI5C,YAAY,CAAC6C,OAAO,CAAE,CACxB7C,YAAY,CAAC6C,OAAO,CAACC,KAAK,CAAG,EAAE,CACjC,CACF,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACvB7C,iBAAiB,CAAC,IAAI,CAAC,CACvBT,eAAe,CAAC,IAAI,CAAC,CACrBa,cAAc,CAAC,EAAE,CAAC,CAClBF,iBAAiB,CAAC,EAAE,CAAC,CACrBP,aAAa,CAAC,EAAE,CAAC,CACjBE,eAAe,CAAC,IAAI,CAAC,CACzB,CAAC,CAED,KAAM,CAAAiD,gBAAgB,CAAIzB,IAAI,EAAK,CACjC9B,eAAe,CAAC8B,IAAI,CAAC,CACrBrB,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAC,CAED,KAAM,CAAA+C,gBAAgB,CAAGA,CAAA,GAAM,CAC7BxD,eAAe,CAAC,IAAI,CAAC,CACrBS,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAC,CAED,KAAM,CAAAgD,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CAAC1D,YAAY,CAAE,OACnB,KAAM,CAAA2D,OAAO,CAAGpC,MAAM,CAACqC,MAAM,CAAC,uBAAuB,CAAE5D,YAAY,CAAC6D,IAAI,CAAC,CACzE,GAAIF,OAAO,EAAIA,OAAO,CAACG,IAAI,CAAC,CAAC,GAAK,EAAE,CAAE,CACpC,KAAM,CAAAjE,UAAU,CAACG,YAAY,CAAC0C,EAAE,CAAEiB,OAAO,CAACG,IAAI,CAAC,CAAC,CAAC,CACnD,CACA5C,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAC,CAED,KAAM,CAAA6C,UAAU,CAAG,KAAO,CAAAb,CAAC,EAAK,CAC9BA,CAAC,CAACc,cAAc,CAAC,CAAC,CAElB,GAAIvD,cAAc,CAAE,CAChB,GAAIE,cAAc,CAACsD,MAAM,GAAK,CAAC,CAAE,CAC7BC,KAAK,CAAC,6CAA6C,CAAC,CACpD,OACJ,CACA,KAAM,CAAAC,UAAU,CAAG,KAAM,CAAAxE,UAAU,CAACgB,cAAc,CAAEE,WAAW,CAAC,CAEhE,GAAIsD,UAAU,EAAIA,UAAU,CAACzB,EAAE,CAAE,CAC5B,KAAM,CAAA0B,SAAS,CAAGD,UAAU,CAACzB,EAAE,CAC/B,KAAM,CAAA2B,YAAY,CAAGF,UAAU,CAACE,YAAY,CAC5C,KAAM,CAAAC,IAAI,CAAGlE,UAAU,CACvB,KAAM,CAAAmE,YAAY,CAAGjE,YAAY,CAEjCD,aAAa,CAAC,EAAE,CAAC,CACjBE,eAAe,CAAC,IAAI,CAAC,CAErB,GAAI,CAAAiE,QAAQ,CAAG,IAAI,CACnB,GAAID,YAAY,CAAE,CACdC,QAAQ,CAAG,KAAM,CAAAhF,WAAW,CAAC+E,YAAY,gBAAAE,MAAA,CAAiBL,SAAS,CAAE,CAAC,CAC1E,CAEA,GAAIE,IAAI,EAAIE,QAAQ,CAAE,CACnB,KAAM,CAAA9E,WAAW,CAAC0E,SAAS,CAAEE,IAAI,CAAED,YAAY,CAAEG,QAAQ,CAAC,CAC7D,CAEA;AACA,KAAM,CAAAE,cAAc,CAAG,CACnBhC,EAAE,CAAE0B,SAAS,CACbP,IAAI,CAAEM,UAAU,CAACN,IAAI,EAAIhD,WAAW,EAAI,UAAU,CAClD8D,IAAI,CAAEhE,cAAc,CAACsD,MAAM,CAAG,CAAC,CAAG,OAAO,CAAG,IAAI,CAChDI,YAAY,CAAEA,YAAY,CAC1BO,kBAAkB,CAAET,UAAU,CAACS,kBAAkB,EAAI,EACzD,CAAC,CAED3E,eAAe,CAACyE,cAAc,CAAC,CAC/BhE,iBAAiB,CAAC,KAAK,CAAC,CACxBI,cAAc,CAAC,EAAE,CAAC,CAClBF,iBAAiB,CAAC,EAAE,CAAC,CAC1B,CAEJ,CAAC,IAAM,CACH,GAAK,CAACR,UAAU,CAAC0D,IAAI,CAAC,CAAC,EAAI,CAACxD,YAAY,EAAK,CAACN,YAAY,CAAE,OAC5D,KAAM,CAAAsE,IAAI,CAAGlE,UAAU,CACvB,KAAM,CAAAmE,YAAY,CAAGjE,YAAY,CACjCD,aAAa,CAAC,EAAE,CAAC,CACjBE,eAAe,CAAC,IAAI,CAAC,CACrB,GAAI,CAAAiE,QAAQ,CAAG,IAAI,CACnB,GAAI,CACA,GAAID,YAAY,CAAE,CACdC,QAAQ,CAAG,KAAM,CAAAhF,WAAW,CAAC+E,YAAY,gBAAAE,MAAA,CAAiBzE,YAAY,CAAC0C,EAAE,CAAE,CAAC,CAChF,CACA,KAAM,CAAAhD,WAAW,CAACM,YAAY,CAAC0C,EAAE,CAAE4B,IAAI,CAAEtE,YAAY,CAACqE,YAAY,CAAEG,QAAQ,CAAC,CACjF,CAAE,MAAOK,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpDX,KAAK,CAAC,yBAAyB,CAAC,CACpC,CACJ,CACF,CAAC,CAED,KAAM,CAAAa,gBAAgB,CAAG,KAAO,CAAAhD,IAAI,EAAK,CACvC,GAAIA,IAAI,CAAC4C,IAAI,GAAK,QAAQ,CAAE,CAC1BT,KAAK,CAAC,sCAAsC,CAAC,CAC7C,OACF,CACA,GAAI3C,MAAM,CAACyD,OAAO,CAAC,4CAA4C,CAAC,CAAE,CAC9D,KAAM,CAAApF,QAAQ,CAACmC,IAAI,CAACW,EAAE,CAAEX,IAAI,CAACkD,SAAS,CAAElD,IAAI,CAAC4C,IAAI,CAAC,CAClD1E,eAAe,CAAC,IAAI,CAAC,CACrBiB,kBAAkB,CAAC,KAAK,CAAC,CAC7B,CACF,CAAC,CAED,KAAM,CAAAgE,OAAO,CAAGzE,cAAc,CACzBE,cAAc,CAACsD,MAAM,CAAG,CAAC,CAC1B,IAAI,CAER;AACA;AACA;AAEA,KAAM,CAAAkB,QAAQ,CAAG,CAAC9D,QAAQ,EAAK,CAACrB,YAAY,EAAI,CAACS,cAAe,CAChE,KAAM,CAAA2E,QAAQ,CAAG,CAAC/D,QAAQ,EAAKrB,YAAY,EAAIS,cAAe,CAE9D,mBACErB,KAAA,QAAKiG,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CAAEC,MAAM,CAAE,MAAM,CAAEC,KAAK,CAAE,MAAM,CAAEC,QAAQ,CAAE,QAAQ,CAClEC,MAAM,CAAE,QAAQ,CAAEC,eAAe,CAAElH,MAAM,CAACmH,UAAU,CACpDC,YAAY,CAAExE,QAAQ,CAAG,GAAG,CAAG,KAAK,CAAEyE,QAAQ,CAAE,QAAQ,CAAEC,SAAS,CAAE,YAAY,CACjFC,MAAM,CAAE3E,QAAQ,CAAG,MAAM,cAAAoD,MAAA,CAAgBhG,MAAM,CAACuH,MAAM,CACxD,CAAE,CAAAC,QAAA,EAGCd,QAAQ,eACPjG,IAAA,CAACP,QAAQ,EACPmB,OAAO,CAAEA,OAAQ,CACjBE,YAAY,CAAEA,YAAa,CAC3BkG,YAAY,CAAE1C,gBAAiB,CAC/B2C,cAAc,CAAE5C,YAAa,CAC7B6C,YAAY,CAAErB,gBAAiB,CAC/B5D,YAAY,CAAEA,YAAa,CAC3BE,QAAQ,CAAEA,QAAS,CACpB,CACF,CAGA+D,QAAQ,eACPhG,KAAA,QAAKiG,KAAK,CAAE,CAAEgB,IAAI,CAAE,CAAC,CAAEf,OAAO,CAAE,MAAM,CAAEgB,aAAa,CAAE,QAAQ,CAAEX,eAAe,CAAElH,MAAM,CAAC8H,OAAO,CAAEC,QAAQ,CAAE,CAAC,CAAEjB,MAAM,CAAE,MAAO,CAAE,CAAAU,QAAA,EAE7HxF,cAAc,cACXrB,KAAA,CAAAE,SAAA,EAAA2G,QAAA,eACI7G,KAAA,QAAKiG,KAAK,CAAE,CAAEoB,OAAO,CAAE,MAAM,CAAEC,YAAY,cAAAjC,MAAA,CAAehG,MAAM,CAACuH,MAAM,CAAE,CAAEL,eAAe,CAAElH,MAAM,CAACmH,UAAU,CAAEN,OAAO,CAAE,MAAM,CAAEqB,UAAU,CAAE,QAAS,CAAE,CAAAV,QAAA,EAClJ5E,QAAQ,eACPnC,IAAA,WAAQ0H,OAAO,CAAEnD,gBAAiB,CAAC4B,KAAK,CAAE,CAAEO,UAAU,CAAE,MAAM,CAAEI,MAAM,CAAE,MAAM,CAAEa,KAAK,CAAEpI,MAAM,CAACqI,OAAO,CAAEC,QAAQ,CAAE,MAAM,CAAEC,WAAW,CAAE,MAAM,CAAEC,MAAM,CAAE,SAAU,CAAE,CAAAhB,QAAA,CAAC,QAEnK,CAAQ,CACT,cACD/G,IAAA,OAAImG,KAAK,CAAE,CAAEK,MAAM,CAAE,CAAC,CAAEmB,KAAK,CAAE,OAAQ,CAAE,CAAAZ,QAAA,CAAC,aAAW,CAAI,CAAC,EACzD,CAAC,cACN/G,IAAA,QAAKmG,KAAK,CAAE,CAAEoB,OAAO,CAAE,MAAO,CAAE,CAAAR,QAAA,cAC3B/G,IAAA,CAACV,UAAU,EAAC0I,iBAAiB,CAAEtG,iBAAkB,CAAE,CAAC,CACpD,CAAC,cACN1B,IAAA,QAAKmG,KAAK,CAAE,CAAEgB,IAAI,CAAE,CAAE,CAAE,CAAE,CAAC,EAC7B,CAAC,CACHrG,YAAY,cACdZ,KAAA,CAAAE,SAAA,EAAA2G,QAAA,eACE/G,IAAA,CAACL,UAAU,EACTmB,YAAY,CAAEA,YAAa,CAC3BmB,YAAY,CAAEA,YAAa,CAC3B1B,YAAY,CAAEA,YAAa,CAC3B0H,aAAa,CAAEA,CAAA,GAAMjG,kBAAkB,CAAC,IAAI,CAAE,CAC9CkG,MAAM,CAAE/F,QAAQ,CAAGoC,gBAAgB,CAAG,IAAK,CAC3C4D,gBAAgB,CAAEzF,WAAY,CAC/B,CAAC,cAEF1C,IAAA,CAACJ,WAAW,EACVoB,QAAQ,CAAEA,QAAS,CACnBT,YAAY,CAAEA,YAAa,CAC3B6H,YAAY,CAAEtG,eAAgB,CAC9BuG,cAAc,CAAEvH,YAAY,CAAC0C,EAAG,CACjC,CAAC,EACF,CAAC,cAEF,yBACAxD,IAAA,QAAKmG,KAAK,CAAE,CAAEgB,IAAI,CAAE,CAAC,CAAEf,OAAO,CAAE,MAAM,CAAEkC,cAAc,CAAE,QAAQ,CAAEb,UAAU,CAAE,QAAQ,CAAEE,KAAK,CAAE,MAAO,CAAE,CAAAZ,QAAA,CAAC,2CAEzG,CAAK,CACP,CAEA,CAACxF,cAAc,EAAIT,YAAY,gBAC5Bd,IAAA,CAACH,YAAY,EACX0I,WAAW,CAAErH,UAAW,CACxBsH,eAAe,CAAErH,aAAc,CAC/BsH,MAAM,CAAE5D,UAAW,CACnBzD,YAAY,CAAEA,YAAa,CAC3BsH,YAAY,CAAE3E,gBAAiB,CAC/B4E,YAAY,CAAEA,CAAA,GAAMtH,eAAe,CAAC,IAAI,CAAE,CAC1CC,YAAY,CAAEA,YAAa,CAC3B0E,OAAO,CAAEA,OAAQ,CAClB,CACJ,EACE,CACN,cAGDhG,IAAA,CAACN,WAAW,EAAC4F,QAAQ,CAAEzD,YAAa,CAAC+G,OAAO,CAAEA,CAAA,GAAM9G,eAAe,CAAC,IAAI,CAAE,CAAE,CAAC,CAE5EC,eAAe,eACd/B,IAAA,CAACF,gBAAgB,EACf+C,IAAI,CAAE/B,YAAa,CACnB8H,OAAO,CAAEA,CAAA,GAAM5G,kBAAkB,CAAC,KAAK,CAAE,CACzC6G,QAAQ,CAAErE,iBAAkB,CAC5BsE,QAAQ,CAAEjD,gBAAiB,CAC3B5D,YAAY,CAAEA,YAAa,CAC3B1B,YAAY,CAAEA,YAAa,CAC5B,CACF,EAEE,CAAC,CAEV,CAEA,cAAe,CAAAF,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}