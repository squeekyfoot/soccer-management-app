{"ast":null,"code":"/**\n * Compresses and resizes an image file using modern createImageBitmap API.\n * This is faster and reduces main-thread blocking compared to FileReader.\n * * @param {File} file - The original image file\n * @param {number} maxWidth - Max width/height (default 300px)\n * @param {number} quality - JPEG quality 0-1 (default 0.7)\n */export const compressImage=async function(file){let maxWidth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:300;let quality=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0.7;try{// 1. Use createImageBitmap (modern, faster, async decoding)\n// This avoids the 'load' handler delays of FileReader\nconst bitmap=await createImageBitmap(file);let width=bitmap.width;let height=bitmap.height;// 2. Calculate new dimensions\nif(width>height){if(width>maxWidth){height=Math.round(height*maxWidth/width);width=maxWidth;}}else{if(height>maxWidth){width=Math.round(width*maxWidth/height);height=maxWidth;}}// 3. Draw to canvas\nconst canvas=document.createElement('canvas');canvas.width=width;canvas.height=height;const ctx=canvas.getContext('2d');ctx.drawImage(bitmap,0,0,width,height);// 4. Convert to compressed Blob -> File\nreturn new Promise((resolve,reject)=>{canvas.toBlob(blob=>{if(!blob){reject(new Error('Canvas is empty'));return;}const newFile=new File([blob],file.name,{type:'image/jpeg',lastModified:Date.now()});// Clean up bitmap memory\nbitmap.close();resolve(newFile);},'image/jpeg',quality);});}catch(error){console.error(\"Compression error:\",error);// Fallback: If createImageBitmap fails (very old browsers), return original\nreturn file;}};","map":{"version":3,"names":["compressImage","file","maxWidth","arguments","length","undefined","quality","bitmap","createImageBitmap","width","height","Math","round","canvas","document","createElement","ctx","getContext","drawImage","Promise","resolve","reject","toBlob","blob","Error","newFile","File","name","type","lastModified","Date","now","close","error","console"],"sources":["/Users/dbroxton/Documents/Projects/soccer-management-app/src/utils/imageUtils.js"],"sourcesContent":["/**\n * Compresses and resizes an image file using modern createImageBitmap API.\n * This is faster and reduces main-thread blocking compared to FileReader.\n * * @param {File} file - The original image file\n * @param {number} maxWidth - Max width/height (default 300px)\n * @param {number} quality - JPEG quality 0-1 (default 0.7)\n */\nexport const compressImage = async (file, maxWidth = 300, quality = 0.7) => {\n    try {\n        // 1. Use createImageBitmap (modern, faster, async decoding)\n        // This avoids the 'load' handler delays of FileReader\n        const bitmap = await createImageBitmap(file);\n        \n        let width = bitmap.width;\n        let height = bitmap.height;\n\n        // 2. Calculate new dimensions\n        if (width > height) {\n            if (width > maxWidth) {\n                height = Math.round((height * maxWidth) / width);\n                width = maxWidth;\n            }\n        } else {\n            if (height > maxWidth) {\n                width = Math.round((width * maxWidth) / height);\n                height = maxWidth;\n            }\n        }\n\n        // 3. Draw to canvas\n        const canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(bitmap, 0, 0, width, height);\n\n        // 4. Convert to compressed Blob -> File\n        return new Promise((resolve, reject) => {\n            canvas.toBlob(\n                (blob) => {\n                    if (!blob) {\n                        reject(new Error('Canvas is empty'));\n                        return;\n                    }\n                    const newFile = new File([blob], file.name, {\n                        type: 'image/jpeg',\n                        lastModified: Date.now(),\n                    });\n                    // Clean up bitmap memory\n                    bitmap.close();\n                    resolve(newFile);\n                },\n                'image/jpeg',\n                quality\n            );\n        });\n\n    } catch (error) {\n        console.error(\"Compression error:\", error);\n        // Fallback: If createImageBitmap fails (very old browsers), return original\n        return file;\n    }\n};"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,MAAO,MAAM,CAAAA,aAAa,CAAG,cAAAA,CAAOC,IAAI,CAAoC,IAAlC,CAAAC,QAAQ,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,GAAG,IAAE,CAAAG,OAAO,CAAAH,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,GAAG,CACnE,GAAI,CACA;AACA;AACA,KAAM,CAAAI,MAAM,CAAG,KAAM,CAAAC,iBAAiB,CAACP,IAAI,CAAC,CAE5C,GAAI,CAAAQ,KAAK,CAAGF,MAAM,CAACE,KAAK,CACxB,GAAI,CAAAC,MAAM,CAAGH,MAAM,CAACG,MAAM,CAE1B;AACA,GAAID,KAAK,CAAGC,MAAM,CAAE,CAChB,GAAID,KAAK,CAAGP,QAAQ,CAAE,CAClBQ,MAAM,CAAGC,IAAI,CAACC,KAAK,CAAEF,MAAM,CAAGR,QAAQ,CAAIO,KAAK,CAAC,CAChDA,KAAK,CAAGP,QAAQ,CACpB,CACJ,CAAC,IAAM,CACH,GAAIQ,MAAM,CAAGR,QAAQ,CAAE,CACnBO,KAAK,CAAGE,IAAI,CAACC,KAAK,CAAEH,KAAK,CAAGP,QAAQ,CAAIQ,MAAM,CAAC,CAC/CA,MAAM,CAAGR,QAAQ,CACrB,CACJ,CAEA;AACA,KAAM,CAAAW,MAAM,CAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/CF,MAAM,CAACJ,KAAK,CAAGA,KAAK,CACpBI,MAAM,CAACH,MAAM,CAAGA,MAAM,CAEtB,KAAM,CAAAM,GAAG,CAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC,CACnCD,GAAG,CAACE,SAAS,CAACX,MAAM,CAAE,CAAC,CAAE,CAAC,CAAEE,KAAK,CAAEC,MAAM,CAAC,CAE1C;AACA,MAAO,IAAI,CAAAS,OAAO,CAAC,CAACC,OAAO,CAAEC,MAAM,GAAK,CACpCR,MAAM,CAACS,MAAM,CACRC,IAAI,EAAK,CACN,GAAI,CAACA,IAAI,CAAE,CACPF,MAAM,CAAC,GAAI,CAAAG,KAAK,CAAC,iBAAiB,CAAC,CAAC,CACpC,OACJ,CACA,KAAM,CAAAC,OAAO,CAAG,GAAI,CAAAC,IAAI,CAAC,CAACH,IAAI,CAAC,CAAEtB,IAAI,CAAC0B,IAAI,CAAE,CACxCC,IAAI,CAAE,YAAY,CAClBC,YAAY,CAAEC,IAAI,CAACC,GAAG,CAAC,CAC3B,CAAC,CAAC,CACF;AACAxB,MAAM,CAACyB,KAAK,CAAC,CAAC,CACdZ,OAAO,CAACK,OAAO,CAAC,CACpB,CAAC,CACD,YAAY,CACZnB,OACJ,CAAC,CACL,CAAC,CAAC,CAEN,CAAE,MAAO2B,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC1C;AACA,MAAO,CAAAhC,IAAI,CACf,CACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}