{"ast":null,"code":"import{initializeApp,getApps,getApp}from\"firebase/app\";// ADDED: Import initializeAuth and indexedDBLocalPersistence\nimport{getAuth,initializeAuth,indexedDBLocalPersistence}from\"firebase/auth\";import{getFirestore}from\"firebase/firestore\";import{getStorage}from\"firebase/storage\";import{Capacitor}from\"@capacitor/core\";// Keep your hardcoded keys for now (until we confirm it works)\nconst firebaseConfig={apiKey:\"YOUR_HARDCODED_KEY\",// <--- Make sure this is your actual key\nauthDomain:\"soccer-management-app.firebaseapp.com\",projectId:\"soccer-management-app\",storageBucket:\"soccer-management-app.appspot.com\",messagingSenderId:\"123456...\",appId:\"1:123456...\",measurementId:\"G-...\"};// Initialize Firebase (Singleton Pattern)\nconst app=!getApps().length?initializeApp(firebaseConfig):getApp();// --- FIX STARTS HERE ---\n// Explicitly initialize Auth with IndexedDB persistence to avoid 'gapi' errors on iOS\nlet auth;if(Capacitor.isNativePlatform()){// If running on iOS/Android, force IndexedDB persistence\nauth=initializeAuth(app,{persistence:indexedDBLocalPersistence});}else{// On the web, getAuth() usually works, but we can stick to initializeAuth for consistency\n// or fallback to getAuth() if already initialized\ntry{auth=initializeAuth(app,{persistence:indexedDBLocalPersistence});}catch(e){auth=getAuth(app);// Fallback if already initialized\n}}// --- FIX ENDS HERE ---\nexport{auth};export const db=getFirestore(app);export const storage=getStorage(app);","map":{"version":3,"names":["initializeApp","getApps","getApp","getAuth","initializeAuth","indexedDBLocalPersistence","getFirestore","getStorage","Capacitor","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","length","auth","isNativePlatform","persistence","e","db","storage"],"sources":["/Users/dbroxton/Documents/Projects/soccer-management-app/src/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\n// ADDED: Import initializeAuth and indexedDBLocalPersistence\nimport { getAuth, initializeAuth, indexedDBLocalPersistence } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\nimport { Capacitor } from \"@capacitor/core\";\n\n// Keep your hardcoded keys for now (until we confirm it works)\nconst firebaseConfig = {\n  apiKey: \"YOUR_HARDCODED_KEY\", // <--- Make sure this is your actual key\n  authDomain: \"soccer-management-app.firebaseapp.com\",\n  projectId: \"soccer-management-app\",\n  storageBucket: \"soccer-management-app.appspot.com\",\n  messagingSenderId: \"123456...\",\n  appId: \"1:123456...\",\n  measurementId: \"G-...\" \n};\n\n// Initialize Firebase (Singleton Pattern)\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\n\n// --- FIX STARTS HERE ---\n// Explicitly initialize Auth with IndexedDB persistence to avoid 'gapi' errors on iOS\nlet auth;\nif (Capacitor.isNativePlatform()) {\n  // If running on iOS/Android, force IndexedDB persistence\n  auth = initializeAuth(app, {\n    persistence: indexedDBLocalPersistence\n  });\n} else {\n  // On the web, getAuth() usually works, but we can stick to initializeAuth for consistency\n  // or fallback to getAuth() if already initialized\n  try {\n     auth = initializeAuth(app, {\n        persistence: indexedDBLocalPersistence\n     });\n  } catch (e) {\n     auth = getAuth(app); // Fallback if already initialized\n  }\n}\n// --- FIX ENDS HERE ---\n\nexport { auth };\nexport const db = getFirestore(app);\nexport const storage = getStorage(app);"],"mappings":"AAAA,OAASA,aAAa,CAAEC,OAAO,CAAEC,MAAM,KAAQ,cAAc,CAC7D;AACA,OAASC,OAAO,CAAEC,cAAc,CAAEC,yBAAyB,KAAQ,eAAe,CAClF,OAASC,YAAY,KAAQ,oBAAoB,CACjD,OAASC,UAAU,KAAQ,kBAAkB,CAC7C,OAASC,SAAS,KAAQ,iBAAiB,CAE3C;AACA,KAAM,CAAAC,cAAc,CAAG,CACrBC,MAAM,CAAE,oBAAoB,CAAE;AAC9BC,UAAU,CAAE,uCAAuC,CACnDC,SAAS,CAAE,uBAAuB,CAClCC,aAAa,CAAE,mCAAmC,CAClDC,iBAAiB,CAAE,WAAW,CAC9BC,KAAK,CAAE,aAAa,CACpBC,aAAa,CAAE,OACjB,CAAC,CAED;AACA,KAAM,CAAAC,GAAG,CAAG,CAAChB,OAAO,CAAC,CAAC,CAACiB,MAAM,CAAGlB,aAAa,CAACS,cAAc,CAAC,CAAGP,MAAM,CAAC,CAAC,CAExE;AACA;AACA,GAAI,CAAAiB,IAAI,CACR,GAAIX,SAAS,CAACY,gBAAgB,CAAC,CAAC,CAAE,CAChC;AACAD,IAAI,CAAGf,cAAc,CAACa,GAAG,CAAE,CACzBI,WAAW,CAAEhB,yBACf,CAAC,CAAC,CACJ,CAAC,IAAM,CACL;AACA;AACA,GAAI,CACDc,IAAI,CAAGf,cAAc,CAACa,GAAG,CAAE,CACxBI,WAAW,CAAEhB,yBAChB,CAAC,CAAC,CACL,CAAE,MAAOiB,CAAC,CAAE,CACTH,IAAI,CAAGhB,OAAO,CAACc,GAAG,CAAC,CAAE;AACxB,CACF,CACA;AAEA,OAASE,IAAI,EACb,MAAO,MAAM,CAAAI,EAAE,CAAGjB,YAAY,CAACW,GAAG,CAAC,CACnC,MAAO,MAAM,CAAAO,OAAO,CAAGjB,UAAU,CAACU,GAAG,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}