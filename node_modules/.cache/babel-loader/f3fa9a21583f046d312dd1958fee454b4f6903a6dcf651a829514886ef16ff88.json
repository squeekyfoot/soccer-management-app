{"ast":null,"code":"import _objectSpread from\"/Users/dbroxton/Documents/Projects/soccer-management-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useState,useEffect}from'react';import{onAuthStateChanged,signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut,updateEmail,EmailAuthProvider,reauthenticateWithCredential}from\"firebase/auth\";import{doc,getDoc,setDoc,updateDoc}from\"firebase/firestore\";import{auth,db}from\"../firebase\";// Your firebase.js file\n// 1. Create the Context\n// This is the \"channel\" components will listen to.\nimport{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();// 2. Create a \"hook\"\n// This is a simple shortcut so components can just call `useAuth()`\n// instead of the more complex `useContext(AuthContext)`.\nexport const useAuth=()=>{return useContext(AuthContext);};// 3. Create the \"Provider\"\n// This is the component that does all the work.\n// It will hold all the state and logic.\nexport const AuthProvider=_ref=>{let{children}=_ref;// --- All our global state lives here ---\nconst[loggedInUser,setLoggedInUser]=useState(null);const[soccerDetails,setSoccerDetails]=useState(null);const[isLoading,setIsLoading]=useState(true);const[needsReauth,setNeedsReauth]=useState(false);// --- Core Auth Logic (runs on app start) ---\nuseEffect(()=>{// onAuthStateChanged is the listener that checks login status\nconst unsubscribe=onAuthStateChanged(auth,async user=>{if(user){// User is logged in. Fetch their data.\nconst userDocRef=doc(db,\"users\",user.uid);const userDoc=await getDoc(userDocRef);const soccerDocRef=doc(db,\"users\",user.uid,\"sportsDetails\",\"soccer\");const soccerDoc=await getDoc(soccerDocRef);if(userDoc.exists()){setLoggedInUser(userDoc.data());}else{console.error(\"No user profile found!\");setLoggedInUser(null);}if(soccerDoc.exists()){setSoccerDetails(soccerDoc.data());}else{setSoccerDetails(null);}}else{// User is logged out.\nsetLoggedInUser(null);setSoccerDetails(null);}setIsLoading(false);});// Cleanup the listener when the app closes\nreturn()=>unsubscribe();},[]);// Empty array = runs once on mount\n// --- All our functions now live here ---\n// Note: These functions now take arguments (email, password, etc.)\n// that are passed up from the component forms.\nconst signIn=async(email,password)=>{setIsLoading(true);try{const userCredential=await signInWithEmailAndPassword(auth,email,password);const user=userCredential.user;const userDocRef=doc(db,\"users\",user.uid);const userDoc=await getDoc(userDocRef);const soccerDocRef=doc(db,\"users\",user.uid,\"sportsDetails\",\"soccer\");const soccerDoc=await getDoc(soccerDocRef);if(soccerDoc.exists()){setSoccerDetails(soccerDoc.data());}else{setSoccerDetails(null);}if(userDoc.exists()){setLoggedInUser(userDoc.data());}else{alert(\"Authentication successful, but no profile was found.\");setLoggedInUser(null);}}catch(error){console.error(\"Error signing in:\",error);alert(\"Error: \"+error.message);}setIsLoading(false);};const signUp=async formData=>{if(formData.password.length<6){alert(\"Password must be at least 6 characters long.\");return;}try{const userCredential=await createUserWithEmailAndPassword(auth,formData.email,formData.password);const user=userCredential.user;const userProfileData={uid:user.uid,playerName:formData.playerName,email:formData.email,phone:formData.phone,address:formData.address,notificationPreference:formData.notificationPreference,comments:formData.comments,role:'player'// <--- NEW WAY: Default role\n};await setDoc(doc(db,\"users\",user.uid),userProfileData);setLoggedInUser(userProfileData);// No need to clear forms here, the component will do that.\n}catch(error){console.error(\"Error signing up:\",error);alert(\"Error: \"+error.message);}};const signOutUser=async()=>{try{await signOut(auth);setLoggedInUser(null);setSoccerDetails(null);}catch(error){console.error(\"Error signing out:\",error);alert(\"Error: \"+error.message);}};const updateProfile=async profileData=>{if(!loggedInUser)return;// 1. Handle Email Update (if necessary)\nif(profileData.email!==loggedInUser.email){try{await updateEmail(auth.currentUser,profileData.email);}catch(error){if(error.code==='auth/requires-recent-login'){setNeedsReauth(true);// Open the modal\n}else{alert(\"Error: \"+error.message);}return;// Stop the function\n}}// 2. Handle Firestore Document Update\ntry{const dataToUpdate={playerName:profileData.playerName,phone:profileData.phone,address:profileData.address,notificationPreference:profileData.notificationPreference,comments:profileData.comments,email:profileData.email};const userDocRef=doc(db,\"users\",loggedInUser.uid);await updateDoc(userDocRef,dataToUpdate);// 3. Update local state\nsetLoggedInUser(prevUser=>_objectSpread(_objectSpread({},prevUser),dataToUpdate));alert(\"Profile successfully updated!\");return true;// Signal to the component that it can close the form\n}catch(error){alert(\"Error saving profile: \"+error.message);return false;}};const reauthenticate=async(password,newEmail)=>{if(!auth.currentUser||!password)return;try{const credential=EmailAuthProvider.credential(auth.currentUser.email,password);await reauthenticateWithCredential(auth.currentUser,credential);// Retry the email update\nawait updateEmail(auth.currentUser,newEmail);// Update Firestore\nconst userDocRef=doc(db,\"users\",loggedInUser.uid);await updateDoc(userDocRef,{email:newEmail});// Update local state\nsetLoggedInUser(prevUser=>_objectSpread(_objectSpread({},prevUser),{},{email:newEmail}));alert(\"Email successfully updated!\");setNeedsReauth(false);// Close the modal\nreturn true;// Signal success\n}catch(error){alert(\"Error: Incorrect password or another error occurred. \"+error.message);return false;}};const updateSoccerDetails=async soccerData=>{if(!loggedInUser)return;try{const soccerDataToSave=_objectSpread(_objectSpread({},soccerData),{},{currentRosters:soccerData.currentRosters.split(',').map(item=>item.trim()),rosterJerseysOwned:soccerData.rosterJerseysOwned.split(',').map(item=>item.trim()),playerNumber:Number(soccerData.playerNumber)||0});const soccerDocRef=doc(db,\"users\",loggedInUser.uid,\"sportsDetails\",\"soccer\");await setDoc(soccerDocRef,soccerDataToSave);setSoccerDetails(soccerDataToSave);// Update global state\nalert(\"Soccer info saved!\");return true;// Signal success\n}catch(error){alert(\"Error: \"+error.message);return false;}};// --- NEW: Helper function to check roles ---\nconst isManager=()=>{return loggedInUser&&loggedInUser.role==='manager';};// 4. \"Provide\" the state and functions to the app\n// Any component inside <AuthProvider> can now access these values.\nconst value={loggedInUser,soccerDetails,isLoading,needsReauth,setNeedsReauth,signIn,signUp,signOutUser,updateProfile,reauthenticate,updateSoccerDetails,isManager};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","onAuthStateChanged","signInWithEmailAndPassword","createUserWithEmailAndPassword","signOut","updateEmail","EmailAuthProvider","reauthenticateWithCredential","doc","getDoc","setDoc","updateDoc","auth","db","jsx","_jsx","AuthContext","useAuth","AuthProvider","_ref","children","loggedInUser","setLoggedInUser","soccerDetails","setSoccerDetails","isLoading","setIsLoading","needsReauth","setNeedsReauth","unsubscribe","user","userDocRef","uid","userDoc","soccerDocRef","soccerDoc","exists","data","console","error","signIn","email","password","userCredential","alert","message","signUp","formData","length","userProfileData","playerName","phone","address","notificationPreference","comments","role","signOutUser","updateProfile","profileData","currentUser","code","dataToUpdate","prevUser","_objectSpread","reauthenticate","newEmail","credential","updateSoccerDetails","soccerData","soccerDataToSave","currentRosters","split","map","item","trim","rosterJerseysOwned","playerNumber","Number","isManager","value","Provider"],"sources":["/Users/dbroxton/Documents/Projects/soccer-management-app/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport {\n  onAuthStateChanged,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signOut,\n  updateEmail,\n  EmailAuthProvider,\n  reauthenticateWithCredential\n} from \"firebase/auth\";\nimport { doc, getDoc, setDoc, updateDoc } from \"firebase/firestore\";\nimport { auth, db } from \"../firebase\"; // Your firebase.js file\n\n// 1. Create the Context\n// This is the \"channel\" components will listen to.\nconst AuthContext = createContext();\n\n// 2. Create a \"hook\"\n// This is a simple shortcut so components can just call `useAuth()`\n// instead of the more complex `useContext(AuthContext)`.\nexport const useAuth = () => {\n  return useContext(AuthContext);\n};\n\n// 3. Create the \"Provider\"\n// This is the component that does all the work.\n// It will hold all the state and logic.\nexport const AuthProvider = ({ children }) => {\n  // --- All our global state lives here ---\n  const [loggedInUser, setLoggedInUser] = useState(null);\n  const [soccerDetails, setSoccerDetails] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [needsReauth, setNeedsReauth] = useState(false);\n\n  // --- Core Auth Logic (runs on app start) ---\n  useEffect(() => {\n    // onAuthStateChanged is the listener that checks login status\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\n      if (user) {\n        // User is logged in. Fetch their data.\n        const userDocRef = doc(db, \"users\", user.uid);\n        const userDoc = await getDoc(userDocRef);\n        const soccerDocRef = doc(db, \"users\", user.uid, \"sportsDetails\", \"soccer\");\n        const soccerDoc = await getDoc(soccerDocRef);\n\n        if (userDoc.exists()) {\n          setLoggedInUser(userDoc.data());\n        } else {\n          console.error(\"No user profile found!\");\n          setLoggedInUser(null);\n        }\n\n        if (soccerDoc.exists()) {\n          setSoccerDetails(soccerDoc.data());\n        } else {\n          setSoccerDetails(null);\n        }\n      } else {\n        // User is logged out.\n        setLoggedInUser(null);\n        setSoccerDetails(null);\n      }\n      setIsLoading(false);\n    });\n\n    // Cleanup the listener when the app closes\n    return () => unsubscribe();\n  }, []); // Empty array = runs once on mount\n\n  // --- All our functions now live here ---\n  \n  // Note: These functions now take arguments (email, password, etc.)\n  // that are passed up from the component forms.\n\n  const signIn = async (email, password) => {\n    setIsLoading(true);\n    try {\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\n      const user = userCredential.user;\n      \n      const userDocRef = doc(db, \"users\", user.uid);\n      const userDoc = await getDoc(userDocRef);\n      const soccerDocRef = doc(db, \"users\", user.uid, \"sportsDetails\", \"soccer\");\n      const soccerDoc = await getDoc(soccerDocRef);\n\n      if (soccerDoc.exists()) {\n        setSoccerDetails(soccerDoc.data());\n      } else {\n        setSoccerDetails(null);\n      }\n\n      if (userDoc.exists()) {\n        setLoggedInUser(userDoc.data());\n      } else {\n        alert(\"Authentication successful, but no profile was found.\");\n        setLoggedInUser(null);\n      }\n    } catch (error) {\n      console.error(\"Error signing in:\", error);\n      alert(\"Error: \" + error.message);\n    }\n    setIsLoading(false);\n  };\n\n  const signUp = async (formData) => {\n    if (formData.password.length < 6) {\n      alert(\"Password must be at least 6 characters long.\");\n      return;\n    }\n    try {\n      const userCredential = await createUserWithEmailAndPassword(auth, formData.email, formData.password);\n      const user = userCredential.user;\n      \n      const userProfileData = {\n        uid: user.uid,\n        playerName: formData.playerName,\n        email: formData.email,\n        phone: formData.phone,\n        address: formData.address,\n        notificationPreference: formData.notificationPreference,\n        comments: formData.comments,\n        role: 'player' // <--- NEW WAY: Default role\n      };\n      \n      await setDoc(doc(db, \"users\", user.uid), userProfileData);\n      setLoggedInUser(userProfileData);\n      // No need to clear forms here, the component will do that.\n    } catch (error) {\n      console.error(\"Error signing up:\", error);\n      alert(\"Error: \" + error.message);\n    }\n  };\n\n  const signOutUser = async () => {\n    try {\n      await signOut(auth);\n      setLoggedInUser(null);\n      setSoccerDetails(null);\n    } catch (error) {\n      console.error(\"Error signing out:\", error);\n      alert(\"Error: \" + error.message);\n    }\n  };\n\n  const updateProfile = async (profileData) => {\n    if (!loggedInUser) return;\n\n    // 1. Handle Email Update (if necessary)\n    if (profileData.email !== loggedInUser.email) {\n      try {\n        await updateEmail(auth.currentUser, profileData.email);\n      } catch (error) {\n        if (error.code === 'auth/requires-recent-login') {\n          setNeedsReauth(true); // Open the modal\n        } else {\n          alert(\"Error: \" + error.message);\n        }\n        return; // Stop the function\n      }\n    }\n\n    // 2. Handle Firestore Document Update\n    try {\n      const dataToUpdate = {\n        playerName: profileData.playerName,\n        phone: profileData.phone,\n        address: profileData.address,\n        notificationPreference: profileData.notificationPreference,\n        comments: profileData.comments,\n        email: profileData.email\n      };\n      \n      const userDocRef = doc(db, \"users\", loggedInUser.uid);\n      await updateDoc(userDocRef, dataToUpdate);\n      \n      // 3. Update local state\n      setLoggedInUser(prevUser => ({\n        ...prevUser,\n        ...dataToUpdate\n      }));\n      \n      alert(\"Profile successfully updated!\");\n      return true; // Signal to the component that it can close the form\n      \n    } catch (error) {\n      alert(\"Error saving profile: \" + error.message);\n      return false;\n    }\n  };\n\n  const reauthenticate = async (password, newEmail) => {\n    if (!auth.currentUser || !password) return;\n    try {\n      const credential = EmailAuthProvider.credential(auth.currentUser.email, password);\n      await reauthenticateWithCredential(auth.currentUser, credential);\n      \n      // Retry the email update\n      await updateEmail(auth.currentUser, newEmail);\n      \n      // Update Firestore\n      const userDocRef = doc(db, \"users\", loggedInUser.uid);\n      await updateDoc(userDocRef, { email: newEmail });\n\n      // Update local state\n      setLoggedInUser(prevUser => ({\n        ...prevUser,\n        email: newEmail\n      }));\n\n      alert(\"Email successfully updated!\");\n      setNeedsReauth(false); // Close the modal\n      return true; // Signal success\n\n    } catch (error) {\n      alert(\"Error: Incorrect password or another error occurred. \" + error.message);\n      return false;\n    }\n  };\n\n  const updateSoccerDetails = async (soccerData) => {\n    if (!loggedInUser) return;\n    try {\n      const soccerDataToSave = {\n        ...soccerData,\n        currentRosters: soccerData.currentRosters.split(',').map(item => item.trim()),\n        rosterJerseysOwned: soccerData.rosterJerseysOwned.split(',').map(item => item.trim()),\n        playerNumber: Number(soccerData.playerNumber) || 0,\n      };\n      \n      const soccerDocRef = doc(db, \"users\", loggedInUser.uid, \"sportsDetails\", \"soccer\");\n      await setDoc(soccerDocRef, soccerDataToSave);\n      \n      setSoccerDetails(soccerDataToSave); // Update global state\n      alert(\"Soccer info saved!\");\n      return true; // Signal success\n\n    } catch (error) {\n      alert(\"Error: \" + error.message);\n      return false;\n    }\n  };\n\n    // --- NEW: Helper function to check roles ---\n  const isManager = () => {\n    return loggedInUser && loggedInUser.role === 'manager';\n  };\n\n  // 4. \"Provide\" the state and functions to the app\n  // Any component inside <AuthProvider> can now access these values.\n  const value = {\n    loggedInUser,\n    soccerDetails,\n    isLoading,\n    needsReauth,\n    setNeedsReauth,\n    signIn,\n    signUp,\n    signOutUser,\n    updateProfile,\n    reauthenticate,\n    updateSoccerDetails,\n    isManager\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {/* We render children so the rest of the app appears */}\n      {children}\n    </AuthContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}