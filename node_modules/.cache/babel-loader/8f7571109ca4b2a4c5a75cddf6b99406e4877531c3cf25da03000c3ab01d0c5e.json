{"ast":null,"code":"var _jsxFileName = \"/Users/dbroxton/Documents/Projects/soccer-management-app/src/components/chat/MessageList.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useLayoutEffect } from 'react';\nimport { COLORS } from '../../constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MessageList = ({\n  messages,\n  loggedInUser,\n  onImageClick,\n  selectedChatId\n}) => {\n  _s();\n  const messagesEndRef = useRef(null);\n  const containerRef = useRef(null);\n  const lastChatIdRef = useRef(null);\n\n  // --- INSTANT SCROLL LOGIC ---\n  // We moved this from TeamChat.js to here. \n  // It now reacts specifically to changes in the 'messages' prop.\n  useLayoutEffect(() => {\n    if (containerRef.current) {\n      const isNewChat = lastChatIdRef.current !== selectedChatId;\n      if (isNewChat) {\n        // Instant jump for new chat\n        containerRef.current.scrollTop = containerRef.current.scrollHeight;\n      } else if (messagesEndRef.current) {\n        // Smooth scroll for new message in same chat\n        messagesEndRef.current.scrollIntoView({\n          behavior: \"smooth\"\n        });\n      }\n\n      // Update ref tracking\n      if (messages.length > 0) {\n        lastChatIdRef.current = selectedChatId;\n      }\n    }\n  }, [messages, selectedChatId]);\n  const handleImageLoad = () => {\n    if (containerRef.current) {\n      const {\n        scrollTop,\n        scrollHeight,\n        clientHeight\n      } = containerRef.current;\n      const isNearBottom = scrollHeight - scrollTop - clientHeight < 500;\n      if (isNearBottom) {\n        containerRef.current.scrollTop = containerRef.current.scrollHeight;\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: containerRef,\n    style: {\n      flex: 1,\n      padding: '20px',\n      overflowY: 'auto',\n      display: 'flex',\n      flexDirection: 'column',\n      gap: '10px',\n      boxSizing: 'border-box'\n    },\n    children: [messages.map(msg => {\n      const isMe = msg.senderId === loggedInUser.uid;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          alignSelf: isMe ? 'flex-end' : 'flex-start',\n          maxWidth: '70%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '10px',\n            color: '#888',\n            marginBottom: '2px',\n            textAlign: isMe ? 'right' : 'left'\n          },\n          children: isMe ? 'Me' : msg.senderName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: isMe ? '#0078d4' : '#3a3f4a',\n            color: 'white',\n            padding: '10px 15px',\n            borderRadius: '15px',\n            borderTopRightRadius: isMe ? '2px' : '15px',\n            borderTopLeftRadius: isMe ? '15px' : '2px'\n          },\n          children: [msg.imageUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: msg.imageUrl,\n            alt: \"Attachment\",\n            onLoad: handleImageLoad,\n            onClick: () => onImageClick(msg.imageUrl),\n            style: {\n              maxWidth: '100%',\n              maxHeight: '200px',\n              borderRadius: '10px',\n              marginBottom: msg.text ? '10px' : '0',\n              cursor: 'pointer'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }, this), msg.text && /*#__PURE__*/_jsxDEV(\"span\", {\n            children: msg.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 28\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this)]\n      }, msg.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: messagesEndRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(MessageList, \"1/M4TZb81UcnxcFwI0NyOqdfP6U=\");\n_c = MessageList;\nexport default MessageList;\nvar _c;\n$RefreshReg$(_c, \"MessageList\");","map":{"version":3,"names":["React","useRef","useLayoutEffect","COLORS","jsxDEV","_jsxDEV","MessageList","messages","loggedInUser","onImageClick","selectedChatId","_s","messagesEndRef","containerRef","lastChatIdRef","current","isNewChat","scrollTop","scrollHeight","scrollIntoView","behavior","length","handleImageLoad","clientHeight","isNearBottom","ref","style","flex","padding","overflowY","display","flexDirection","gap","boxSizing","children","map","msg","isMe","senderId","uid","alignSelf","maxWidth","fontSize","color","marginBottom","textAlign","senderName","fileName","_jsxFileName","lineNumber","columnNumber","backgroundColor","borderRadius","borderTopRightRadius","borderTopLeftRadius","imageUrl","src","alt","onLoad","onClick","maxHeight","text","cursor","id","_c","$RefreshReg$"],"sources":["/Users/dbroxton/Documents/Projects/soccer-management-app/src/components/chat/MessageList.js"],"sourcesContent":["import React, { useRef, useLayoutEffect } from 'react';\nimport { COLORS } from '../../constants';\n\nconst MessageList = ({ messages, loggedInUser, onImageClick, selectedChatId }) => {\n  const messagesEndRef = useRef(null);\n  const containerRef = useRef(null);\n  const lastChatIdRef = useRef(null);\n\n  // --- INSTANT SCROLL LOGIC ---\n  // We moved this from TeamChat.js to here. \n  // It now reacts specifically to changes in the 'messages' prop.\n  useLayoutEffect(() => {\n    if (containerRef.current) {\n      const isNewChat = lastChatIdRef.current !== selectedChatId;\n      \n      if (isNewChat) {\n        // Instant jump for new chat\n        containerRef.current.scrollTop = containerRef.current.scrollHeight;\n      } else if (messagesEndRef.current) {\n        // Smooth scroll for new message in same chat\n        messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n      }\n\n      // Update ref tracking\n      if (messages.length > 0) {\n        lastChatIdRef.current = selectedChatId;\n      }\n    }\n  }, [messages, selectedChatId]);\n\n  const handleImageLoad = () => {\n    if (containerRef.current) {\n       const { scrollTop, scrollHeight, clientHeight } = containerRef.current;\n       const isNearBottom = scrollHeight - scrollTop - clientHeight < 500;\n       if (isNearBottom) {\n         containerRef.current.scrollTop = containerRef.current.scrollHeight;\n       }\n    }\n  };\n\n  return (\n    <div \n      ref={containerRef} \n      style={{ \n        flex: 1, \n        padding: '20px', \n        overflowY: 'auto', \n        display: 'flex', \n        flexDirection: 'column', \n        gap: '10px', \n        boxSizing: 'border-box' \n      }}\n    >\n      {messages.map(msg => {\n        const isMe = msg.senderId === loggedInUser.uid;\n        return (\n          <div key={msg.id} style={{\n            alignSelf: isMe ? 'flex-end' : 'flex-start',\n            maxWidth: '70%',\n          }}>\n            <div style={{ fontSize: '10px', color: '#888', marginBottom: '2px', textAlign: isMe ? 'right' : 'left' }}>\n              {isMe ? 'Me' : msg.senderName}\n            </div>\n            <div style={{\n              backgroundColor: isMe ? '#0078d4' : '#3a3f4a',\n              color: 'white',\n              padding: '10px 15px',\n              borderRadius: '15px',\n              borderTopRightRadius: isMe ? '2px' : '15px',\n              borderTopLeftRadius: isMe ? '15px' : '2px'\n            }}>\n              {msg.imageUrl && (\n                <img \n                  src={msg.imageUrl} \n                  alt=\"Attachment\" \n                  onLoad={handleImageLoad} \n                  onClick={() => onImageClick(msg.imageUrl)}\n                  style={{ maxWidth: '100%', maxHeight: '200px', borderRadius: '10px', marginBottom: msg.text ? '10px' : '0', cursor: 'pointer' }}\n                />\n              )}\n              {msg.text && <span>{msg.text}</span>}\n            </div>\n          </div>\n        );\n      })}\n      <div ref={messagesEndRef} />\n    </div>\n  );\n};\n\nexport default MessageList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}