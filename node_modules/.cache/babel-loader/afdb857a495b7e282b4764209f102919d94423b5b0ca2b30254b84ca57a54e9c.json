{"ast":null,"code":"import _objectSpread from\"/Users/dbroxton/Documents/Projects/soccer-management-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{useAuth}from'../context/AuthContext';import{useChat}from'../context/ChatContext';// NEW\nimport{collection,query,orderBy,onSnapshot,limit,getDocs}from\"firebase/firestore\";import{db}from\"../firebase\";import UserSearch from'./UserSearch';import{COLORS,MOBILE_BREAKPOINT}from'../constants';// Components\nimport ChatList from'./chat/ChatList';import ImageViewer from'./chat/ImageViewer';import ChatHeader from'./chat/ChatHeader';import MessageList from'./chat/MessageList';import MessageInput from'./chat/MessageInput';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function TeamChat(){const{uploadImage,loggedInUser}=useAuth();const{sendMessage,createChat,hideChat,renameChat,myChats,markChatAsRead}=useChat();const[selectedChat,setSelectedChat]=useState(null);const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState(\"\");const[selectedFile,setSelectedFile]=useState(null);const fileInputRef=useRef(null);const[isCreatingChat,setIsCreatingChat]=useState(true);const[selectedEmails,setSelectedEmails]=useState([]);const[newChatName,setNewChatName]=useState(\"\");const[viewingImage,setViewingImage]=useState(null);const[activeHeaderMenu,setActiveHeaderMenu]=useState(false);const[userProfiles,setUserProfiles]=useState({});const[isCollapsed,setIsCollapsed]=useState(window.innerWidth<MOBILE_BREAKPOINT);const selectedChatRef=useRef(selectedChat);useEffect(()=>{selectedChatRef.current=selectedChat;},[selectedChat]);useEffect(()=>{const handleResize=()=>{setIsCollapsed(window.innerWidth<MOBILE_BREAKPOINT);};window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);// Fetch Live Profiles\nuseEffect(()=>{const usersRef=collection(db,\"users\");const unsubscribe=onSnapshot(usersRef,snapshot=>{const profiles={};snapshot.docs.forEach(doc=>{profiles[doc.id]=doc.data();});setUserProfiles(profiles);});return()=>unsubscribe();},[]);// Listen for Messages\nuseEffect(()=>{if(!selectedChat||isCreatingChat){setMessages([]);return;}markChatAsRead(selectedChat.id);const messagesRef=collection(db,\"chats\",selectedChat.id,\"messages\");const q=query(messagesRef,orderBy(\"createdAt\",\"asc\"),limit(50));const unsubscribe=onSnapshot(q,snapshot=>{const msgs=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setMessages(msgs);markChatAsRead(selectedChat.id);});return()=>unsubscribe();},[selectedChat,isCreatingChat]);const handleFileChange=e=>{if(e.target.files[0]){setSelectedFile(e.target.files[0]);}if(fileInputRef.current){fileInputRef.current.value=\"\";}};const startNewChat=()=>{setIsCreatingChat(true);setSelectedChat(null);setNewChatName(\"\");setSelectedEmails([]);setNewMessage(\"\");setSelectedFile(null);};const handleSelectChat=chat=>{setSelectedChat(chat);setIsCreatingChat(false);};const handleRenameGroup=async()=>{if(!selectedChat)return;const newName=window.prompt(\"Enter new group name:\",selectedChat.name);if(newName&&newName.trim()!==\"\"){await renameChat(selectedChat.id,newName.trim());}setActiveHeaderMenu(false);};const handleSend=async e=>{e.preventDefault();if(isCreatingChat){if(selectedEmails.length===0){alert(\"Please add at least one person to the chat.\");return;}if(!newMessage.trim()&&!selectedFile){alert(\"Please enter a message or attach a file.\");return;}const chatResult=await createChat(selectedEmails,newChatName);if(chatResult&&chatResult.id){const newChatId=chatResult.id;const participants=chatResult.participants;const text=newMessage;const fileToUpload=selectedFile;const resolvedChatName=chatResult.name||newChatName||\"New Chat\";setNewMessage(\"\");setSelectedFile(null);let imageUrl=null;if(fileToUpload){imageUrl=await uploadImage(fileToUpload,\"chat_images/\".concat(newChatId));}await sendMessage(newChatId,text,participants,imageUrl);// Optimistic selection\nconst optimisticChat={id:newChatId,name:resolvedChatName,type:selectedEmails.length>0?'group':'dm',participants:participants,participantDetails:chatResult.participantDetails||[]};setSelectedChat(optimisticChat);setIsCreatingChat(false);setNewChatName(\"\");setSelectedEmails([]);}}else{if(!newMessage.trim()&&!selectedFile||!selectedChat)return;const text=newMessage;const fileToUpload=selectedFile;setNewMessage(\"\");setSelectedFile(null);let imageUrl=null;try{if(fileToUpload){imageUrl=await uploadImage(fileToUpload,\"chat_images/\".concat(selectedChat.id));}await sendMessage(selectedChat.id,text,selectedChat.participants,imageUrl);}catch(error){console.error(\"Error sending message/image:\",error);alert(\"Failed to send message.\");}}};const handleDeleteChat=async chat=>{if(chat.type==='roster'){alert(\"Team Roster chats cannot be deleted.\");return;}if(window.confirm(\"Are you sure you want to delete this chat? This action cannot be undone.\")){await hideChat(chat.id,chat.visibleTo,chat.type);if(selectedChat&&selectedChat.id===chat.id){setSelectedChat(null);}}};const canSend=isCreatingChat?selectedEmails.length>0&&(newMessage.trim().length>0||selectedFile):true;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',height:'100%',width:'100%',maxWidth:'1000px',margin:'0 auto',backgroundColor:COLORS.background,border:isCollapsed?'none':\"1px solid \".concat(COLORS.border),borderRadius:isCollapsed?'0':'8px',overflow:'hidden',boxSizing:'border-box'},children:[/*#__PURE__*/_jsx(ChatList,{myChats:myChats,selectedChat:selectedChat,isCreatingChat:isCreatingChat,onSelectChat:handleSelectChat,onStartNewChat:startNewChat,onDeleteChat:handleDeleteChat,isCollapsed:isCollapsed,userProfiles:userProfiles}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,display:'flex',flexDirection:'column',backgroundColor:COLORS.sidebar,minWidth:0,boxSizing:'border-box'},children:[isCreatingChat&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',borderBottom:\"1px solid \".concat(COLORS.border),backgroundColor:COLORS.background,boxSizing:'border-box'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 15px 0',color:'white'},children:\"New Message\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'5px'},children:/*#__PURE__*/_jsx(UserSearch,{onSelectionChange:setSelectedEmails})})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,display:'flex',alignItems:'center',justifyContent:'center',color:'#444',fontStyle:'italic'},children:\"Select people to start a new conversation.\"})]}),!isCreatingChat&&selectedChat&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ChatHeader,{selectedChat:selectedChat,userProfiles:userProfiles,loggedInUser:loggedInUser,activeHeaderMenu:activeHeaderMenu,setActiveHeaderMenu:setActiveHeaderMenu,onRenameGroup:handleRenameGroup,onDeleteChat:handleDeleteChat}),/*#__PURE__*/_jsx(MessageList,{messages:messages,loggedInUser:loggedInUser,onImageClick:setViewingImage,selectedChatId:selectedChat.id})]}),!isCreatingChat&&!selectedChat&&/*#__PURE__*/_jsx(\"div\",{style:{flex:1,display:'flex',justifyContent:'center',alignItems:'center',color:'#888'},children:\"Select a conversation or start a new one.\"}),(isCreatingChat||selectedChat)&&/*#__PURE__*/_jsx(MessageInput,{messageText:newMessage,onMessageChange:setNewMessage,onSend:handleSend,selectedFile:selectedFile,onFileChange:handleFileChange,onRemoveFile:()=>setSelectedFile(null),fileInputRef:fileInputRef,isCollapsed:isCollapsed,canSend:canSend})]}),/*#__PURE__*/_jsx(ImageViewer,{imageUrl:viewingImage,onClose:()=>setViewingImage(null)})]});}export default TeamChat;","map":{"version":3,"names":["React","useState","useEffect","useRef","useAuth","useChat","collection","query","orderBy","onSnapshot","limit","getDocs","db","UserSearch","COLORS","MOBILE_BREAKPOINT","ChatList","ImageViewer","ChatHeader","MessageList","MessageInput","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TeamChat","uploadImage","loggedInUser","sendMessage","createChat","hideChat","renameChat","myChats","markChatAsRead","selectedChat","setSelectedChat","messages","setMessages","newMessage","setNewMessage","selectedFile","setSelectedFile","fileInputRef","isCreatingChat","setIsCreatingChat","selectedEmails","setSelectedEmails","newChatName","setNewChatName","viewingImage","setViewingImage","activeHeaderMenu","setActiveHeaderMenu","userProfiles","setUserProfiles","isCollapsed","setIsCollapsed","window","innerWidth","selectedChatRef","current","handleResize","addEventListener","removeEventListener","usersRef","unsubscribe","snapshot","profiles","docs","forEach","doc","id","data","messagesRef","q","msgs","map","_objectSpread","handleFileChange","e","target","files","value","startNewChat","handleSelectChat","chat","handleRenameGroup","newName","prompt","name","trim","handleSend","preventDefault","length","alert","chatResult","newChatId","participants","text","fileToUpload","resolvedChatName","imageUrl","concat","optimisticChat","type","participantDetails","error","console","handleDeleteChat","confirm","visibleTo","canSend","style","display","height","width","maxWidth","margin","backgroundColor","background","border","borderRadius","overflow","boxSizing","children","onSelectChat","onStartNewChat","onDeleteChat","flex","flexDirection","sidebar","minWidth","padding","borderBottom","color","marginBottom","onSelectionChange","alignItems","justifyContent","fontStyle","onRenameGroup","onImageClick","selectedChatId","messageText","onMessageChange","onSend","onFileChange","onRemoveFile","onClose"],"sources":["/Users/dbroxton/Documents/Projects/soccer-management-app/src/components/TeamChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useChat } from '../context/ChatContext'; // NEW\nimport { collection, query, orderBy, onSnapshot, limit, getDocs } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport UserSearch from './UserSearch';\nimport { COLORS, MOBILE_BREAKPOINT } from '../constants';\n\n// Components\nimport ChatList from './chat/ChatList';\nimport ImageViewer from './chat/ImageViewer';\nimport ChatHeader from './chat/ChatHeader';\nimport MessageList from './chat/MessageList';\nimport MessageInput from './chat/MessageInput';\n\nfunction TeamChat() {\n  const { uploadImage, loggedInUser } = useAuth();\n  const { sendMessage, createChat, hideChat, renameChat, myChats, markChatAsRead } = useChat();\n  \n  const [selectedChat, setSelectedChat] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  \n  const [selectedFile, setSelectedFile] = useState(null);\n  const fileInputRef = useRef(null); \n  \n  const [isCreatingChat, setIsCreatingChat] = useState(true);\n  const [selectedEmails, setSelectedEmails] = useState([]); \n  const [newChatName, setNewChatName] = useState(\"\");\n\n  const [viewingImage, setViewingImage] = useState(null);\n  const [activeHeaderMenu, setActiveHeaderMenu] = useState(false);\n  const [userProfiles, setUserProfiles] = useState({});\n  const [isCollapsed, setIsCollapsed] = useState(window.innerWidth < MOBILE_BREAKPOINT);\n\n  const selectedChatRef = useRef(selectedChat);\n  useEffect(() => {\n    selectedChatRef.current = selectedChat;\n  }, [selectedChat]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsCollapsed(window.innerWidth < MOBILE_BREAKPOINT);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Fetch Live Profiles\n  useEffect(() => {\n    const usersRef = collection(db, \"users\");\n    const unsubscribe = onSnapshot(usersRef, (snapshot) => {\n      const profiles = {};\n      snapshot.docs.forEach(doc => {\n        profiles[doc.id] = doc.data();\n      });\n      setUserProfiles(profiles);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  // Listen for Messages\n  useEffect(() => {\n    if (!selectedChat || isCreatingChat) {\n        setMessages([]); \n        return;\n    }\n\n    markChatAsRead(selectedChat.id);\n\n    const messagesRef = collection(db, \"chats\", selectedChat.id, \"messages\");\n    const q = query(messagesRef, orderBy(\"createdAt\", \"asc\"), limit(50));\n\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const msgs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setMessages(msgs);\n      markChatAsRead(selectedChat.id);\n    });\n\n    return () => unsubscribe();\n  }, [selectedChat, isCreatingChat]);\n\n  const handleFileChange = (e) => {\n    if (e.target.files[0]) {\n      setSelectedFile(e.target.files[0]);\n    }\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n\n  const startNewChat = () => {\n      setIsCreatingChat(true);\n      setSelectedChat(null);\n      setNewChatName(\"\");\n      setSelectedEmails([]);\n      setNewMessage(\"\");\n      setSelectedFile(null);\n  };\n\n  const handleSelectChat = (chat) => {\n    setSelectedChat(chat);\n    setIsCreatingChat(false);\n  };\n\n  const handleRenameGroup = async () => {\n    if (!selectedChat) return;\n    const newName = window.prompt(\"Enter new group name:\", selectedChat.name);\n    if (newName && newName.trim() !== \"\") {\n      await renameChat(selectedChat.id, newName.trim());\n    }\n    setActiveHeaderMenu(false);\n  };\n\n  const handleSend = async (e) => {\n    e.preventDefault();\n\n    if (isCreatingChat) {\n        if (selectedEmails.length === 0) {\n            alert(\"Please add at least one person to the chat.\");\n            return;\n        }\n        if (!newMessage.trim() && !selectedFile) {\n            alert(\"Please enter a message or attach a file.\");\n            return;\n        }\n\n        const chatResult = await createChat(selectedEmails, newChatName);\n        \n        if (chatResult && chatResult.id) {\n             const newChatId = chatResult.id;\n             const participants = chatResult.participants;\n             const text = newMessage;\n             const fileToUpload = selectedFile;\n             const resolvedChatName = chatResult.name || newChatName || \"New Chat\";\n\n             setNewMessage(\"\"); \n             setSelectedFile(null); \n             \n             let imageUrl = null;\n             if (fileToUpload) {\n                 imageUrl = await uploadImage(fileToUpload, `chat_images/${newChatId}`);\n             }\n             \n             await sendMessage(newChatId, text, participants, imageUrl);\n\n             // Optimistic selection\n             const optimisticChat = {\n                 id: newChatId,\n                 name: resolvedChatName,\n                 type: selectedEmails.length > 0 ? 'group' : 'dm',\n                 participants: participants,\n                 participantDetails: chatResult.participantDetails || [] \n             };\n\n             setSelectedChat(optimisticChat);\n             setIsCreatingChat(false);\n             setNewChatName(\"\");\n             setSelectedEmails([]);\n        }\n\n    } else {\n        if ((!newMessage.trim() && !selectedFile) || !selectedChat) return;\n        const text = newMessage;\n        const fileToUpload = selectedFile;\n        setNewMessage(\"\"); \n        setSelectedFile(null); \n        let imageUrl = null;\n        try {\n            if (fileToUpload) {\n                imageUrl = await uploadImage(fileToUpload, `chat_images/${selectedChat.id}`);\n            }\n            await sendMessage(selectedChat.id, text, selectedChat.participants, imageUrl);\n        } catch (error) {\n            console.error(\"Error sending message/image:\", error);\n            alert(\"Failed to send message.\");\n        }\n    }\n  };\n\n  const handleDeleteChat = async (chat) => {\n    if (chat.type === 'roster') {\n      alert(\"Team Roster chats cannot be deleted.\");\n      return;\n    }\n    if (window.confirm(\"Are you sure you want to delete this chat? This action cannot be undone.\")) {\n        await hideChat(chat.id, chat.visibleTo, chat.type);\n        if (selectedChat && selectedChat.id === chat.id) {\n            setSelectedChat(null);\n        }\n    }\n  };\n\n  const canSend = isCreatingChat \n    ? (selectedEmails.length > 0 && (newMessage.trim().length > 0 || selectedFile)) \n    : true; \n\n  return (\n    <div style={{ \n      display: 'flex', height: '100%', width: '100%', maxWidth: '1000px', \n      margin: '0 auto', backgroundColor: COLORS.background, \n      border: isCollapsed ? 'none' : `1px solid ${COLORS.border}`, \n      borderRadius: isCollapsed ? '0' : '8px', overflow: 'hidden', boxSizing: 'border-box'\n    }}>\n      \n      {/* LEFT: Chat List */}\n      <ChatList \n        myChats={myChats}\n        selectedChat={selectedChat}\n        isCreatingChat={isCreatingChat}\n        onSelectChat={handleSelectChat}\n        onStartNewChat={startNewChat}\n        onDeleteChat={handleDeleteChat}\n        isCollapsed={isCollapsed}\n        userProfiles={userProfiles}\n      />\n\n      {/* RIGHT: Chat Window & Input */}\n      <div style={{ flex: 1, display: 'flex', flexDirection: 'column', backgroundColor: COLORS.sidebar, minWidth: 0, boxSizing: 'border-box' }}>\n        \n        {isCreatingChat && (\n            <>\n                <div style={{ padding: '20px', borderBottom: `1px solid ${COLORS.border}`, backgroundColor: COLORS.background, boxSizing: 'border-box' }}>\n                    <h3 style={{ margin: '0 0 15px 0', color: 'white' }}>New Message</h3>\n                    <div style={{ marginBottom: '5px' }}>\n                         <UserSearch onSelectionChange={setSelectedEmails} />\n                    </div>\n                </div>\n                <div style={{ flex: 1, display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#444', fontStyle: 'italic' }}>\n                    Select people to start a new conversation.\n                </div>\n            </>\n        )}\n\n        {!isCreatingChat && selectedChat && (\n          <>\n            <ChatHeader \n              selectedChat={selectedChat}\n              userProfiles={userProfiles}\n              loggedInUser={loggedInUser}\n              activeHeaderMenu={activeHeaderMenu}\n              setActiveHeaderMenu={setActiveHeaderMenu}\n              onRenameGroup={handleRenameGroup}\n              onDeleteChat={handleDeleteChat}\n            />\n\n            <MessageList \n              messages={messages}\n              loggedInUser={loggedInUser}\n              onImageClick={setViewingImage}\n              selectedChatId={selectedChat.id}\n            />\n          </>\n        )}\n\n        {!isCreatingChat && !selectedChat && (\n             <div style={{ flex: 1, display: 'flex', justifyContent: 'center', alignItems: 'center', color: '#888' }}>\n                Select a conversation or start a new one.\n             </div>\n        )}\n\n        {(isCreatingChat || selectedChat) && (\n            <MessageInput \n              messageText={newMessage}\n              onMessageChange={setNewMessage}\n              onSend={handleSend}\n              selectedFile={selectedFile}\n              onFileChange={handleFileChange}\n              onRemoveFile={() => setSelectedFile(null)}\n              fileInputRef={fileInputRef}\n              isCollapsed={isCollapsed}\n              canSend={canSend}\n            />\n        )}\n      </div>\n\n      <ImageViewer imageUrl={viewingImage} onClose={() => setViewingImage(null)} />\n\n    </div>\n  );\n}\n\nexport default TeamChat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}