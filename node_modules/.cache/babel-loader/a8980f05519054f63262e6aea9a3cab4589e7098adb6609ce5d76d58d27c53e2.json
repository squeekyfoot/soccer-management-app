{"ast":null,"code":"import _objectSpread from\"/Users/dbroxton/Documents/Projects/soccer-management-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{useAuth}from'../context/AuthContext';import{collection,query,orderBy,onSnapshot,limit,where,getDocs}from\"firebase/firestore\";import{db}from\"../firebase\";import UserSearch from'./UserSearch';import{SquarePen}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function TeamChat(){var _selectedChat$partici;const{sendMessage,createChat,hideChat,uploadImage,loggedInUser}=useAuth();const[myChats,setMyChats]=useState([]);const[selectedChat,setSelectedChat]=useState(null);const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState(\"\");const[selectedFile,setSelectedFile]=useState(null);const fileInputRef=useRef(null);const[isCreatingChat,setIsCreatingChat]=useState(false);const[selectedEmails,setSelectedEmails]=useState([]);const[newChatName,setNewChatName]=useState(\"\");const[viewingImage,setViewingImage]=useState(null);const[activeChatMenu,setActiveChatMenu]=useState(null);const messagesEndRef=useRef(null);useEffect(()=>{if(!loggedInUser)return;const chatsRef=collection(db,\"chats\");const q=query(chatsRef,where(\"visibleTo\",\"array-contains\",loggedInUser.uid),orderBy(\"lastMessageTime\",\"desc\"));const unsubscribe=onSnapshot(q,snapshot=>{const chats=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setMyChats(chats);if(selectedChat){const stillExists=chats.find(c=>c.id===selectedChat.id);if(!stillExists){setSelectedChat(null);}}},error=>{console.error(\"Error listening to chat list:\",error);});return()=>unsubscribe();},[loggedInUser,selectedChat]);useEffect(()=>{if(!selectedChat||isCreatingChat){setMessages([]);return;}const messagesRef=collection(db,\"chats\",selectedChat.id,\"messages\");const q=query(messagesRef,orderBy(\"createdAt\",\"asc\"),limit(50));const unsubscribe=onSnapshot(q,snapshot=>{const msgs=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setMessages(msgs);scrollToBottom();});return()=>unsubscribe();},[selectedChat,isCreatingChat]);const scrollToBottom=()=>{setTimeout(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});},100);};const handleFileChange=e=>{if(e.target.files[0]){setSelectedFile(e.target.files[0]);}};const startNewChat=()=>{setIsCreatingChat(true);setSelectedChat(null);setNewChatName(\"\");setSelectedEmails([]);setNewMessage(\"\");setSelectedFile(null);};const handleSend=async e=>{e.preventDefault();if(isCreatingChat){if(selectedEmails.length===0){alert(\"Please add at least one person to the chat.\");return;}if(!newMessage.trim()&&!selectedFile){alert(\"Please enter a message or attach a file.\");return;}// NEW: Expecting { id, participants } from createChat\nconst chatResult=await createChat(selectedEmails,newChatName);if(chatResult&&chatResult.id){const newChatId=chatResult.id;const participants=chatResult.participants;const text=newMessage;const fileToUpload=selectedFile;setNewMessage(\"\");setSelectedFile(null);let imageUrl=null;if(fileToUpload){imageUrl=await uploadImage(fileToUpload,\"chat_images/\".concat(newChatId));}// NEW: Pass correct participants list to sendMessage\nawait sendMessage(newChatId,text,participants,imageUrl);const optimisticChat={id:newChatId,name:newChatName||\"New Chat\",lastMessage:text||\"Sent an image\",type:selectedEmails.length>1?'group':'dm',participantDetails:[]};const optimisticMessage={id:'temp-id-'+Date.now(),text:text,imageUrl:imageUrl,senderId:loggedInUser.uid,senderName:loggedInUser.playerName,createdAt:{toDate:()=>new Date()}};setMyChats(prev=>[optimisticChat,...prev]);setSelectedChat(optimisticChat);setMessages([optimisticMessage]);setIsCreatingChat(false);setNewChatName(\"\");setSelectedEmails([]);}}else{if(!newMessage.trim()&&!selectedFile||!selectedChat)return;const text=newMessage;const fileToUpload=selectedFile;setNewMessage(\"\");setSelectedFile(null);let imageUrl=null;try{if(fileToUpload){imageUrl=await uploadImage(fileToUpload,\"chat_images/\".concat(selectedChat.id));}await sendMessage(selectedChat.id,text,selectedChat.participants,imageUrl);}catch(error){console.error(\"Error sending message/image:\",error);alert(\"Failed to send message.\");}}};const handleDeleteChat=async chat=>{if(chat.type==='roster'){alert(\"Team Roster chats cannot be deleted.\");setActiveChatMenu(null);return;}if(window.confirm(\"Are you sure you want to delete this chat? This action cannot be undone.\")){await hideChat(chat.id,chat.visibleTo,chat.type);if(selectedChat&&selectedChat.id===chat.id){setSelectedChat(null);}}setActiveChatMenu(null);};const canSendNewChat=isCreatingChat?selectedEmails.length>0&&(newMessage.trim().length>0||selectedFile):true;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',height:'calc(100vh - 100px)',maxWidth:'1000px',border:'1px solid #444',borderRadius:'8px',overflow:'hidden'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:'30%',backgroundColor:'#282c34',borderRight:'1px solid #444',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'15px',borderBottom:'1px solid #444',display:'flex',justifyContent:'flex-end',alignItems:'center'},children:/*#__PURE__*/_jsx(\"button\",{onClick:startNewChat,style:{background:'none',border:'none',color:isCreatingChat?'white':'#61dafb',cursor:'pointer',display:'flex',alignItems:'center'},title:\"Start New Chat\",children:/*#__PURE__*/_jsx(SquarePen,{size:24})})}),/*#__PURE__*/_jsx(\"div\",{style:{overflowY:'auto',flex:1},children:myChats.length===0&&!isCreatingChat?/*#__PURE__*/_jsx(\"p\",{style:{padding:'20px',color:'#888',fontSize:'14px',textAlign:'center'},children:\"No conversations yet.\"}):myChats.map(chat=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setSelectedChat(chat);setIsCreatingChat(false);},style:{padding:'15px',cursor:'pointer',backgroundColor:(selectedChat===null||selectedChat===void 0?void 0:selectedChat.id)===chat.id&&!isCreatingChat?'#3a3f4a':'transparent',borderBottom:'1px solid #333',display:'flex',justifyContent:'space-between',alignItems:'center',position:'relative'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{overflow:'hidden',flex:1,marginRight:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold',color:'white'},children:chat.type==='roster'?\"\\u26BD \".concat(chat.name):chat.name||\"Chat\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#aaa',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'},children:chat.lastMessage})]}),chat.type!=='roster'&&/*#__PURE__*/_jsxs(\"div\",{onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveChatMenu(activeChatMenu===chat.id?null:chat.id),style:{background:'none',border:'none',color:'#aaa',cursor:'pointer',fontSize:'20px',padding:'0 5px'},children:\"\\u22EE\"}),activeChatMenu===chat.id&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',right:'10px',top:'40px',backgroundColor:'#222',border:'1px solid #555',borderRadius:'5px',zIndex:100,minWidth:'120px',boxShadow:'0 2px 10px rgba(0,0,0,0.5)'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteChat(chat),style:{display:'block',width:'100%',padding:'10px',textAlign:'left',background:'none',border:'none',color:'#ff6b6b',cursor:'pointer',borderBottom:'1px solid #333'},children:\"Delete Chat\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveChatMenu(null),style:{display:'block',width:'100%',padding:'10px',textAlign:'left',background:'none',border:'none',color:'#aaa',cursor:'pointer'},children:\"Cancel\"})]})]})]},chat.id))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,display:'flex',flexDirection:'column',backgroundColor:'#1c1e22'},children:[isCreatingChat&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',borderBottom:'1px solid #444',backgroundColor:'#282c34'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 15px 0',color:'white'},children:\"New Message\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',color:'#aaa',fontSize:'12px'},children:\"TO:\"}),/*#__PURE__*/_jsx(UserSearch,{onSelectionChange:setSelectedEmails})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',color:'#aaa',fontSize:'12px'},children:\"GROUP NAME (OPTIONAL):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newChatName,onChange:e=>setNewChatName(e.target.value),placeholder:\"e.g. Weekend Warriors\",style:{width:'100%',padding:'10px',backgroundColor:'#3a3f4a',border:'none',color:'white',borderRadius:'4px'}})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,display:'flex',alignItems:'center',justifyContent:'center',color:'#444',fontStyle:'italic'},children:\"Select people to start a new conversation.\"})]}),!isCreatingChat&&selectedChat&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'15px',borderBottom:'1px solid #444',backgroundColor:'#282c34'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0},children:selectedChat.name}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px',color:'#888'},children:(_selectedChat$partici=selectedChat.participantDetails)===null||_selectedChat$partici===void 0?void 0:_selectedChat$partici.map(p=>p.name).join(', ')})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,padding:'20px',overflowY:'auto',display:'flex',flexDirection:'column',gap:'10px'},children:[messages.map(msg=>{const isMe=msg.senderId===loggedInUser.uid;return/*#__PURE__*/_jsxs(\"div\",{style:{alignSelf:isMe?'flex-end':'flex-start',maxWidth:'70%'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'10px',color:'#888',marginBottom:'2px',textAlign:isMe?'right':'left'},children:isMe?'Me':msg.senderName}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:isMe?'#0078d4':'#3a3f4a',color:'white',padding:'10px 15px',borderRadius:'15px',borderTopRightRadius:isMe?'2px':'15px',borderTopLeftRadius:isMe?'15px':'2px'},children:[msg.imageUrl&&/*#__PURE__*/_jsx(\"img\",{src:msg.imageUrl,alt:\"Attachment\",onClick:()=>setViewingImage(msg.imageUrl),style:{maxWidth:'100%',maxHeight:'200px',borderRadius:'10px',marginBottom:msg.text?'10px':'0',cursor:'pointer'}}),msg.text&&/*#__PURE__*/_jsx(\"span\",{children:msg.text})]})]},msg.id);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]})]}),!isCreatingChat&&!selectedChat&&/*#__PURE__*/_jsx(\"div\",{style:{flex:1,display:'flex',justifyContent:'center',alignItems:'center',color:'#888'},children:\"Select a conversation or start a new one.\"}),(isCreatingChat||selectedChat)&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSend,style:{padding:'15px',backgroundColor:'#282c34',borderTop:'1px solid #444',display:'flex',flexDirection:'column',gap:'10px'},children:[selectedFile&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px',color:'white',fontSize:'12px',paddingLeft:'10px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDCCE \",selectedFile.name]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setSelectedFile(null),style:{background:'none',border:'none',color:'#ff6b6b',cursor:'pointer'},children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",ref:fileInputRef,onChange:handleFileChange,style:{display:'none'}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>fileInputRef.current.click(),style:{padding:'0 15px',borderRadius:'20px',border:'1px solid #555',backgroundColor:'#3a3f4a',color:'white',fontSize:'20px',cursor:'pointer'},children:\"\\uD83D\\uDCCE\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:isCreatingChat?\"Type your first message...\":\"Type a message...\",value:newMessage,onChange:e=>setNewMessage(e.target.value),style:{flex:1,padding:'12px',borderRadius:'20px',border:'none',backgroundColor:'#3a3f4a',color:'white'}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!canSendNewChat,style:{padding:'10px 20px',borderRadius:'20px',border:'none',backgroundColor:canSendNewChat?'#61dafb':'#444',color:canSendNewChat?'#000':'#888',fontWeight:'bold',cursor:canSendNewChat?'pointer':'not-allowed'},children:\"Send\"})]})]})]}),viewingImage&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',backgroundColor:'rgba(0, 0, 0, 0.9)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:2000,flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewingImage(null),style:{position:'absolute',top:'20px',right:'20px',background:'none',border:'none',color:'white',fontSize:'30px',cursor:'pointer'},children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"img\",{src:viewingImage,alt:\"Full size\",style:{maxWidth:'90%',maxHeight:'90%',objectFit:'contain'}})]})]});}export default TeamChat;","map":{"version":3,"names":["React","useState","useEffect","useRef","useAuth","collection","query","orderBy","onSnapshot","limit","where","getDocs","db","UserSearch","SquarePen","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TeamChat","_selectedChat$partici","sendMessage","createChat","hideChat","uploadImage","loggedInUser","myChats","setMyChats","selectedChat","setSelectedChat","messages","setMessages","newMessage","setNewMessage","selectedFile","setSelectedFile","fileInputRef","isCreatingChat","setIsCreatingChat","selectedEmails","setSelectedEmails","newChatName","setNewChatName","viewingImage","setViewingImage","activeChatMenu","setActiveChatMenu","messagesEndRef","chatsRef","q","uid","unsubscribe","snapshot","chats","docs","map","doc","_objectSpread","id","data","stillExists","find","c","error","console","messagesRef","msgs","scrollToBottom","setTimeout","_messagesEndRef$curre","current","scrollIntoView","behavior","handleFileChange","e","target","files","startNewChat","handleSend","preventDefault","length","alert","trim","chatResult","newChatId","participants","text","fileToUpload","imageUrl","concat","optimisticChat","name","lastMessage","type","participantDetails","optimisticMessage","Date","now","senderId","senderName","playerName","createdAt","toDate","prev","handleDeleteChat","chat","window","confirm","visibleTo","canSendNewChat","style","display","height","maxWidth","border","borderRadius","overflow","children","width","backgroundColor","borderRight","flexDirection","padding","borderBottom","justifyContent","alignItems","onClick","background","color","cursor","title","size","overflowY","flex","fontSize","textAlign","position","marginRight","fontWeight","whiteSpace","textOverflow","stopPropagation","right","top","zIndex","minWidth","boxShadow","margin","marginBottom","onSelectionChange","value","onChange","placeholder","fontStyle","p","join","gap","msg","isMe","alignSelf","borderTopRightRadius","borderTopLeftRadius","src","alt","maxHeight","ref","onSubmit","borderTop","paddingLeft","accept","click","disabled","left","objectFit"],"sources":["/Users/dbroxton/Documents/Projects/soccer-management-app/src/components/TeamChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { collection, query, orderBy, onSnapshot, limit, where, getDocs } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport UserSearch from './UserSearch';\nimport { SquarePen } from 'lucide-react';\n\nfunction TeamChat() {\n  const { sendMessage, createChat, hideChat, uploadImage, loggedInUser } = useAuth();\n  \n  const [myChats, setMyChats] = useState([]);\n  const [selectedChat, setSelectedChat] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  \n  const [selectedFile, setSelectedFile] = useState(null);\n  const fileInputRef = useRef(null); \n  \n  const [isCreatingChat, setIsCreatingChat] = useState(false);\n  \n  const [selectedEmails, setSelectedEmails] = useState([]); \n  const [newChatName, setNewChatName] = useState(\"\");\n\n  const [viewingImage, setViewingImage] = useState(null);\n  const [activeChatMenu, setActiveChatMenu] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    if (!loggedInUser) return;\n\n    const chatsRef = collection(db, \"chats\");\n    const q = query(\n      chatsRef, \n      where(\"visibleTo\", \"array-contains\", loggedInUser.uid), \n      orderBy(\"lastMessageTime\", \"desc\")\n    );\n\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const chats = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setMyChats(chats);\n      \n      if (selectedChat) {\n        const stillExists = chats.find(c => c.id === selectedChat.id);\n        if (!stillExists) {\n          setSelectedChat(null);\n        }\n      }\n    }, (error) => {\n      console.error(\"Error listening to chat list:\", error);\n    });\n\n    return () => unsubscribe();\n  }, [loggedInUser, selectedChat]);\n\n  useEffect(() => {\n    if (!selectedChat || isCreatingChat) {\n        setMessages([]); \n        return;\n    }\n\n    const messagesRef = collection(db, \"chats\", selectedChat.id, \"messages\");\n    const q = query(messagesRef, orderBy(\"createdAt\", \"asc\"), limit(50));\n\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const msgs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setMessages(msgs);\n      scrollToBottom();\n    });\n\n    return () => unsubscribe();\n  }, [selectedChat, isCreatingChat]);\n\n  const scrollToBottom = () => {\n    setTimeout(() => {\n      messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n    }, 100);\n  };\n\n  const handleFileChange = (e) => {\n    if (e.target.files[0]) {\n      setSelectedFile(e.target.files[0]);\n    }\n  };\n\n  const startNewChat = () => {\n      setIsCreatingChat(true);\n      setSelectedChat(null);\n      setNewChatName(\"\");\n      setSelectedEmails([]);\n      setNewMessage(\"\");\n      setSelectedFile(null);\n  };\n\n  const handleSend = async (e) => {\n    e.preventDefault();\n\n    if (isCreatingChat) {\n        if (selectedEmails.length === 0) {\n            alert(\"Please add at least one person to the chat.\");\n            return;\n        }\n        if (!newMessage.trim() && !selectedFile) {\n            alert(\"Please enter a message or attach a file.\");\n            return;\n        }\n\n        // NEW: Expecting { id, participants } from createChat\n        const chatResult = await createChat(selectedEmails, newChatName);\n        \n        if (chatResult && chatResult.id) {\n             const newChatId = chatResult.id;\n             const participants = chatResult.participants;\n             const text = newMessage;\n             const fileToUpload = selectedFile;\n\n             setNewMessage(\"\"); \n             setSelectedFile(null); \n             \n             let imageUrl = null;\n             if (fileToUpload) {\n                 imageUrl = await uploadImage(fileToUpload, `chat_images/${newChatId}`);\n             }\n             \n             // NEW: Pass correct participants list to sendMessage\n             await sendMessage(newChatId, text, participants, imageUrl);\n\n             const optimisticChat = {\n                 id: newChatId,\n                 name: newChatName || \"New Chat\",\n                 lastMessage: text || \"Sent an image\",\n                 type: selectedEmails.length > 1 ? 'group' : 'dm',\n                 participantDetails: [] \n             };\n\n             const optimisticMessage = {\n                 id: 'temp-id-' + Date.now(),\n                 text: text,\n                 imageUrl: imageUrl,\n                 senderId: loggedInUser.uid,\n                 senderName: loggedInUser.playerName,\n                 createdAt: { toDate: () => new Date() }\n             };\n\n             setMyChats(prev => [optimisticChat, ...prev]);\n             setSelectedChat(optimisticChat);\n             setMessages([optimisticMessage]); \n             \n             setIsCreatingChat(false);\n             setNewChatName(\"\");\n             setSelectedEmails([]);\n        }\n\n    } else {\n        if ((!newMessage.trim() && !selectedFile) || !selectedChat) return;\n\n        const text = newMessage;\n        const fileToUpload = selectedFile;\n\n        setNewMessage(\"\"); \n        setSelectedFile(null); \n        \n        let imageUrl = null;\n\n        try {\n            if (fileToUpload) {\n                imageUrl = await uploadImage(fileToUpload, `chat_images/${selectedChat.id}`);\n            }\n            await sendMessage(selectedChat.id, text, selectedChat.participants, imageUrl);\n        } catch (error) {\n            console.error(\"Error sending message/image:\", error);\n            alert(\"Failed to send message.\");\n        }\n    }\n  };\n\n  const handleDeleteChat = async (chat) => {\n    if (chat.type === 'roster') {\n      alert(\"Team Roster chats cannot be deleted.\");\n      setActiveChatMenu(null); \n      return;\n    }\n    \n    if (window.confirm(\"Are you sure you want to delete this chat? This action cannot be undone.\")) {\n        await hideChat(chat.id, chat.visibleTo, chat.type);\n        if (selectedChat && selectedChat.id === chat.id) {\n            setSelectedChat(null);\n        }\n    }\n    setActiveChatMenu(null); \n  };\n\n  const canSendNewChat = isCreatingChat \n    ? (selectedEmails.length > 0 && (newMessage.trim().length > 0 || selectedFile)) \n    : true; \n\n  return (\n    <div style={{ display: 'flex', height: 'calc(100vh - 100px)', maxWidth: '1000px', border: '1px solid #444', borderRadius: '8px', overflow: 'hidden' }}>\n      \n      <div style={{ width: '30%', backgroundColor: '#282c34', borderRight: '1px solid #444', display: 'flex', flexDirection: 'column' }}>\n        <div style={{ padding: '15px', borderBottom: '1px solid #444', display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }}>\n          <button \n            onClick={startNewChat}\n            style={{ background: 'none', border: 'none', color: isCreatingChat ? 'white' : '#61dafb', cursor: 'pointer', display: 'flex', alignItems: 'center' }}\n            title=\"Start New Chat\"\n          >\n            <SquarePen size={24} />\n          </button>\n        </div>\n        \n        <div style={{ overflowY: 'auto', flex: 1 }}>\n          {myChats.length === 0 && !isCreatingChat ? (\n            <p style={{ padding: '20px', color: '#888', fontSize: '14px', textAlign: 'center' }}>No conversations yet.</p>\n          ) : (\n            myChats.map(chat => (\n              <div \n                key={chat.id} \n                onClick={() => { setSelectedChat(chat); setIsCreatingChat(false); }}\n                style={{ \n                  padding: '15px', \n                  cursor: 'pointer', \n                  backgroundColor: (selectedChat?.id === chat.id && !isCreatingChat) ? '#3a3f4a' : 'transparent',\n                  borderBottom: '1px solid #333',\n                  display: 'flex', justifyContent: 'space-between', alignItems: 'center',\n                  position: 'relative' \n                }}\n              >\n                <div style={{ overflow: 'hidden', flex: 1, marginRight: '10px' }}>\n                  <div style={{ fontWeight: 'bold', color: 'white' }}>\n                    {chat.type === 'roster' ? `âš½ ${chat.name}` : chat.name || \"Chat\"}\n                  </div>\n                  <div style={{ fontSize: '12px', color: '#aaa', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>\n                    {chat.lastMessage}\n                  </div>\n                </div>\n                \n                {chat.type !== 'roster' && (\n                  <div onClick={(e) => e.stopPropagation()}>\n                    <button \n                      onClick={() => setActiveChatMenu(activeChatMenu === chat.id ? null : chat.id)}\n                      style={{ background: 'none', border: 'none', color: '#aaa', cursor: 'pointer', fontSize: '20px', padding: '0 5px' }}\n                    >\n                      â‹®\n                    </button>\n                    {activeChatMenu === chat.id && (\n                      <div style={{ \n                        position: 'absolute', right: '10px', top: '40px', \n                        backgroundColor: '#222', border: '1px solid #555', borderRadius: '5px', \n                        zIndex: 100, minWidth: '120px', boxShadow: '0 2px 10px rgba(0,0,0,0.5)'\n                      }}>\n                        <button \n                          onClick={() => handleDeleteChat(chat)}\n                          style={{ display: 'block', width: '100%', padding: '10px', textAlign: 'left', background: 'none', border: 'none', color: '#ff6b6b', cursor: 'pointer', borderBottom: '1px solid #333' }}\n                        >\n                          Delete Chat\n                        </button>\n                        <button \n                          onClick={() => setActiveChatMenu(null)}\n                          style={{ display: 'block', width: '100%', padding: '10px', textAlign: 'left', background: 'none', border: 'none', color: '#aaa', cursor: 'pointer' }}\n                        >\n                          Cancel\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n\n      <div style={{ flex: 1, display: 'flex', flexDirection: 'column', backgroundColor: '#1c1e22' }}>\n        \n        {isCreatingChat && (\n            <>\n                <div style={{ padding: '20px', borderBottom: '1px solid #444', backgroundColor: '#282c34' }}>\n                    <h3 style={{ margin: '0 0 15px 0', color: 'white' }}>New Message</h3>\n                    \n                    <div style={{ marginBottom: '15px' }}>\n                         <label style={{ display: 'block', marginBottom: '5px', color: '#aaa', fontSize: '12px' }}>TO:</label>\n                         <UserSearch onSelectionChange={setSelectedEmails} />\n                    </div>\n\n                    <div>\n                         <label style={{ display: 'block', marginBottom: '5px', color: '#aaa', fontSize: '12px' }}>GROUP NAME (OPTIONAL):</label>\n                         <input \n                            type=\"text\" \n                            value={newChatName} \n                            onChange={(e) => setNewChatName(e.target.value)}\n                            placeholder=\"e.g. Weekend Warriors\"\n                            style={{ width: '100%', padding: '10px', backgroundColor: '#3a3f4a', border: 'none', color: 'white', borderRadius: '4px' }}\n                         />\n                    </div>\n                </div>\n                \n                <div style={{ flex: 1, display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#444', fontStyle: 'italic' }}>\n                    Select people to start a new conversation.\n                </div>\n            </>\n        )}\n\n        {!isCreatingChat && selectedChat && (\n          <>\n            <div style={{ padding: '15px', borderBottom: '1px solid #444', backgroundColor: '#282c34' }}>\n              <h3 style={{ margin: 0 }}>{selectedChat.name}</h3>\n              <span style={{ fontSize: '12px', color: '#888' }}>\n                {selectedChat.participantDetails?.map(p => p.name).join(', ')}\n              </span>\n            </div>\n\n            <div style={{ flex: 1, padding: '20px', overflowY: 'auto', display: 'flex', flexDirection: 'column', gap: '10px' }}>\n              {messages.map(msg => {\n                const isMe = msg.senderId === loggedInUser.uid;\n                return (\n                  <div key={msg.id} style={{\n                    alignSelf: isMe ? 'flex-end' : 'flex-start',\n                    maxWidth: '70%',\n                  }}>\n                    <div style={{ fontSize: '10px', color: '#888', marginBottom: '2px', textAlign: isMe ? 'right' : 'left' }}>\n                      {isMe ? 'Me' : msg.senderName}\n                    </div>\n                    <div style={{\n                      backgroundColor: isMe ? '#0078d4' : '#3a3f4a',\n                      color: 'white',\n                      padding: '10px 15px',\n                      borderRadius: '15px',\n                      borderTopRightRadius: isMe ? '2px' : '15px',\n                      borderTopLeftRadius: isMe ? '15px' : '2px'\n                    }}>\n                      {msg.imageUrl && (\n                        <img \n                          src={msg.imageUrl} \n                          alt=\"Attachment\" \n                          onClick={() => setViewingImage(msg.imageUrl)}\n                          style={{ maxWidth: '100%', maxHeight: '200px', borderRadius: '10px', marginBottom: msg.text ? '10px' : '0', cursor: 'pointer' }}\n                        />\n                      )}\n                      {msg.text && <span>{msg.text}</span>}\n                    </div>\n                  </div>\n                );\n              })}\n              <div ref={messagesEndRef} />\n            </div>\n          </>\n        )}\n\n        {!isCreatingChat && !selectedChat && (\n             <div style={{ flex: 1, display: 'flex', justifyContent: 'center', alignItems: 'center', color: '#888' }}>\n                Select a conversation or start a new one.\n             </div>\n        )}\n\n        {(isCreatingChat || selectedChat) && (\n            <form onSubmit={handleSend} style={{ padding: '15px', backgroundColor: '#282c34', borderTop: '1px solid #444', display: 'flex', flexDirection: 'column', gap: '10px' }}>\n              \n              {selectedFile && (\n                <div style={{ display: 'flex', alignItems: 'center', gap: '10px', color: 'white', fontSize: '12px', paddingLeft: '10px' }}>\n                  <span>ðŸ“Ž {selectedFile.name}</span>\n                  <button type=\"button\" onClick={() => setSelectedFile(null)} style={{ background: 'none', border: 'none', color: '#ff6b6b', cursor: 'pointer' }}>âœ•</button>\n                </div>\n              )}\n\n              <div style={{ display: 'flex', gap: '10px' }}>\n                <input \n                  type=\"file\" \n                  accept=\"image/*\"\n                  ref={fileInputRef}\n                  onChange={handleFileChange}\n                  style={{ display: 'none' }}\n                />\n                \n                <button \n                  type=\"button\"\n                  onClick={() => fileInputRef.current.click()}\n                  style={{ \n                    padding: '0 15px', borderRadius: '20px', border: '1px solid #555', \n                    backgroundColor: '#3a3f4a', color: 'white', fontSize: '20px', cursor: 'pointer'\n                  }}\n                >\n                  ðŸ“Ž\n                </button>\n\n                <input \n                  type=\"text\" \n                  placeholder={isCreatingChat ? \"Type your first message...\" : \"Type a message...\"}\n                  value={newMessage}\n                  onChange={(e) => setNewMessage(e.target.value)}\n                  style={{ flex: 1, padding: '12px', borderRadius: '20px', border: 'none', backgroundColor: '#3a3f4a', color: 'white' }}\n                />\n                <button \n                    type=\"submit\" \n                    disabled={!canSendNewChat}\n                    style={{ \n                        padding: '10px 20px', borderRadius: '20px', border: 'none', \n                        backgroundColor: canSendNewChat ? '#61dafb' : '#444', \n                        color: canSendNewChat ? '#000' : '#888', \n                        fontWeight: 'bold', cursor: canSendNewChat ? 'pointer' : 'not-allowed'\n                    }}\n                >\n                  Send\n                </button>\n              </div>\n            </form>\n        )}\n      </div>\n\n      {viewingImage && (\n        <div style={{\n          position: 'fixed', top: 0, left: 0, width: '100%', height: '100%',\n          backgroundColor: 'rgba(0, 0, 0, 0.9)',\n          display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 2000,\n          flexDirection: 'column'\n        }}>\n          <button \n            onClick={() => setViewingImage(null)}\n            style={{\n              position: 'absolute', top: '20px', right: '20px',\n              background: 'none', border: 'none', color: 'white', fontSize: '30px', cursor: 'pointer'\n            }}\n          >\n            âœ•\n          </button>\n          <img \n            src={viewingImage} \n            alt=\"Full size\" \n            style={{ maxWidth: '90%', maxHeight: '90%', objectFit: 'contain' }}\n          />\n        </div>\n      )}\n\n    </div>\n  );\n}\n\nexport default TeamChat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}