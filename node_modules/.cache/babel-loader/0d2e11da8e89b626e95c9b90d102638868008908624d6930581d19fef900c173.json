{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useAuth}from'../context/AuthContext';import Button from'./common/Button';import Input from'./common/Input';import{COLORS}from'../constants';import UserSearch from'./UserSearch';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ManagerDashboard(){const{fetchRosters,createRoster,deleteRoster,addPlayerToRoster,removePlayerFromRoster,subscribeToIncomingRequests,respondToRequest,fetchPlayerDetails,fetchUserGroups,addGroupMembers,loggedInUser}=useAuth();const[rosters,setRosters]=useState([]);const[incomingRequests,setIncomingRequests]=useState([]);const[isLoading,setIsLoading]=useState(true);const[selectedRoster,setSelectedRoster]=useState(null);const[showCreateForm,setShowCreateForm]=useState(false);const[newRosterName,setNewRosterName]=useState(\"\");const[newRosterSeason,setNewRosterSeason]=useState(\"\");const[newRosterCapacity,setNewRosterCapacity]=useState(\"20\");const[isDiscoverable,setIsDiscoverable]=useState(false);const[addManagerToRoster,setAddManagerToRoster]=useState(false);const[createAssociatedGroup,setCreateAssociatedGroup]=useState(false);const[associatedGroupName,setAssociatedGroupName]=useState(\"\");const[groupNameDirty,setGroupNameDirty]=useState(false);const[selectedPlayerEmails,setSelectedPlayerEmails]=useState([]);const[userSearchKey,setUserSearchKey]=useState(0);const[expandedRequestId,setExpandedRequestId]=useState(null);const[expandedPlayerDetails,setExpandedPlayerDetails]=useState(null);const[loadingDetails,setLoadingDetails]=useState(false);// --- Add to Group States ---\nconst[myGroups,setMyGroups]=useState([]);const[showAddToGroupModal,setShowAddToGroupModal]=useState(false);const[playerToAdd,setPlayerToAdd]=useState(null);// --- Request Approval Modal State ---\nconst[requestToApprove,setRequestToApprove]=useState(null);const[targetGroupId,setTargetGroupId]=useState(\"\");// --- NEW: Manual Add Confirmation State ---\nconst[showConfirmAddModal,setShowConfirmAddModal]=useState(false);const[manualAddTargetGroupId,setManualAddTargetGroupId]=useState(\"\");const loadRosters=useCallback(async()=>{setIsLoading(true);const data=await fetchRosters();setRosters(data);setIsLoading(false);},[fetchRosters]);const loadMyGroups=useCallback(async()=>{if(loggedInUser){const groups=await fetchUserGroups(loggedInUser.uid);setMyGroups(groups);}},[fetchUserGroups,loggedInUser]);useEffect(()=>{loadRosters();loadMyGroups();const unsubscribe=subscribeToIncomingRequests(requests=>{setIncomingRequests(requests);});return()=>{if(unsubscribe)unsubscribe();};},[loadRosters,loadMyGroups,subscribeToIncomingRequests]);useEffect(()=>{if(selectedRoster){const updated=rosters.find(r=>r.id===selectedRoster.id);if(updated&&updated!==selectedRoster)setSelectedRoster(updated);}},[rosters,selectedRoster]);const initiateApproval=req=>{setRequestToApprove(req);const associated=myGroups.find(g=>g.associatedRosterId===req.rosterId);setTargetGroupId(associated?associated.id:\"\");};const confirmApproval=async()=>{if(!requestToApprove)return;await respondToRequest(requestToApprove,'approve',targetGroupId||null);loadRosters();setRequestToApprove(null);setTargetGroupId(\"\");};// --- NEW: Manual Add Logic ---\nconst initiateManualAdd=e=>{e.preventDefault();if(selectedPlayerEmails.length===0)return;// Try to find an associated group for the currently selected roster\nconst associated=myGroups.find(g=>g.associatedRosterId===selectedRoster.id);setManualAddTargetGroupId(associated?associated.id:\"\");setShowConfirmAddModal(true);};const executeManualAdd=async()=>{// 1. Add all selected users to the roster\nfor(const email of selectedPlayerEmails){await addPlayerToRoster(selectedRoster.id,email);}// 2. If a group is selected, add them all to the group (batch)\nif(manualAddTargetGroupId){await addGroupMembers(manualAddTargetGroupId,selectedPlayerEmails);}alert(\"Players added successfully!\");// Reset UI\nsetSelectedPlayerEmails([]);setUserSearchKey(prev=>prev+1);setShowConfirmAddModal(false);setManualAddTargetGroupId(\"\");loadRosters();};const handleRosterNameChange=e=>{const val=e.target.value;setNewRosterName(val);if(!groupNameDirty){setAssociatedGroupName(val);}};const handleGroupNameChange=e=>{setAssociatedGroupName(e.target.value);setGroupNameDirty(true);};const handleCreateSubmit=async e=>{e.preventDefault();if(!newRosterName||!newRosterSeason){alert(\"Please fill in all fields\");return;}const success=await createRoster(newRosterName,newRosterSeason,newRosterCapacity,isDiscoverable,{createGroup:createAssociatedGroup,groupName:associatedGroupName},addManagerToRoster);if(success){alert(\"Roster created!\");setShowCreateForm(false);setNewRosterName(\"\");setNewRosterSeason(\"\");setNewRosterCapacity(\"20\");setIsDiscoverable(false);setAddManagerToRoster(false);setCreateAssociatedGroup(false);setAssociatedGroupName(\"\");setGroupNameDirty(false);loadRosters();loadMyGroups();}};const handleDeleteRoster=async rosterId=>{if(window.confirm(\"Delete this roster? This cannot be undone.\")){const success=await deleteRoster(rosterId);if(success)loadRosters();}};const handleRemovePlayer=async playerSummary=>{if(window.confirm(\"Remove \".concat(playerSummary.playerName,\" from this roster?\"))){const success=await removePlayerFromRoster(selectedRoster.id,playerSummary);if(success)loadRosters();}};const handleDenyRequest=async request=>{if(window.confirm(\"Deny request from \".concat(request.userName,\"?\"))){await respondToRequest(request,'deny');}};const toggleRequestDetails=async req=>{if(expandedRequestId===req.id){setExpandedRequestId(null);setExpandedPlayerDetails(null);return;}setExpandedRequestId(req.id);setLoadingDetails(true);const details=await fetchPlayerDetails(req.userId);setExpandedPlayerDetails(details);setLoadingDetails(false);};const openAddToGroupModal=player=>{setPlayerToAdd(player);setShowAddToGroupModal(true);};const confirmAddToGroup=async groupId=>{if(!playerToAdd)return;const success=await addGroupMembers(groupId,[playerToAdd.email]);if(success){alert(\"\".concat(playerToAdd.playerName,\" added to group!\"));setShowAddToGroupModal(false);setPlayerToAdd(null);}};if(selectedRoster){var _selectedRoster$playe;return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'left',maxWidth:'800px',margin:'0 auto'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedRoster(null),style:{marginBottom:'20px',background:'none',border:'none',color:COLORS.primary,cursor:'pointer',fontSize:'16px'},children:\"\\u2190 Back to Dashboard\"}),/*#__PURE__*/_jsx(\"h2\",{style:{margin:'0 0 10px 0'},children:selectedRoster.name}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#ccc',marginTop:0},children:[selectedRoster.season,\" \\u2022 \",((_selectedRoster$playe=selectedRoster.players)===null||_selectedRoster$playe===void 0?void 0:_selectedRoster$playe.length)||0,\" / \",selectedRoster.maxCapacity,\" Players\",selectedRoster.isDiscoverable&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'10px',fontSize:'12px',backgroundColor:'#28a745',padding:'2px 6px',borderRadius:'4px',color:'white'},children:\"Discoverable\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'30px',marginTop:'30px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{borderBottom:\"1px solid \".concat(COLORS.border),paddingBottom:'10px'},children:\"Roster\"}),!selectedRoster.players||selectedRoster.players.length===0?/*#__PURE__*/_jsx(\"p\",{style:{fontStyle:'italic',color:'#888'},children:\"No players yet.\"}):/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0},children:selectedRoster.players.map((player,index)=>/*#__PURE__*/_jsxs(\"li\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'10px',backgroundColor:COLORS.sidebar,marginBottom:'5px',borderRadius:'5px',border:\"1px solid \".concat(COLORS.border)},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',display:'block'},children:player.playerName}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px',color:'#aaa'},children:player.email})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'5px'},children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>openAddToGroupModal(player),style:{padding:'5px 10px',fontSize:'10px'},title:\"Add to a Community Group\",children:\"+ Group\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>handleRemovePlayer(player),style:{padding:'5px 10px',fontSize:'12px'},children:\"Remove\"})]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{borderBottom:\"1px solid \".concat(COLORS.border),paddingBottom:'10px'},children:\"Add Player\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:initiateManualAdd,style:{backgroundColor:COLORS.sidebar,padding:'20px',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"p\",{style:{marginTop:0,fontSize:'14px',marginBottom:'15px'},children:\"Search for users by name or email to add them to this team.\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'15px'},children:/*#__PURE__*/_jsx(UserSearch,{onSelectionChange:setSelectedPlayerEmails},userSearchKey)}),/*#__PURE__*/_jsx(Button,{type:\"submit\",style:{width:'100%'},children:\"Add Selected to Roster\"})]})]})]}),showConfirmAddModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',backgroundColor:'rgba(0,0,0,0.7)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:2000},children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#2c3e50',padding:'30px',borderRadius:'10px',maxWidth:'400px',width:'100%'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,color:'white'},children:\"Confirm Add\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#ccc'},children:[\"You are adding \",/*#__PURE__*/_jsx(\"strong\",{children:selectedPlayerEmails.length}),\" player(s) to \",/*#__PURE__*/_jsx(\"strong\",{children:selectedRoster.name}),\".\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'10px',fontWeight:'bold'},children:\"Add to Community Group (Optional):\"}),/*#__PURE__*/_jsxs(\"select\",{value:manualAddTargetGroupId,onChange:e=>setManualAddTargetGroupId(e.target.value),style:{width:'100%',padding:'10px',borderRadius:'5px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- No Group --\"}),myGroups.map(g=>/*#__PURE__*/_jsx(\"option\",{value:g.id,children:g.name},g.id))]}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'11px',color:'#aaa',marginTop:'5px'},children:manualAddTargetGroupId?\"Players will also be added to this group.\":\"Players will only be added to the roster.\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(Button,{onClick:executeManualAdd,style:{flex:1},children:\"Add Players\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowConfirmAddModal(false),style:{flex:1},children:\"Cancel\"})]})]})}),showAddToGroupModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',backgroundColor:'rgba(0,0,0,0.7)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:2000},children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#2c3e50',padding:'30px',borderRadius:'10px',maxWidth:'400px',width:'100%'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{marginTop:0,color:'white'},children:[\"Add \",playerToAdd===null||playerToAdd===void 0?void 0:playerToAdd.playerName,\" to Group\"]}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#ccc'},children:\"Select a group to add this player to:\"}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:'200px',overflowY:'auto',marginBottom:'20px',display:'grid',gap:'10px'},children:myGroups.length===0?/*#__PURE__*/_jsx(\"p\",{style:{fontStyle:'italic',color:'#aaa'},children:\"You don't manage any groups.\"}):myGroups.map(group=>{var _group$memberDetails;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>confirmAddToGroup(group.id),style:{padding:'10px',textAlign:'left',backgroundColor:'#34495e',border:\"1px solid \".concat(COLORS.border),color:'white',cursor:'pointer',borderRadius:'5px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:group.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'11px',color:'#aaa'},children:[((_group$memberDetails=group.memberDetails)===null||_group$memberDetails===void 0?void 0:_group$memberDetails.length)||0,\" Members\"]})]},group.id);})}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>{setShowAddToGroupModal(false);setPlayerToAdd(null);},style:{width:'100%'},children:\"Cancel\"})]})}),requestToApprove&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',backgroundColor:'rgba(0,0,0,0.7)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:2000},children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#2c3e50',padding:'30px',borderRadius:'10px',maxWidth:'400px',width:'100%'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,color:'white'},children:\"Confirm Approval\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#ccc'},children:[\"You are approving \",/*#__PURE__*/_jsx(\"strong\",{children:requestToApprove.userName}),\" for \",/*#__PURE__*/_jsx(\"strong\",{children:requestToApprove.rosterName}),\".\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'10px',fontWeight:'bold'},children:\"Add to Community Group (Optional):\"}),/*#__PURE__*/_jsxs(\"select\",{value:targetGroupId,onChange:e=>setTargetGroupId(e.target.value),style:{width:'100%',padding:'10px',borderRadius:'5px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- No Group --\"}),myGroups.map(g=>/*#__PURE__*/_jsx(\"option\",{value:g.id,children:g.name},g.id))]}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'11px',color:'#aaa',marginTop:'5px'},children:targetGroupId?\"User will be added to this group automatically.\":\"User will only be added to the roster.\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(Button,{onClick:confirmApproval,style:{flex:1},children:\"Confirm\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setRequestToApprove(null),style:{flex:1},children:\"Cancel\"})]})]})})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'left',maxWidth:'800px',margin:'0 auto'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Manager Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage your teams and rosters here.\"}),incomingRequests.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'30px',marginBottom:'40px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'#61dafb'},children:\"Incoming Join Requests\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'10px'},children:incomingRequests.map(req=>{var _expandedPlayerDetail;return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:COLORS.sidebar,padding:'15px',borderRadius:'8px',border:\"1px solid \".concat(COLORS.primary)},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold'},children:req.userName}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#aaa',margin:'0 10px'},children:\"wants to join\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'white'},children:req.rosterName})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>toggleRequestDetails(req),style:{padding:'5px 15px',fontSize:'12px'},children:expandedRequestId===req.id?\"Hide Details\":\"View Profile\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>initiateApproval(req),style:{padding:'5px 15px',fontSize:'12px'},children:\"Approve\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>handleDenyRequest(req),style:{padding:'5px 15px',fontSize:'12px'},children:\"Deny\"})]})]}),expandedRequestId===req.id&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'15px',padding:'15px',backgroundColor:'#333',borderRadius:'5px',border:'1px solid #555'},children:loadingDetails?/*#__PURE__*/_jsx(\"p\",{style:{fontStyle:'italic',margin:0},children:\"Loading player details...\"}):expandedPlayerDetails?/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'15px',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'50px',height:'50px',backgroundColor:'#555',borderRadius:'50%',overflow:'hidden',display:'flex',justifyContent:'center',alignItems:'center'},children:expandedPlayerDetails.photoURL?/*#__PURE__*/_jsx(\"img\",{src:expandedPlayerDetails.photoURL,alt:\"Profile\",style:{width:'100%',height:'100%',objectFit:'cover'}}):/*#__PURE__*/_jsx(\"span\",{children:(_expandedPlayerDetail=expandedPlayerDetails.playerName)===null||_expandedPlayerDetail===void 0?void 0:_expandedPlayerDetail.charAt(0)})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:expandedPlayerDetails.playerName}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#aaa'},children:expandedPlayerDetails.email}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#aaa'},children:expandedPlayerDetails.phone})]})]}),expandedPlayerDetails.soccerDetails?/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Positions:\"}),\" \",expandedPlayerDetails.soccerDetails.positions]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Skill Level:\"}),\" \",expandedPlayerDetails.soccerDetails.skillLevel]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Years Experience:\"}),\" \",expandedPlayerDetails.soccerDetails.yearsExperience]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Number:\"}),\" \",expandedPlayerDetails.soccerDetails.playerNumber]})]}):/*#__PURE__*/_jsx(\"p\",{style:{color:'#aaa',fontStyle:'italic'},children:\"No soccer details available for this user.\"}),expandedPlayerDetails.comments&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',borderTop:'1px solid #444',paddingTop:'10px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"About:\"}),\" \",expandedPlayerDetails.comments]})]}):/*#__PURE__*/_jsx(\"p\",{style:{color:'#f88'},children:\"Failed to load details.\"})})]},req.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'30px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Current Rosters\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setShowCreateForm(!showCreateForm),children:showCreateForm?\"Cancel\":\"+ Create New Roster\"})]}),showCreateForm&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateSubmit,style:{backgroundColor:COLORS.sidebar,padding:'20px',borderRadius:'8px',marginBottom:'20px',border:\"1px solid \".concat(COLORS.primary)},children:[/*#__PURE__*/_jsx(\"h4\",{style:{marginTop:0,color:'white'},children:\"New Roster Details\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'15px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:1,minWidth:'200px'},children:/*#__PURE__*/_jsx(Input,{label:\"Roster Name\",placeholder:\"e.g. The Gizmos\",value:newRosterName,onChange:handleRosterNameChange})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,minWidth:'150px'},children:/*#__PURE__*/_jsx(Input,{label:\"Season\",placeholder:\"e.g. Fall 2025\",value:newRosterSeason,onChange:e=>setNewRosterSeason(e.target.value)})}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100px'},children:/*#__PURE__*/_jsx(Input,{label:\"Capacity\",type:\"number\",value:newRosterCapacity,onChange:e=>setNewRosterCapacity(e.target.value)})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px',display:'flex',flexDirection:'column',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"discoverableCheck\",checked:isDiscoverable,onChange:e=>setIsDiscoverable(e.target.checked),style:{width:'18px',height:'18px'}}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"discoverableCheck\",style:{cursor:'pointer'},children:[\"Make this team \",/*#__PURE__*/_jsx(\"strong\",{children:\"Discoverable\"}),\" in \\\"Find Teams\\\"\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"createGroupCheck\",checked:createAssociatedGroup,onChange:e=>setCreateAssociatedGroup(e.target.checked),style:{width:'18px',height:'18px'}}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"createGroupCheck\",style:{cursor:'pointer'},children:[\"Create a new \",/*#__PURE__*/_jsx(\"strong\",{children:\"Community Group\"}),\" for this team\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"addManagerCheck\",checked:addManagerToRoster,onChange:e=>setAddManagerToRoster(e.target.checked),style:{width:'18px',height:'18px'}}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"addManagerCheck\",style:{cursor:'pointer'},children:[\"Add \",/*#__PURE__*/_jsx(\"strong\",{children:\"Myself\"}),\" to this roster\"]})]})]}),createAssociatedGroup&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(Input,{label:\"Group Name\",placeholder:\"e.g. The Gizmos Community\",value:associatedGroupName,onChange:handleGroupNameChange}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'5px 0 0 0',fontSize:'12px',color:'#aaa'},children:\"By default, this group will be private and not visible to public users.\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Save Roster\"})]}),isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading rosters...\"}):rosters.length===0?/*#__PURE__*/_jsx(\"p\",{style:{color:'#aaa',fontStyle:'italic'},children:\"No rosters found.\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'15px'},children:rosters.map(roster=>{var _roster$players;return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:COLORS.sidebar,padding:'15px',borderRadius:'8px',border:\"1px solid \".concat(COLORS.border),display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:0,color:COLORS.primary},children:roster.name}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'5px 0 0 0',fontSize:'14px',color:'#ccc'},children:[roster.season,\" \\u2022 \",((_roster$players=roster.players)===null||_roster$players===void 0?void 0:_roster$players.length)||0,\" / \",roster.maxCapacity,\" players\",roster.isDiscoverable&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'10px',fontSize:'10px',border:'1px solid #555',padding:'2px 4px',borderRadius:'3px'},children:\"Public\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setSelectedRoster(roster),style:{padding:'5px 15px',fontSize:'12px'},children:\"Manage\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>handleDeleteRoster(roster.id),style:{padding:'5px 10px',fontSize:'12px'},children:\"Delete\"})]})]},roster.id);})})]})]});}export default ManagerDashboard;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useAuth","Button","Input","COLORS","UserSearch","jsx","_jsx","jsxs","_jsxs","ManagerDashboard","fetchRosters","createRoster","deleteRoster","addPlayerToRoster","removePlayerFromRoster","subscribeToIncomingRequests","respondToRequest","fetchPlayerDetails","fetchUserGroups","addGroupMembers","loggedInUser","rosters","setRosters","incomingRequests","setIncomingRequests","isLoading","setIsLoading","selectedRoster","setSelectedRoster","showCreateForm","setShowCreateForm","newRosterName","setNewRosterName","newRosterSeason","setNewRosterSeason","newRosterCapacity","setNewRosterCapacity","isDiscoverable","setIsDiscoverable","addManagerToRoster","setAddManagerToRoster","createAssociatedGroup","setCreateAssociatedGroup","associatedGroupName","setAssociatedGroupName","groupNameDirty","setGroupNameDirty","selectedPlayerEmails","setSelectedPlayerEmails","userSearchKey","setUserSearchKey","expandedRequestId","setExpandedRequestId","expandedPlayerDetails","setExpandedPlayerDetails","loadingDetails","setLoadingDetails","myGroups","setMyGroups","showAddToGroupModal","setShowAddToGroupModal","playerToAdd","setPlayerToAdd","requestToApprove","setRequestToApprove","targetGroupId","setTargetGroupId","showConfirmAddModal","setShowConfirmAddModal","manualAddTargetGroupId","setManualAddTargetGroupId","loadRosters","data","loadMyGroups","groups","uid","unsubscribe","requests","updated","find","r","id","initiateApproval","req","associated","g","associatedRosterId","rosterId","confirmApproval","initiateManualAdd","e","preventDefault","length","executeManualAdd","email","alert","prev","handleRosterNameChange","val","target","value","handleGroupNameChange","handleCreateSubmit","success","createGroup","groupName","handleDeleteRoster","window","confirm","handleRemovePlayer","playerSummary","concat","playerName","handleDenyRequest","request","userName","toggleRequestDetails","details","userId","openAddToGroupModal","player","confirmAddToGroup","groupId","_selectedRoster$playe","style","textAlign","maxWidth","margin","children","onClick","marginBottom","background","border","color","primary","cursor","fontSize","name","marginTop","season","players","maxCapacity","marginLeft","backgroundColor","padding","borderRadius","display","gridTemplateColumns","gap","borderBottom","paddingBottom","fontStyle","listStyle","map","index","justifyContent","alignItems","sidebar","fontWeight","variant","title","onSubmit","onSelectionChange","type","width","position","top","left","height","zIndex","onChange","flex","maxHeight","overflowY","group","_group$memberDetails","memberDetails","rosterName","_expandedPlayerDetail","overflow","photoURL","src","alt","objectFit","charAt","phone","soccerDetails","positions","skillLevel","yearsExperience","playerNumber","comments","borderTop","paddingTop","flexWrap","minWidth","label","placeholder","flexDirection","checked","htmlFor","roster","_roster$players"],"sources":["/Users/dbroxton/Documents/Projects/soccer-management-app/src/components/ManagerDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport Button from './common/Button'; \nimport Input from './common/Input';   \nimport { COLORS } from '../constants'; \nimport UserSearch from './UserSearch';\n\nfunction ManagerDashboard() {\n  const { \n    fetchRosters, createRoster, deleteRoster, addPlayerToRoster, removePlayerFromRoster,\n    subscribeToIncomingRequests, respondToRequest, fetchPlayerDetails,\n    fetchUserGroups, addGroupMembers, loggedInUser\n  } = useAuth();\n\n  const [rosters, setRosters] = useState([]);\n  const [incomingRequests, setIncomingRequests] = useState([]); \n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedRoster, setSelectedRoster] = useState(null); \n\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [newRosterName, setNewRosterName] = useState(\"\");\n  const [newRosterSeason, setNewRosterSeason] = useState(\"\");\n  const [newRosterCapacity, setNewRosterCapacity] = useState(\"20\");\n  const [isDiscoverable, setIsDiscoverable] = useState(false); \n  const [addManagerToRoster, setAddManagerToRoster] = useState(false);\n\n  const [createAssociatedGroup, setCreateAssociatedGroup] = useState(false);\n  const [associatedGroupName, setAssociatedGroupName] = useState(\"\");\n  const [groupNameDirty, setGroupNameDirty] = useState(false);\n\n  const [selectedPlayerEmails, setSelectedPlayerEmails] = useState([]);\n  const [userSearchKey, setUserSearchKey] = useState(0);\n\n  const [expandedRequestId, setExpandedRequestId] = useState(null);\n  const [expandedPlayerDetails, setExpandedPlayerDetails] = useState(null);\n  const [loadingDetails, setLoadingDetails] = useState(false);\n\n  // --- Add to Group States ---\n  const [myGroups, setMyGroups] = useState([]);\n  const [showAddToGroupModal, setShowAddToGroupModal] = useState(false);\n  const [playerToAdd, setPlayerToAdd] = useState(null); \n\n  // --- Request Approval Modal State ---\n  const [requestToApprove, setRequestToApprove] = useState(null);\n  const [targetGroupId, setTargetGroupId] = useState(\"\");\n\n  // --- NEW: Manual Add Confirmation State ---\n  const [showConfirmAddModal, setShowConfirmAddModal] = useState(false);\n  const [manualAddTargetGroupId, setManualAddTargetGroupId] = useState(\"\");\n\n  const loadRosters = useCallback(async () => {\n    setIsLoading(true);\n    const data = await fetchRosters();\n    setRosters(data);\n    setIsLoading(false);\n  }, [fetchRosters]);\n\n  const loadMyGroups = useCallback(async () => {\n      if (loggedInUser) {\n          const groups = await fetchUserGroups(loggedInUser.uid);\n          setMyGroups(groups);\n      }\n  }, [fetchUserGroups, loggedInUser]);\n\n  useEffect(() => {\n    loadRosters();\n    loadMyGroups(); \n    \n    const unsubscribe = subscribeToIncomingRequests((requests) => {\n      setIncomingRequests(requests);\n    });\n\n    return () => {\n      if (unsubscribe) unsubscribe();\n    };\n  }, [loadRosters, loadMyGroups, subscribeToIncomingRequests]);\n\n  useEffect(() => {\n    if (selectedRoster) {\n      const updated = rosters.find(r => r.id === selectedRoster.id);\n      if (updated && updated !== selectedRoster) setSelectedRoster(updated);\n    }\n  }, [rosters, selectedRoster]);\n\n  const initiateApproval = (req) => {\n      setRequestToApprove(req);\n      const associated = myGroups.find(g => g.associatedRosterId === req.rosterId);\n      setTargetGroupId(associated ? associated.id : \"\");\n  };\n\n  const confirmApproval = async () => {\n      if (!requestToApprove) return;\n      await respondToRequest(requestToApprove, 'approve', targetGroupId || null);\n      loadRosters(); \n      setRequestToApprove(null);\n      setTargetGroupId(\"\");\n  };\n\n  // --- NEW: Manual Add Logic ---\n  const initiateManualAdd = (e) => {\n      e.preventDefault();\n      if (selectedPlayerEmails.length === 0) return;\n\n      // Try to find an associated group for the currently selected roster\n      const associated = myGroups.find(g => g.associatedRosterId === selectedRoster.id);\n      setManualAddTargetGroupId(associated ? associated.id : \"\");\n      \n      setShowConfirmAddModal(true);\n  };\n\n  const executeManualAdd = async () => {\n      // 1. Add all selected users to the roster\n      for (const email of selectedPlayerEmails) {\n          await addPlayerToRoster(selectedRoster.id, email);\n      }\n\n      // 2. If a group is selected, add them all to the group (batch)\n      if (manualAddTargetGroupId) {\n          await addGroupMembers(manualAddTargetGroupId, selectedPlayerEmails);\n      }\n\n      alert(\"Players added successfully!\");\n      \n      // Reset UI\n      setSelectedPlayerEmails([]);\n      setUserSearchKey(prev => prev + 1);\n      setShowConfirmAddModal(false);\n      setManualAddTargetGroupId(\"\");\n      \n      loadRosters();\n  };\n\n  const handleRosterNameChange = (e) => {\n      const val = e.target.value;\n      setNewRosterName(val);\n      if (!groupNameDirty) {\n          setAssociatedGroupName(val);\n      }\n  };\n\n  const handleGroupNameChange = (e) => {\n      setAssociatedGroupName(e.target.value);\n      setGroupNameDirty(true);\n  };\n\n  const handleCreateSubmit = async (e) => {\n    e.preventDefault();\n    if (!newRosterName || !newRosterSeason) {\n      alert(\"Please fill in all fields\");\n      return;\n    }\n    \n    const success = await createRoster(\n        newRosterName, \n        newRosterSeason, \n        newRosterCapacity, \n        isDiscoverable,\n        { createGroup: createAssociatedGroup, groupName: associatedGroupName },\n        addManagerToRoster\n    );\n\n    if (success) {\n      alert(\"Roster created!\");\n      setShowCreateForm(false);\n      setNewRosterName(\"\");\n      setNewRosterSeason(\"\");\n      setNewRosterCapacity(\"20\");\n      setIsDiscoverable(false);\n      setAddManagerToRoster(false);\n      setCreateAssociatedGroup(false);\n      setAssociatedGroupName(\"\");\n      setGroupNameDirty(false);\n      loadRosters();\n      loadMyGroups(); \n    }\n  };\n\n  const handleDeleteRoster = async (rosterId) => {\n    if (window.confirm(\"Delete this roster? This cannot be undone.\")) {\n      const success = await deleteRoster(rosterId);\n      if (success) loadRosters();\n    }\n  };\n\n  const handleRemovePlayer = async (playerSummary) => {\n    if (window.confirm(`Remove ${playerSummary.playerName} from this roster?`)) {\n      const success = await removePlayerFromRoster(selectedRoster.id, playerSummary);\n      if (success) loadRosters();\n    }\n  };\n  \n  const handleDenyRequest = async (request) => {\n     if (window.confirm(`Deny request from ${request.userName}?`)) {\n         await respondToRequest(request, 'deny');\n     }\n  };\n\n  const toggleRequestDetails = async (req) => {\n      if (expandedRequestId === req.id) {\n          setExpandedRequestId(null);\n          setExpandedPlayerDetails(null);\n          return;\n      }\n      \n      setExpandedRequestId(req.id);\n      setLoadingDetails(true);\n      const details = await fetchPlayerDetails(req.userId);\n      setExpandedPlayerDetails(details);\n      setLoadingDetails(false);\n  };\n\n  const openAddToGroupModal = (player) => {\n      setPlayerToAdd(player);\n      setShowAddToGroupModal(true);\n  };\n\n  const confirmAddToGroup = async (groupId) => {\n      if (!playerToAdd) return;\n      const success = await addGroupMembers(groupId, [playerToAdd.email]);\n      if (success) {\n          alert(`${playerToAdd.playerName} added to group!`);\n          setShowAddToGroupModal(false);\n          setPlayerToAdd(null);\n      }\n  };\n\n  if (selectedRoster) {\n    return (\n      <div style={{ textAlign: 'left', maxWidth: '800px', margin: '0 auto' }}>\n        <button \n          onClick={() => setSelectedRoster(null)}\n          style={{ marginBottom: '20px', background: 'none', border: 'none', color: COLORS.primary, cursor: 'pointer', fontSize: '16px' }}\n        >\n          ← Back to Dashboard\n        </button>\n\n        <h2 style={{ margin: '0 0 10px 0' }}>{selectedRoster.name}</h2>\n        <p style={{ color: '#ccc', marginTop: 0 }}>\n          {selectedRoster.season} • {selectedRoster.players?.length || 0} / {selectedRoster.maxCapacity} Players\n          {selectedRoster.isDiscoverable && <span style={{ marginLeft: '10px', fontSize: '12px', backgroundColor: '#28a745', padding: '2px 6px', borderRadius: '4px', color: 'white' }}>Discoverable</span>}\n        </p>\n\n        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '30px', marginTop: '30px' }}>\n          \n          <div>\n            <h3 style={{ borderBottom: `1px solid ${COLORS.border}`, paddingBottom: '10px' }}>Roster</h3>\n            {(!selectedRoster.players || selectedRoster.players.length === 0) ? (\n              <p style={{ fontStyle: 'italic', color: '#888' }}>No players yet.</p>\n            ) : (\n              <ul style={{ listStyle: 'none', padding: 0 }}>\n                {selectedRoster.players.map((player, index) => (\n                  <li key={index} style={{ \n                    display: 'flex', justifyContent: 'space-between', alignItems: 'center',\n                    padding: '10px', backgroundColor: COLORS.sidebar, marginBottom: '5px', borderRadius: '5px', border: `1px solid ${COLORS.border}`\n                  }}>\n                    <div>\n                      <span style={{ fontWeight: 'bold', display: 'block' }}>{player.playerName}</span>\n                      <span style={{ fontSize: '12px', color: '#aaa' }}>{player.email}</span>\n                    </div>\n                    <div style={{ display: 'flex', gap: '5px' }}>\n                        <Button \n                            variant=\"secondary\" \n                            onClick={() => openAddToGroupModal(player)} \n                            style={{ padding: '5px 10px', fontSize: '10px' }}\n                            title=\"Add to a Community Group\"\n                        >\n                            + Group\n                        </Button>\n                        <Button variant=\"danger\" onClick={() => handleRemovePlayer(player)} style={{ padding: '5px 10px', fontSize: '12px' }}>\n                        Remove\n                        </Button>\n                    </div>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </div>\n\n          <div>\n            <h3 style={{ borderBottom: `1px solid ${COLORS.border}`, paddingBottom: '10px' }}>Add Player</h3>\n            <form onSubmit={initiateManualAdd} style={{ backgroundColor: COLORS.sidebar, padding: '20px', borderRadius: '8px' }}>\n              <p style={{ marginTop: 0, fontSize: '14px', marginBottom: '15px' }}>Search for users by name or email to add them to this team.</p>\n              \n              <div style={{ marginBottom: '15px' }}>\n                  <UserSearch \n                      key={userSearchKey}\n                      onSelectionChange={setSelectedPlayerEmails} \n                  />\n              </div>\n              \n              <Button type=\"submit\" style={{ width: '100%' }}>Add Selected to Roster</Button>\n            </form>\n          </div>\n\n        </div>\n\n        {/* NEW: Manual Add Confirmation Modal */}\n        {showConfirmAddModal && (\n            <div style={{\n                position: 'fixed', top: 0, left: 0, width: '100%', height: '100%',\n                backgroundColor: 'rgba(0,0,0,0.7)', display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 2000\n            }}>\n                <div style={{\n                    backgroundColor: '#2c3e50', padding: '30px', borderRadius: '10px', maxWidth: '400px', width: '100%'\n                }}>\n                    <h3 style={{ marginTop: 0, color: 'white' }}>Confirm Add</h3>\n                    <p style={{ color: '#ccc' }}>\n                        You are adding <strong>{selectedPlayerEmails.length}</strong> player(s) to <strong>{selectedRoster.name}</strong>.\n                    </p>\n                    \n                    <div style={{ marginBottom: '20px' }}>\n                        <label style={{ display: 'block', marginBottom: '10px', fontWeight: 'bold' }}>Add to Community Group (Optional):</label>\n                        <select \n                            value={manualAddTargetGroupId} \n                            onChange={(e) => setManualAddTargetGroupId(e.target.value)}\n                            style={{ width: '100%', padding: '10px', borderRadius: '5px' }}\n                        >\n                            <option value=\"\">-- No Group --</option>\n                            {myGroups.map(g => (\n                                <option key={g.id} value={g.id}>{g.name}</option>\n                            ))}\n                        </select>\n                        <p style={{ fontSize: '11px', color: '#aaa', marginTop: '5px' }}>\n                            {manualAddTargetGroupId ? \"Players will also be added to this group.\" : \"Players will only be added to the roster.\"}\n                        </p>\n                    </div>\n\n                    <div style={{ display: 'flex', gap: '10px' }}>\n                        <Button onClick={executeManualAdd} style={{ flex: 1 }}>Add Players</Button>\n                        <Button variant=\"secondary\" onClick={() => setShowConfirmAddModal(false)} style={{ flex: 1 }}>Cancel</Button>\n                    </div>\n                </div>\n            </div>\n        )}\n\n        {/* Existing \"Add To Group\" Modal (Single Player) */}\n        {showAddToGroupModal && (\n            <div style={{\n                position: 'fixed', top: 0, left: 0, width: '100%', height: '100%',\n                backgroundColor: 'rgba(0,0,0,0.7)', display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 2000\n            }}>\n                <div style={{\n                    backgroundColor: '#2c3e50', padding: '30px', borderRadius: '10px', maxWidth: '400px', width: '100%'\n                }}>\n                    <h3 style={{ marginTop: 0, color: 'white' }}>Add {playerToAdd?.playerName} to Group</h3>\n                    <p style={{ color: '#ccc' }}>Select a group to add this player to:</p>\n                    \n                    <div style={{ maxHeight: '200px', overflowY: 'auto', marginBottom: '20px', display: 'grid', gap: '10px' }}>\n                        {myGroups.length === 0 ? (\n                            <p style={{ fontStyle: 'italic', color: '#aaa' }}>You don't manage any groups.</p>\n                        ) : (\n                            myGroups.map(group => (\n                                <button \n                                    key={group.id}\n                                    onClick={() => confirmAddToGroup(group.id)}\n                                    style={{\n                                        padding: '10px', textAlign: 'left', backgroundColor: '#34495e', \n                                        border: `1px solid ${COLORS.border}`, color: 'white', cursor: 'pointer', borderRadius: '5px'\n                                    }}\n                                >\n                                    <strong>{group.name}</strong>\n                                    <br/><span style={{ fontSize: '11px', color: '#aaa' }}>{group.memberDetails?.length || 0} Members</span>\n                                </button>\n                            ))\n                        )}\n                    </div>\n\n                    <Button variant=\"secondary\" onClick={() => { setShowAddToGroupModal(false); setPlayerToAdd(null); }} style={{ width: '100%' }}>\n                        Cancel\n                    </Button>\n                </div>\n            </div>\n        )}\n\n        {/* Approval Confirmation Modal */}\n        {requestToApprove && (\n          <div style={{\n                position: 'fixed', top: 0, left: 0, width: '100%', height: '100%',\n                backgroundColor: 'rgba(0,0,0,0.7)', display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 2000\n            }}>\n                <div style={{\n                    backgroundColor: '#2c3e50', padding: '30px', borderRadius: '10px', maxWidth: '400px', width: '100%'\n                }}>\n                    <h3 style={{ marginTop: 0, color: 'white' }}>Confirm Approval</h3>\n                    <p style={{ color: '#ccc' }}>\n                        You are approving <strong>{requestToApprove.userName}</strong> for <strong>{requestToApprove.rosterName}</strong>.\n                    </p>\n                    \n                    <div style={{ marginBottom: '20px' }}>\n                        <label style={{ display: 'block', marginBottom: '10px', fontWeight: 'bold' }}>Add to Community Group (Optional):</label>\n                        <select \n                            value={targetGroupId} \n                            onChange={(e) => setTargetGroupId(e.target.value)}\n                            style={{ width: '100%', padding: '10px', borderRadius: '5px' }}\n                        >\n                            <option value=\"\">-- No Group --</option>\n                            {myGroups.map(g => (\n                                <option key={g.id} value={g.id}>{g.name}</option>\n                            ))}\n                        </select>\n                        <p style={{ fontSize: '11px', color: '#aaa', marginTop: '5px' }}>\n                            {targetGroupId ? \"User will be added to this group automatically.\" : \"User will only be added to the roster.\"}\n                        </p>\n                    </div>\n\n                    <div style={{ display: 'flex', gap: '10px' }}>\n                        <Button onClick={confirmApproval} style={{ flex: 1 }}>Confirm</Button>\n                        <Button variant=\"secondary\" onClick={() => setRequestToApprove(null)} style={{ flex: 1 }}>Cancel</Button>\n                    </div>\n                </div>\n            </div>\n      )}\n\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ textAlign: 'left', maxWidth: '800px', margin: '0 auto' }}>\n      <h2>Manager Dashboard</h2>\n      <p>Manage your teams and rosters here.</p>\n\n      {incomingRequests.length > 0 && (\n        <div style={{ marginTop: '30px', marginBottom: '40px' }}>\n            <h3 style={{ color: '#61dafb' }}>Incoming Join Requests</h3>\n            <div style={{ display: 'grid', gap: '10px' }}>\n                {incomingRequests.map(req => (\n                    <div key={req.id} style={{\n                        backgroundColor: COLORS.sidebar, padding: '15px', borderRadius: '8px',\n                        border: `1px solid ${COLORS.primary}`\n                    }}>\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                            <div>\n                                <span style={{ fontWeight: 'bold' }}>{req.userName}</span>\n                                <span style={{ color: '#aaa', margin: '0 10px' }}>wants to join</span>\n                                <span style={{ fontWeight: 'bold', color: 'white' }}>{req.rosterName}</span>\n                            </div>\n                            <div style={{ display: 'flex', gap: '10px' }}>\n                                <Button variant=\"secondary\" onClick={() => toggleRequestDetails(req)} style={{ padding: '5px 15px', fontSize: '12px' }}>\n                                    {expandedRequestId === req.id ? \"Hide Details\" : \"View Profile\"}\n                                </Button>\n                                <Button onClick={() => initiateApproval(req)} style={{ padding: '5px 15px', fontSize: '12px' }}>Approve</Button>\n                                <Button variant=\"danger\" onClick={() => handleDenyRequest(req)} style={{ padding: '5px 15px', fontSize: '12px' }}>Deny</Button>\n                            </div>\n                        </div>\n\n                        {expandedRequestId === req.id && (\n                            <div style={{ marginTop: '15px', padding: '15px', backgroundColor: '#333', borderRadius: '5px', border: '1px solid #555' }}>\n                                {loadingDetails ? (\n                                    <p style={{ fontStyle: 'italic', margin: 0 }}>Loading player details...</p>\n                                ) : expandedPlayerDetails ? (\n                                    <div style={{ fontSize: '14px' }}>\n                                        <div style={{ display: 'flex', gap: '15px', marginBottom: '10px' }}>\n                                            <div style={{ width: '50px', height: '50px', backgroundColor: '#555', borderRadius: '50%', overflow: 'hidden', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                                                 {expandedPlayerDetails.photoURL ? <img src={expandedPlayerDetails.photoURL} alt=\"Profile\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} /> : <span>{expandedPlayerDetails.playerName?.charAt(0)}</span>}\n                                            </div>\n                                            <div>\n                                                <strong>{expandedPlayerDetails.playerName}</strong>\n                                                <div style={{ color: '#aaa' }}>{expandedPlayerDetails.email}</div>\n                                                <div style={{ color: '#aaa' }}>{expandedPlayerDetails.phone}</div>\n                                            </div>\n                                        </div>\n                                        \n                                        {expandedPlayerDetails.soccerDetails ? (\n                                            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '10px' }}>\n                                                <div><strong>Positions:</strong> {expandedPlayerDetails.soccerDetails.positions}</div>\n                                                <div><strong>Skill Level:</strong> {expandedPlayerDetails.soccerDetails.skillLevel}</div>\n                                                <div><strong>Years Experience:</strong> {expandedPlayerDetails.soccerDetails.yearsExperience}</div>\n                                                <div><strong>Number:</strong> {expandedPlayerDetails.soccerDetails.playerNumber}</div>\n                                            </div>\n                                        ) : (\n                                            <p style={{ color: '#aaa', fontStyle: 'italic' }}>No soccer details available for this user.</p>\n                                        )}\n                                        \n                                        {expandedPlayerDetails.comments && (\n                                            <div style={{ marginTop: '10px', borderTop: '1px solid #444', paddingTop: '10px' }}>\n                                                <strong>About:</strong> {expandedPlayerDetails.comments}\n                                            </div>\n                                        )}\n                                    </div>\n                                ) : (\n                                    <p style={{ color: '#f88' }}>Failed to load details.</p>\n                                )}\n                            </div>\n                        )}\n                    </div>\n                ))}\n            </div>\n        </div>\n      )}\n\n      <div style={{ marginTop: '30px' }}>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n          <h3>Current Rosters</h3>\n          <Button onClick={() => setShowCreateForm(!showCreateForm)}>\n            {showCreateForm ? \"Cancel\" : \"+ Create New Roster\"}\n          </Button>\n        </div>\n\n        {showCreateForm && (\n          <form onSubmit={handleCreateSubmit} style={{\n            backgroundColor: COLORS.sidebar, padding: '20px', borderRadius: '8px', marginBottom: '20px',\n            border: `1px solid ${COLORS.primary}`\n          }}>\n            <h4 style={{ marginTop: 0, color: 'white' }}>New Roster Details</h4>\n            <div style={{ display: 'flex', gap: '15px', flexWrap: 'wrap' }}>\n              <div style={{ flex: 1, minWidth: '200px' }}>\n                <Input label=\"Roster Name\" placeholder=\"e.g. The Gizmos\" value={newRosterName} onChange={handleRosterNameChange} />\n              </div>\n              <div style={{ flex: 1, minWidth: '150px' }}>\n                <Input label=\"Season\" placeholder=\"e.g. Fall 2025\" value={newRosterSeason} onChange={(e) => setNewRosterSeason(e.target.value)} />\n              </div>\n              <div style={{ width: '100px' }}>\n                <Input label=\"Capacity\" type=\"number\" value={newRosterCapacity} onChange={(e) => setNewRosterCapacity(e.target.value)} />\n              </div>\n            </div>\n            \n            <div style={{ marginBottom: '20px', display: 'flex', flexDirection: 'column', gap: '15px' }}>\n                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n                    <input \n                      type=\"checkbox\" \n                      id=\"discoverableCheck\"\n                      checked={isDiscoverable}\n                      onChange={(e) => setIsDiscoverable(e.target.checked)}\n                      style={{ width: '18px', height: '18px' }}\n                    />\n                    <label htmlFor=\"discoverableCheck\" style={{ cursor: 'pointer' }}>\n                        Make this team <strong>Discoverable</strong> in \"Find Teams\"\n                    </label>\n                </div>\n\n                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n                    <input \n                      type=\"checkbox\" \n                      id=\"createGroupCheck\"\n                      checked={createAssociatedGroup}\n                      onChange={(e) => setCreateAssociatedGroup(e.target.checked)}\n                      style={{ width: '18px', height: '18px' }}\n                    />\n                    <label htmlFor=\"createGroupCheck\" style={{ cursor: 'pointer' }}>\n                        Create a new <strong>Community Group</strong> for this team\n                    </label>\n                </div>\n\n                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n                    <input \n                      type=\"checkbox\" \n                      id=\"addManagerCheck\"\n                      checked={addManagerToRoster}\n                      onChange={(e) => setAddManagerToRoster(e.target.checked)}\n                      style={{ width: '18px', height: '18px' }}\n                    />\n                    <label htmlFor=\"addManagerCheck\" style={{ cursor: 'pointer' }}>\n                        Add <strong>Myself</strong> to this roster\n                    </label>\n                </div>\n            </div>\n            \n            {createAssociatedGroup && (\n                <div style={{ marginBottom: '20px' }}>\n                    <Input \n                        label=\"Group Name\" \n                        placeholder=\"e.g. The Gizmos Community\" \n                        value={associatedGroupName} \n                        onChange={handleGroupNameChange}\n                    />\n                    <p style={{ margin: '5px 0 0 0', fontSize: '12px', color: '#aaa' }}>\n                        By default, this group will be private and not visible to public users.\n                    </p>\n                </div>\n            )}\n            \n            <Button type=\"submit\">Save Roster</Button>\n          </form>\n        )}\n\n        {isLoading ? (\n          <p>Loading rosters...</p>\n        ) : rosters.length === 0 ? (\n          <p style={{ color: '#aaa', fontStyle: 'italic' }}>No rosters found.</p>\n        ) : (\n          <div style={{ display: 'grid', gap: '15px' }}>\n            {rosters.map(roster => (\n              <div key={roster.id} style={{\n                backgroundColor: COLORS.sidebar, padding: '15px', borderRadius: '8px',\n                border: `1px solid ${COLORS.border}`, display: 'flex', justifyContent: 'space-between', alignItems: 'center'\n              }}>\n                <div>\n                  <h4 style={{ margin: 0, color: COLORS.primary }}>{roster.name}</h4>\n                  <p style={{ margin: '5px 0 0 0', fontSize: '14px', color: '#ccc' }}>\n                    {roster.season} • {roster.players?.length || 0} / {roster.maxCapacity} players\n                    {roster.isDiscoverable && <span style={{ marginLeft: '10px', fontSize: '10px', border: '1px solid #555', padding: '2px 4px', borderRadius: '3px' }}>Public</span>}\n                  </p>\n                </div>\n                <div style={{ display: 'flex', gap: '10px' }}>\n                  <Button variant=\"secondary\" onClick={() => setSelectedRoster(roster)} style={{ padding: '5px 15px', fontSize: '12px' }}>\n                    Manage\n                  </Button>\n                  <Button variant=\"danger\" onClick={() => handleDeleteRoster(roster.id)} style={{ padding: '5px 10px', fontSize: '12px' }}>\n                    Delete\n                  </Button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default ManagerDashboard;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,OAAO,KAAQ,wBAAwB,CAChD,MAAO,CAAAC,MAAM,KAAM,iBAAiB,CACpC,MAAO,CAAAC,KAAK,KAAM,gBAAgB,CAClC,OAASC,MAAM,KAAQ,cAAc,CACrC,MAAO,CAAAC,UAAU,KAAM,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtC,QAAS,CAAAC,gBAAgBA,CAAA,CAAG,CAC1B,KAAM,CACJC,YAAY,CAAEC,YAAY,CAAEC,YAAY,CAAEC,iBAAiB,CAAEC,sBAAsB,CACnFC,2BAA2B,CAAEC,gBAAgB,CAAEC,kBAAkB,CACjEC,eAAe,CAAEC,eAAe,CAAEC,YACpC,CAAC,CAAGpB,OAAO,CAAC,CAAC,CAEb,KAAM,CAACqB,OAAO,CAAEC,UAAU,CAAC,CAAGzB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAC0B,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG3B,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAAC4B,SAAS,CAAEC,YAAY,CAAC,CAAG7B,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAAC8B,cAAc,CAAEC,iBAAiB,CAAC,CAAG/B,QAAQ,CAAC,IAAI,CAAC,CAE1D,KAAM,CAACgC,cAAc,CAAEC,iBAAiB,CAAC,CAAGjC,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACkC,aAAa,CAAEC,gBAAgB,CAAC,CAAGnC,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACoC,eAAe,CAAEC,kBAAkB,CAAC,CAAGrC,QAAQ,CAAC,EAAE,CAAC,CAC1D,KAAM,CAACsC,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGvC,QAAQ,CAAC,IAAI,CAAC,CAChE,KAAM,CAACwC,cAAc,CAAEC,iBAAiB,CAAC,CAAGzC,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAAC0C,kBAAkB,CAAEC,qBAAqB,CAAC,CAAG3C,QAAQ,CAAC,KAAK,CAAC,CAEnE,KAAM,CAAC4C,qBAAqB,CAAEC,wBAAwB,CAAC,CAAG7C,QAAQ,CAAC,KAAK,CAAC,CACzE,KAAM,CAAC8C,mBAAmB,CAAEC,sBAAsB,CAAC,CAAG/C,QAAQ,CAAC,EAAE,CAAC,CAClE,KAAM,CAACgD,cAAc,CAAEC,iBAAiB,CAAC,CAAGjD,QAAQ,CAAC,KAAK,CAAC,CAE3D,KAAM,CAACkD,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGnD,QAAQ,CAAC,EAAE,CAAC,CACpE,KAAM,CAACoD,aAAa,CAAEC,gBAAgB,CAAC,CAAGrD,QAAQ,CAAC,CAAC,CAAC,CAErD,KAAM,CAACsD,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGvD,QAAQ,CAAC,IAAI,CAAC,CAChE,KAAM,CAACwD,qBAAqB,CAAEC,wBAAwB,CAAC,CAAGzD,QAAQ,CAAC,IAAI,CAAC,CACxE,KAAM,CAAC0D,cAAc,CAAEC,iBAAiB,CAAC,CAAG3D,QAAQ,CAAC,KAAK,CAAC,CAE3D;AACA,KAAM,CAAC4D,QAAQ,CAAEC,WAAW,CAAC,CAAG7D,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAAC8D,mBAAmB,CAAEC,sBAAsB,CAAC,CAAG/D,QAAQ,CAAC,KAAK,CAAC,CACrE,KAAM,CAACgE,WAAW,CAAEC,cAAc,CAAC,CAAGjE,QAAQ,CAAC,IAAI,CAAC,CAEpD;AACA,KAAM,CAACkE,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGnE,QAAQ,CAAC,IAAI,CAAC,CAC9D,KAAM,CAACoE,aAAa,CAAEC,gBAAgB,CAAC,CAAGrE,QAAQ,CAAC,EAAE,CAAC,CAEtD;AACA,KAAM,CAACsE,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGvE,QAAQ,CAAC,KAAK,CAAC,CACrE,KAAM,CAACwE,sBAAsB,CAAEC,yBAAyB,CAAC,CAAGzE,QAAQ,CAAC,EAAE,CAAC,CAExE,KAAM,CAAA0E,WAAW,CAAGxE,WAAW,CAAC,SAAY,CAC1C2B,YAAY,CAAC,IAAI,CAAC,CAClB,KAAM,CAAA8C,IAAI,CAAG,KAAM,CAAA9D,YAAY,CAAC,CAAC,CACjCY,UAAU,CAACkD,IAAI,CAAC,CAChB9C,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAAE,CAAChB,YAAY,CAAC,CAAC,CAElB,KAAM,CAAA+D,YAAY,CAAG1E,WAAW,CAAC,SAAY,CACzC,GAAIqB,YAAY,CAAE,CACd,KAAM,CAAAsD,MAAM,CAAG,KAAM,CAAAxD,eAAe,CAACE,YAAY,CAACuD,GAAG,CAAC,CACtDjB,WAAW,CAACgB,MAAM,CAAC,CACvB,CACJ,CAAC,CAAE,CAACxD,eAAe,CAAEE,YAAY,CAAC,CAAC,CAEnCtB,SAAS,CAAC,IAAM,CACdyE,WAAW,CAAC,CAAC,CACbE,YAAY,CAAC,CAAC,CAEd,KAAM,CAAAG,WAAW,CAAG7D,2BAA2B,CAAE8D,QAAQ,EAAK,CAC5DrD,mBAAmB,CAACqD,QAAQ,CAAC,CAC/B,CAAC,CAAC,CAEF,MAAO,IAAM,CACX,GAAID,WAAW,CAAEA,WAAW,CAAC,CAAC,CAChC,CAAC,CACH,CAAC,CAAE,CAACL,WAAW,CAAEE,YAAY,CAAE1D,2BAA2B,CAAC,CAAC,CAE5DjB,SAAS,CAAC,IAAM,CACd,GAAI6B,cAAc,CAAE,CAClB,KAAM,CAAAmD,OAAO,CAAGzD,OAAO,CAAC0D,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACC,EAAE,GAAKtD,cAAc,CAACsD,EAAE,CAAC,CAC7D,GAAIH,OAAO,EAAIA,OAAO,GAAKnD,cAAc,CAAEC,iBAAiB,CAACkD,OAAO,CAAC,CACvE,CACF,CAAC,CAAE,CAACzD,OAAO,CAAEM,cAAc,CAAC,CAAC,CAE7B,KAAM,CAAAuD,gBAAgB,CAAIC,GAAG,EAAK,CAC9BnB,mBAAmB,CAACmB,GAAG,CAAC,CACxB,KAAM,CAAAC,UAAU,CAAG3B,QAAQ,CAACsB,IAAI,CAACM,CAAC,EAAIA,CAAC,CAACC,kBAAkB,GAAKH,GAAG,CAACI,QAAQ,CAAC,CAC5ErB,gBAAgB,CAACkB,UAAU,CAAGA,UAAU,CAACH,EAAE,CAAG,EAAE,CAAC,CACrD,CAAC,CAED,KAAM,CAAAO,eAAe,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CAACzB,gBAAgB,CAAE,OACvB,KAAM,CAAA/C,gBAAgB,CAAC+C,gBAAgB,CAAE,SAAS,CAAEE,aAAa,EAAI,IAAI,CAAC,CAC1EM,WAAW,CAAC,CAAC,CACbP,mBAAmB,CAAC,IAAI,CAAC,CACzBE,gBAAgB,CAAC,EAAE,CAAC,CACxB,CAAC,CAED;AACA,KAAM,CAAAuB,iBAAiB,CAAIC,CAAC,EAAK,CAC7BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI5C,oBAAoB,CAAC6C,MAAM,GAAK,CAAC,CAAE,OAEvC;AACA,KAAM,CAAAR,UAAU,CAAG3B,QAAQ,CAACsB,IAAI,CAACM,CAAC,EAAIA,CAAC,CAACC,kBAAkB,GAAK3D,cAAc,CAACsD,EAAE,CAAC,CACjFX,yBAAyB,CAACc,UAAU,CAAGA,UAAU,CAACH,EAAE,CAAG,EAAE,CAAC,CAE1Db,sBAAsB,CAAC,IAAI,CAAC,CAChC,CAAC,CAED,KAAM,CAAAyB,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACjC;AACA,IAAK,KAAM,CAAAC,KAAK,GAAI,CAAA/C,oBAAoB,CAAE,CACtC,KAAM,CAAAlC,iBAAiB,CAACc,cAAc,CAACsD,EAAE,CAAEa,KAAK,CAAC,CACrD,CAEA;AACA,GAAIzB,sBAAsB,CAAE,CACxB,KAAM,CAAAlD,eAAe,CAACkD,sBAAsB,CAAEtB,oBAAoB,CAAC,CACvE,CAEAgD,KAAK,CAAC,6BAA6B,CAAC,CAEpC;AACA/C,uBAAuB,CAAC,EAAE,CAAC,CAC3BE,gBAAgB,CAAC8C,IAAI,EAAIA,IAAI,CAAG,CAAC,CAAC,CAClC5B,sBAAsB,CAAC,KAAK,CAAC,CAC7BE,yBAAyB,CAAC,EAAE,CAAC,CAE7BC,WAAW,CAAC,CAAC,CACjB,CAAC,CAED,KAAM,CAAA0B,sBAAsB,CAAIP,CAAC,EAAK,CAClC,KAAM,CAAAQ,GAAG,CAAGR,CAAC,CAACS,MAAM,CAACC,KAAK,CAC1BpE,gBAAgB,CAACkE,GAAG,CAAC,CACrB,GAAI,CAACrD,cAAc,CAAE,CACjBD,sBAAsB,CAACsD,GAAG,CAAC,CAC/B,CACJ,CAAC,CAED,KAAM,CAAAG,qBAAqB,CAAIX,CAAC,EAAK,CACjC9C,sBAAsB,CAAC8C,CAAC,CAACS,MAAM,CAACC,KAAK,CAAC,CACtCtD,iBAAiB,CAAC,IAAI,CAAC,CAC3B,CAAC,CAED,KAAM,CAAAwD,kBAAkB,CAAG,KAAO,CAAAZ,CAAC,EAAK,CACtCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CAAC5D,aAAa,EAAI,CAACE,eAAe,CAAE,CACtC8D,KAAK,CAAC,2BAA2B,CAAC,CAClC,OACF,CAEA,KAAM,CAAAQ,OAAO,CAAG,KAAM,CAAA5F,YAAY,CAC9BoB,aAAa,CACbE,eAAe,CACfE,iBAAiB,CACjBE,cAAc,CACd,CAAEmE,WAAW,CAAE/D,qBAAqB,CAAEgE,SAAS,CAAE9D,mBAAoB,CAAC,CACtEJ,kBACJ,CAAC,CAED,GAAIgE,OAAO,CAAE,CACXR,KAAK,CAAC,iBAAiB,CAAC,CACxBjE,iBAAiB,CAAC,KAAK,CAAC,CACxBE,gBAAgB,CAAC,EAAE,CAAC,CACpBE,kBAAkB,CAAC,EAAE,CAAC,CACtBE,oBAAoB,CAAC,IAAI,CAAC,CAC1BE,iBAAiB,CAAC,KAAK,CAAC,CACxBE,qBAAqB,CAAC,KAAK,CAAC,CAC5BE,wBAAwB,CAAC,KAAK,CAAC,CAC/BE,sBAAsB,CAAC,EAAE,CAAC,CAC1BE,iBAAiB,CAAC,KAAK,CAAC,CACxByB,WAAW,CAAC,CAAC,CACbE,YAAY,CAAC,CAAC,CAChB,CACF,CAAC,CAED,KAAM,CAAAiC,kBAAkB,CAAG,KAAO,CAAAnB,QAAQ,EAAK,CAC7C,GAAIoB,MAAM,CAACC,OAAO,CAAC,4CAA4C,CAAC,CAAE,CAChE,KAAM,CAAAL,OAAO,CAAG,KAAM,CAAA3F,YAAY,CAAC2E,QAAQ,CAAC,CAC5C,GAAIgB,OAAO,CAAEhC,WAAW,CAAC,CAAC,CAC5B,CACF,CAAC,CAED,KAAM,CAAAsC,kBAAkB,CAAG,KAAO,CAAAC,aAAa,EAAK,CAClD,GAAIH,MAAM,CAACC,OAAO,WAAAG,MAAA,CAAWD,aAAa,CAACE,UAAU,sBAAoB,CAAC,CAAE,CAC1E,KAAM,CAAAT,OAAO,CAAG,KAAM,CAAAzF,sBAAsB,CAACa,cAAc,CAACsD,EAAE,CAAE6B,aAAa,CAAC,CAC9E,GAAIP,OAAO,CAAEhC,WAAW,CAAC,CAAC,CAC5B,CACF,CAAC,CAED,KAAM,CAAA0C,iBAAiB,CAAG,KAAO,CAAAC,OAAO,EAAK,CAC1C,GAAIP,MAAM,CAACC,OAAO,sBAAAG,MAAA,CAAsBG,OAAO,CAACC,QAAQ,KAAG,CAAC,CAAE,CAC1D,KAAM,CAAAnG,gBAAgB,CAACkG,OAAO,CAAE,MAAM,CAAC,CAC3C,CACH,CAAC,CAED,KAAM,CAAAE,oBAAoB,CAAG,KAAO,CAAAjC,GAAG,EAAK,CACxC,GAAIhC,iBAAiB,GAAKgC,GAAG,CAACF,EAAE,CAAE,CAC9B7B,oBAAoB,CAAC,IAAI,CAAC,CAC1BE,wBAAwB,CAAC,IAAI,CAAC,CAC9B,OACJ,CAEAF,oBAAoB,CAAC+B,GAAG,CAACF,EAAE,CAAC,CAC5BzB,iBAAiB,CAAC,IAAI,CAAC,CACvB,KAAM,CAAA6D,OAAO,CAAG,KAAM,CAAApG,kBAAkB,CAACkE,GAAG,CAACmC,MAAM,CAAC,CACpDhE,wBAAwB,CAAC+D,OAAO,CAAC,CACjC7D,iBAAiB,CAAC,KAAK,CAAC,CAC5B,CAAC,CAED,KAAM,CAAA+D,mBAAmB,CAAIC,MAAM,EAAK,CACpC1D,cAAc,CAAC0D,MAAM,CAAC,CACtB5D,sBAAsB,CAAC,IAAI,CAAC,CAChC,CAAC,CAED,KAAM,CAAA6D,iBAAiB,CAAG,KAAO,CAAAC,OAAO,EAAK,CACzC,GAAI,CAAC7D,WAAW,CAAE,OAClB,KAAM,CAAA0C,OAAO,CAAG,KAAM,CAAApF,eAAe,CAACuG,OAAO,CAAE,CAAC7D,WAAW,CAACiC,KAAK,CAAC,CAAC,CACnE,GAAIS,OAAO,CAAE,CACTR,KAAK,IAAAgB,MAAA,CAAIlD,WAAW,CAACmD,UAAU,oBAAkB,CAAC,CAClDpD,sBAAsB,CAAC,KAAK,CAAC,CAC7BE,cAAc,CAAC,IAAI,CAAC,CACxB,CACJ,CAAC,CAED,GAAInC,cAAc,CAAE,KAAAgG,qBAAA,CAClB,mBACEnH,KAAA,QAAKoH,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAM,CAAEC,QAAQ,CAAE,OAAO,CAAEC,MAAM,CAAE,QAAS,CAAE,CAAAC,QAAA,eACrE1H,IAAA,WACE2H,OAAO,CAAEA,CAAA,GAAMrG,iBAAiB,CAAC,IAAI,CAAE,CACvCgG,KAAK,CAAE,CAAEM,YAAY,CAAE,MAAM,CAAEC,UAAU,CAAE,MAAM,CAAEC,MAAM,CAAE,MAAM,CAAEC,KAAK,CAAElI,MAAM,CAACmI,OAAO,CAAEC,MAAM,CAAE,SAAS,CAAEC,QAAQ,CAAE,MAAO,CAAE,CAAAR,QAAA,CACjI,0BAED,CAAQ,CAAC,cAET1H,IAAA,OAAIsH,KAAK,CAAE,CAAEG,MAAM,CAAE,YAAa,CAAE,CAAAC,QAAA,CAAErG,cAAc,CAAC8G,IAAI,CAAK,CAAC,cAC/DjI,KAAA,MAAGoH,KAAK,CAAE,CAAES,KAAK,CAAE,MAAM,CAAEK,SAAS,CAAE,CAAE,CAAE,CAAAV,QAAA,EACvCrG,cAAc,CAACgH,MAAM,CAAC,UAAG,CAAC,EAAAhB,qBAAA,CAAAhG,cAAc,CAACiH,OAAO,UAAAjB,qBAAA,iBAAtBA,qBAAA,CAAwB/B,MAAM,GAAI,CAAC,CAAC,KAAG,CAACjE,cAAc,CAACkH,WAAW,CAAC,UAC9F,CAAClH,cAAc,CAACU,cAAc,eAAI/B,IAAA,SAAMsH,KAAK,CAAE,CAAEkB,UAAU,CAAE,MAAM,CAAEN,QAAQ,CAAE,MAAM,CAAEO,eAAe,CAAE,SAAS,CAAEC,OAAO,CAAE,SAAS,CAAEC,YAAY,CAAE,KAAK,CAAEZ,KAAK,CAAE,OAAQ,CAAE,CAAAL,QAAA,CAAC,cAAY,CAAM,CAAC,EAChM,CAAC,cAEJxH,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEC,mBAAmB,CAAE,SAAS,CAAEC,GAAG,CAAE,MAAM,CAAEV,SAAS,CAAE,MAAO,CAAE,CAAAV,QAAA,eAE9FxH,KAAA,QAAAwH,QAAA,eACE1H,IAAA,OAAIsH,KAAK,CAAE,CAAEyB,YAAY,cAAAtC,MAAA,CAAe5G,MAAM,CAACiI,MAAM,CAAE,CAAEkB,aAAa,CAAE,MAAO,CAAE,CAAAtB,QAAA,CAAC,QAAM,CAAI,CAAC,CAC3F,CAACrG,cAAc,CAACiH,OAAO,EAAIjH,cAAc,CAACiH,OAAO,CAAChD,MAAM,GAAK,CAAC,cAC9DtF,IAAA,MAAGsH,KAAK,CAAE,CAAE2B,SAAS,CAAE,QAAQ,CAAElB,KAAK,CAAE,MAAO,CAAE,CAAAL,QAAA,CAAC,iBAAe,CAAG,CAAC,cAErE1H,IAAA,OAAIsH,KAAK,CAAE,CAAE4B,SAAS,CAAE,MAAM,CAAER,OAAO,CAAE,CAAE,CAAE,CAAAhB,QAAA,CAC1CrG,cAAc,CAACiH,OAAO,CAACa,GAAG,CAAC,CAACjC,MAAM,CAAEkC,KAAK,gBACxClJ,KAAA,OAAgBoH,KAAK,CAAE,CACrBsB,OAAO,CAAE,MAAM,CAAES,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QAAQ,CACtEZ,OAAO,CAAE,MAAM,CAAED,eAAe,CAAE5I,MAAM,CAAC0J,OAAO,CAAE3B,YAAY,CAAE,KAAK,CAAEe,YAAY,CAAE,KAAK,CAAEb,MAAM,cAAArB,MAAA,CAAe5G,MAAM,CAACiI,MAAM,CAChI,CAAE,CAAAJ,QAAA,eACAxH,KAAA,QAAAwH,QAAA,eACE1H,IAAA,SAAMsH,KAAK,CAAE,CAAEkC,UAAU,CAAE,MAAM,CAAEZ,OAAO,CAAE,OAAQ,CAAE,CAAAlB,QAAA,CAAER,MAAM,CAACR,UAAU,CAAO,CAAC,cACjF1G,IAAA,SAAMsH,KAAK,CAAE,CAAEY,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,MAAO,CAAE,CAAAL,QAAA,CAAER,MAAM,CAAC1B,KAAK,CAAO,CAAC,EACpE,CAAC,cACNtF,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,KAAM,CAAE,CAAApB,QAAA,eACxC1H,IAAA,CAACL,MAAM,EACH8J,OAAO,CAAC,WAAW,CACnB9B,OAAO,CAAEA,CAAA,GAAMV,mBAAmB,CAACC,MAAM,CAAE,CAC3CI,KAAK,CAAE,CAAEoB,OAAO,CAAE,UAAU,CAAER,QAAQ,CAAE,MAAO,CAAE,CACjDwB,KAAK,CAAC,0BAA0B,CAAAhC,QAAA,CACnC,SAED,CAAQ,CAAC,cACT1H,IAAA,CAACL,MAAM,EAAC8J,OAAO,CAAC,QAAQ,CAAC9B,OAAO,CAAEA,CAAA,GAAMpB,kBAAkB,CAACW,MAAM,CAAE,CAACI,KAAK,CAAE,CAAEoB,OAAO,CAAE,UAAU,CAAER,QAAQ,CAAE,MAAO,CAAE,CAAAR,QAAA,CAAC,QAEtH,CAAQ,CAAC,EACR,CAAC,GApBC0B,KAqBL,CACL,CAAC,CACA,CACL,EACE,CAAC,cAENlJ,KAAA,QAAAwH,QAAA,eACE1H,IAAA,OAAIsH,KAAK,CAAE,CAAEyB,YAAY,cAAAtC,MAAA,CAAe5G,MAAM,CAACiI,MAAM,CAAE,CAAEkB,aAAa,CAAE,MAAO,CAAE,CAAAtB,QAAA,CAAC,YAAU,CAAI,CAAC,cACjGxH,KAAA,SAAMyJ,QAAQ,CAAExE,iBAAkB,CAACmC,KAAK,CAAE,CAAEmB,eAAe,CAAE5I,MAAM,CAAC0J,OAAO,CAAEb,OAAO,CAAE,MAAM,CAAEC,YAAY,CAAE,KAAM,CAAE,CAAAjB,QAAA,eAClH1H,IAAA,MAAGsH,KAAK,CAAE,CAAEc,SAAS,CAAE,CAAC,CAAEF,QAAQ,CAAE,MAAM,CAAEN,YAAY,CAAE,MAAO,CAAE,CAAAF,QAAA,CAAC,6DAA2D,CAAG,CAAC,cAEnI1H,IAAA,QAAKsH,KAAK,CAAE,CAAEM,YAAY,CAAE,MAAO,CAAE,CAAAF,QAAA,cACjC1H,IAAA,CAACF,UAAU,EAEP8J,iBAAiB,CAAElH,uBAAwB,EADtCC,aAER,CAAC,CACD,CAAC,cAEN3C,IAAA,CAACL,MAAM,EAACkK,IAAI,CAAC,QAAQ,CAACvC,KAAK,CAAE,CAAEwC,KAAK,CAAE,MAAO,CAAE,CAAApC,QAAA,CAAC,wBAAsB,CAAQ,CAAC,EAC3E,CAAC,EACJ,CAAC,EAEH,CAAC,CAGL7D,mBAAmB,eAChB7D,IAAA,QAAKsH,KAAK,CAAE,CACRyC,QAAQ,CAAE,OAAO,CAAEC,GAAG,CAAE,CAAC,CAAEC,IAAI,CAAE,CAAC,CAAEH,KAAK,CAAE,MAAM,CAAEI,MAAM,CAAE,MAAM,CACjEzB,eAAe,CAAE,iBAAiB,CAAEG,OAAO,CAAE,MAAM,CAAES,cAAc,CAAE,QAAQ,CAAEC,UAAU,CAAE,QAAQ,CAAEa,MAAM,CAAE,IACjH,CAAE,CAAAzC,QAAA,cACExH,KAAA,QAAKoH,KAAK,CAAE,CACRmB,eAAe,CAAE,SAAS,CAAEC,OAAO,CAAE,MAAM,CAAEC,YAAY,CAAE,MAAM,CAAEnB,QAAQ,CAAE,OAAO,CAAEsC,KAAK,CAAE,MACjG,CAAE,CAAApC,QAAA,eACE1H,IAAA,OAAIsH,KAAK,CAAE,CAAEc,SAAS,CAAE,CAAC,CAAEL,KAAK,CAAE,OAAQ,CAAE,CAAAL,QAAA,CAAC,aAAW,CAAI,CAAC,cAC7DxH,KAAA,MAAGoH,KAAK,CAAE,CAAES,KAAK,CAAE,MAAO,CAAE,CAAAL,QAAA,EAAC,iBACV,cAAA1H,IAAA,WAAA0H,QAAA,CAASjF,oBAAoB,CAAC6C,MAAM,CAAS,CAAC,iBAAc,cAAAtF,IAAA,WAAA0H,QAAA,CAASrG,cAAc,CAAC8G,IAAI,CAAS,CAAC,IACrH,EAAG,CAAC,cAEJjI,KAAA,QAAKoH,KAAK,CAAE,CAAEM,YAAY,CAAE,MAAO,CAAE,CAAAF,QAAA,eACjC1H,IAAA,UAAOsH,KAAK,CAAE,CAAEsB,OAAO,CAAE,OAAO,CAAEhB,YAAY,CAAE,MAAM,CAAE4B,UAAU,CAAE,MAAO,CAAE,CAAA9B,QAAA,CAAC,oCAAkC,CAAO,CAAC,cACxHxH,KAAA,WACI4F,KAAK,CAAE/B,sBAAuB,CAC9BqG,QAAQ,CAAGhF,CAAC,EAAKpB,yBAAyB,CAACoB,CAAC,CAACS,MAAM,CAACC,KAAK,CAAE,CAC3DwB,KAAK,CAAE,CAAEwC,KAAK,CAAE,MAAM,CAAEpB,OAAO,CAAE,MAAM,CAAEC,YAAY,CAAE,KAAM,CAAE,CAAAjB,QAAA,eAE/D1H,IAAA,WAAQ8F,KAAK,CAAC,EAAE,CAAA4B,QAAA,CAAC,gBAAc,CAAQ,CAAC,CACvCvE,QAAQ,CAACgG,GAAG,CAACpE,CAAC,eACX/E,IAAA,WAAmB8F,KAAK,CAAEf,CAAC,CAACJ,EAAG,CAAA+C,QAAA,CAAE3C,CAAC,CAACoD,IAAI,EAA1BpD,CAAC,CAACJ,EAAiC,CACnD,CAAC,EACE,CAAC,cACT3E,IAAA,MAAGsH,KAAK,CAAE,CAAEY,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,MAAM,CAAEK,SAAS,CAAE,KAAM,CAAE,CAAAV,QAAA,CAC3D3D,sBAAsB,CAAG,2CAA2C,CAAG,2CAA2C,CACpH,CAAC,EACH,CAAC,cAEN7D,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,MAAO,CAAE,CAAApB,QAAA,eACzC1H,IAAA,CAACL,MAAM,EAACgI,OAAO,CAAEpC,gBAAiB,CAAC+B,KAAK,CAAE,CAAE+C,IAAI,CAAE,CAAE,CAAE,CAAA3C,QAAA,CAAC,aAAW,CAAQ,CAAC,cAC3E1H,IAAA,CAACL,MAAM,EAAC8J,OAAO,CAAC,WAAW,CAAC9B,OAAO,CAAEA,CAAA,GAAM7D,sBAAsB,CAAC,KAAK,CAAE,CAACwD,KAAK,CAAE,CAAE+C,IAAI,CAAE,CAAE,CAAE,CAAA3C,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC5G,CAAC,EACL,CAAC,CACL,CACR,CAGArE,mBAAmB,eAChBrD,IAAA,QAAKsH,KAAK,CAAE,CACRyC,QAAQ,CAAE,OAAO,CAAEC,GAAG,CAAE,CAAC,CAAEC,IAAI,CAAE,CAAC,CAAEH,KAAK,CAAE,MAAM,CAAEI,MAAM,CAAE,MAAM,CACjEzB,eAAe,CAAE,iBAAiB,CAAEG,OAAO,CAAE,MAAM,CAAES,cAAc,CAAE,QAAQ,CAAEC,UAAU,CAAE,QAAQ,CAAEa,MAAM,CAAE,IACjH,CAAE,CAAAzC,QAAA,cACExH,KAAA,QAAKoH,KAAK,CAAE,CACRmB,eAAe,CAAE,SAAS,CAAEC,OAAO,CAAE,MAAM,CAAEC,YAAY,CAAE,MAAM,CAAEnB,QAAQ,CAAE,OAAO,CAAEsC,KAAK,CAAE,MACjG,CAAE,CAAApC,QAAA,eACExH,KAAA,OAAIoH,KAAK,CAAE,CAAEc,SAAS,CAAE,CAAC,CAAEL,KAAK,CAAE,OAAQ,CAAE,CAAAL,QAAA,EAAC,MAAI,CAACnE,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEmD,UAAU,CAAC,WAAS,EAAI,CAAC,cACxF1G,IAAA,MAAGsH,KAAK,CAAE,CAAES,KAAK,CAAE,MAAO,CAAE,CAAAL,QAAA,CAAC,uCAAqC,CAAG,CAAC,cAEtE1H,IAAA,QAAKsH,KAAK,CAAE,CAAEgD,SAAS,CAAE,OAAO,CAAEC,SAAS,CAAE,MAAM,CAAE3C,YAAY,CAAE,MAAM,CAAEgB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,MAAO,CAAE,CAAApB,QAAA,CACrGvE,QAAQ,CAACmC,MAAM,GAAK,CAAC,cAClBtF,IAAA,MAAGsH,KAAK,CAAE,CAAE2B,SAAS,CAAE,QAAQ,CAAElB,KAAK,CAAE,MAAO,CAAE,CAAAL,QAAA,CAAC,8BAA4B,CAAG,CAAC,CAElFvE,QAAQ,CAACgG,GAAG,CAACqB,KAAK,OAAAC,oBAAA,oBACdvK,KAAA,WAEIyH,OAAO,CAAEA,CAAA,GAAMR,iBAAiB,CAACqD,KAAK,CAAC7F,EAAE,CAAE,CAC3C2C,KAAK,CAAE,CACHoB,OAAO,CAAE,MAAM,CAAEnB,SAAS,CAAE,MAAM,CAAEkB,eAAe,CAAE,SAAS,CAC9DX,MAAM,cAAArB,MAAA,CAAe5G,MAAM,CAACiI,MAAM,CAAE,CAAEC,KAAK,CAAE,OAAO,CAAEE,MAAM,CAAE,SAAS,CAAEU,YAAY,CAAE,KAC3F,CAAE,CAAAjB,QAAA,eAEF1H,IAAA,WAAA0H,QAAA,CAAS8C,KAAK,CAACrC,IAAI,CAAS,CAAC,cAC7BnI,IAAA,QAAI,CAAC,cAAAE,KAAA,SAAMoH,KAAK,CAAE,CAAEY,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,MAAO,CAAE,CAAAL,QAAA,EAAE,EAAA+C,oBAAA,CAAAD,KAAK,CAACE,aAAa,UAAAD,oBAAA,iBAAnBA,oBAAA,CAAqBnF,MAAM,GAAI,CAAC,CAAC,UAAQ,EAAM,CAAC,GARnGkF,KAAK,CAAC7F,EASP,CAAC,EACZ,CACJ,CACA,CAAC,cAEN3E,IAAA,CAACL,MAAM,EAAC8J,OAAO,CAAC,WAAW,CAAC9B,OAAO,CAAEA,CAAA,GAAM,CAAErE,sBAAsB,CAAC,KAAK,CAAC,CAAEE,cAAc,CAAC,IAAI,CAAC,CAAE,CAAE,CAAC8D,KAAK,CAAE,CAAEwC,KAAK,CAAE,MAAO,CAAE,CAAApC,QAAA,CAAC,QAE/H,CAAQ,CAAC,EACR,CAAC,CACL,CACR,CAGAjE,gBAAgB,eACfzD,IAAA,QAAKsH,KAAK,CAAE,CACNyC,QAAQ,CAAE,OAAO,CAAEC,GAAG,CAAE,CAAC,CAAEC,IAAI,CAAE,CAAC,CAAEH,KAAK,CAAE,MAAM,CAAEI,MAAM,CAAE,MAAM,CACjEzB,eAAe,CAAE,iBAAiB,CAAEG,OAAO,CAAE,MAAM,CAAES,cAAc,CAAE,QAAQ,CAAEC,UAAU,CAAE,QAAQ,CAAEa,MAAM,CAAE,IACjH,CAAE,CAAAzC,QAAA,cACExH,KAAA,QAAKoH,KAAK,CAAE,CACRmB,eAAe,CAAE,SAAS,CAAEC,OAAO,CAAE,MAAM,CAAEC,YAAY,CAAE,MAAM,CAAEnB,QAAQ,CAAE,OAAO,CAAEsC,KAAK,CAAE,MACjG,CAAE,CAAApC,QAAA,eACE1H,IAAA,OAAIsH,KAAK,CAAE,CAAEc,SAAS,CAAE,CAAC,CAAEL,KAAK,CAAE,OAAQ,CAAE,CAAAL,QAAA,CAAC,kBAAgB,CAAI,CAAC,cAClExH,KAAA,MAAGoH,KAAK,CAAE,CAAES,KAAK,CAAE,MAAO,CAAE,CAAAL,QAAA,EAAC,oBACP,cAAA1H,IAAA,WAAA0H,QAAA,CAASjE,gBAAgB,CAACoD,QAAQ,CAAS,CAAC,QAAK,cAAA7G,IAAA,WAAA0H,QAAA,CAASjE,gBAAgB,CAACkH,UAAU,CAAS,CAAC,IACrH,EAAG,CAAC,cAEJzK,KAAA,QAAKoH,KAAK,CAAE,CAAEM,YAAY,CAAE,MAAO,CAAE,CAAAF,QAAA,eACjC1H,IAAA,UAAOsH,KAAK,CAAE,CAAEsB,OAAO,CAAE,OAAO,CAAEhB,YAAY,CAAE,MAAM,CAAE4B,UAAU,CAAE,MAAO,CAAE,CAAA9B,QAAA,CAAC,oCAAkC,CAAO,CAAC,cACxHxH,KAAA,WACI4F,KAAK,CAAEnC,aAAc,CACrByG,QAAQ,CAAGhF,CAAC,EAAKxB,gBAAgB,CAACwB,CAAC,CAACS,MAAM,CAACC,KAAK,CAAE,CAClDwB,KAAK,CAAE,CAAEwC,KAAK,CAAE,MAAM,CAAEpB,OAAO,CAAE,MAAM,CAAEC,YAAY,CAAE,KAAM,CAAE,CAAAjB,QAAA,eAE/D1H,IAAA,WAAQ8F,KAAK,CAAC,EAAE,CAAA4B,QAAA,CAAC,gBAAc,CAAQ,CAAC,CACvCvE,QAAQ,CAACgG,GAAG,CAACpE,CAAC,eACX/E,IAAA,WAAmB8F,KAAK,CAAEf,CAAC,CAACJ,EAAG,CAAA+C,QAAA,CAAE3C,CAAC,CAACoD,IAAI,EAA1BpD,CAAC,CAACJ,EAAiC,CACnD,CAAC,EACE,CAAC,cACT3E,IAAA,MAAGsH,KAAK,CAAE,CAAEY,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,MAAM,CAAEK,SAAS,CAAE,KAAM,CAAE,CAAAV,QAAA,CAC3D/D,aAAa,CAAG,iDAAiD,CAAG,wCAAwC,CAC9G,CAAC,EACH,CAAC,cAENzD,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,MAAO,CAAE,CAAApB,QAAA,eACzC1H,IAAA,CAACL,MAAM,EAACgI,OAAO,CAAEzC,eAAgB,CAACoC,KAAK,CAAE,CAAE+C,IAAI,CAAE,CAAE,CAAE,CAAA3C,QAAA,CAAC,SAAO,CAAQ,CAAC,cACtE1H,IAAA,CAACL,MAAM,EAAC8J,OAAO,CAAC,WAAW,CAAC9B,OAAO,CAAEA,CAAA,GAAMjE,mBAAmB,CAAC,IAAI,CAAE,CAAC4D,KAAK,CAAE,CAAE+C,IAAI,CAAE,CAAE,CAAE,CAAA3C,QAAA,CAAC,QAAM,CAAQ,CAAC,EACxG,CAAC,EACL,CAAC,CACL,CACV,EAEI,CAAC,CAEV,CAEA,mBACExH,KAAA,QAAKoH,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAM,CAAEC,QAAQ,CAAE,OAAO,CAAEC,MAAM,CAAE,QAAS,CAAE,CAAAC,QAAA,eACrE1H,IAAA,OAAA0H,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1B1H,IAAA,MAAA0H,QAAA,CAAG,qCAAmC,CAAG,CAAC,CAEzCzG,gBAAgB,CAACqE,MAAM,CAAG,CAAC,eAC1BpF,KAAA,QAAKoH,KAAK,CAAE,CAAEc,SAAS,CAAE,MAAM,CAAER,YAAY,CAAE,MAAO,CAAE,CAAAF,QAAA,eACpD1H,IAAA,OAAIsH,KAAK,CAAE,CAAES,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,wBAAsB,CAAI,CAAC,cAC5D1H,IAAA,QAAKsH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,MAAO,CAAE,CAAApB,QAAA,CACxCzG,gBAAgB,CAACkI,GAAG,CAACtE,GAAG,OAAA+F,qBAAA,oBACrB1K,KAAA,QAAkBoH,KAAK,CAAE,CACrBmB,eAAe,CAAE5I,MAAM,CAAC0J,OAAO,CAAEb,OAAO,CAAE,MAAM,CAAEC,YAAY,CAAE,KAAK,CACrEb,MAAM,cAAArB,MAAA,CAAe5G,MAAM,CAACmI,OAAO,CACvC,CAAE,CAAAN,QAAA,eACExH,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAES,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAA5B,QAAA,eACnFxH,KAAA,QAAAwH,QAAA,eACI1H,IAAA,SAAMsH,KAAK,CAAE,CAAEkC,UAAU,CAAE,MAAO,CAAE,CAAA9B,QAAA,CAAE7C,GAAG,CAACgC,QAAQ,CAAO,CAAC,cAC1D7G,IAAA,SAAMsH,KAAK,CAAE,CAAES,KAAK,CAAE,MAAM,CAAEN,MAAM,CAAE,QAAS,CAAE,CAAAC,QAAA,CAAC,eAAa,CAAM,CAAC,cACtE1H,IAAA,SAAMsH,KAAK,CAAE,CAAEkC,UAAU,CAAE,MAAM,CAAEzB,KAAK,CAAE,OAAQ,CAAE,CAAAL,QAAA,CAAE7C,GAAG,CAAC8F,UAAU,CAAO,CAAC,EAC3E,CAAC,cACNzK,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,MAAO,CAAE,CAAApB,QAAA,eACzC1H,IAAA,CAACL,MAAM,EAAC8J,OAAO,CAAC,WAAW,CAAC9B,OAAO,CAAEA,CAAA,GAAMb,oBAAoB,CAACjC,GAAG,CAAE,CAACyC,KAAK,CAAE,CAAEoB,OAAO,CAAE,UAAU,CAAER,QAAQ,CAAE,MAAO,CAAE,CAAAR,QAAA,CAClH7E,iBAAiB,GAAKgC,GAAG,CAACF,EAAE,CAAG,cAAc,CAAG,cAAc,CAC3D,CAAC,cACT3E,IAAA,CAACL,MAAM,EAACgI,OAAO,CAAEA,CAAA,GAAM/C,gBAAgB,CAACC,GAAG,CAAE,CAACyC,KAAK,CAAE,CAAEoB,OAAO,CAAE,UAAU,CAAER,QAAQ,CAAE,MAAO,CAAE,CAAAR,QAAA,CAAC,SAAO,CAAQ,CAAC,cAChH1H,IAAA,CAACL,MAAM,EAAC8J,OAAO,CAAC,QAAQ,CAAC9B,OAAO,CAAEA,CAAA,GAAMhB,iBAAiB,CAAC9B,GAAG,CAAE,CAACyC,KAAK,CAAE,CAAEoB,OAAO,CAAE,UAAU,CAAER,QAAQ,CAAE,MAAO,CAAE,CAAAR,QAAA,CAAC,MAAI,CAAQ,CAAC,EAC9H,CAAC,EACL,CAAC,CAEL7E,iBAAiB,GAAKgC,GAAG,CAACF,EAAE,eACzB3E,IAAA,QAAKsH,KAAK,CAAE,CAAEc,SAAS,CAAE,MAAM,CAAEM,OAAO,CAAE,MAAM,CAAED,eAAe,CAAE,MAAM,CAAEE,YAAY,CAAE,KAAK,CAAEb,MAAM,CAAE,gBAAiB,CAAE,CAAAJ,QAAA,CACtHzE,cAAc,cACXjD,IAAA,MAAGsH,KAAK,CAAE,CAAE2B,SAAS,CAAE,QAAQ,CAAExB,MAAM,CAAE,CAAE,CAAE,CAAAC,QAAA,CAAC,2BAAyB,CAAG,CAAC,CAC3E3E,qBAAqB,cACrB7C,KAAA,QAAKoH,KAAK,CAAE,CAAEY,QAAQ,CAAE,MAAO,CAAE,CAAAR,QAAA,eAC7BxH,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,MAAM,CAAElB,YAAY,CAAE,MAAO,CAAE,CAAAF,QAAA,eAC/D1H,IAAA,QAAKsH,KAAK,CAAE,CAAEwC,KAAK,CAAE,MAAM,CAAEI,MAAM,CAAE,MAAM,CAAEzB,eAAe,CAAE,MAAM,CAAEE,YAAY,CAAE,KAAK,CAAEkC,QAAQ,CAAE,QAAQ,CAAEjC,OAAO,CAAE,MAAM,CAAES,cAAc,CAAE,QAAQ,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAA5B,QAAA,CAC3K3E,qBAAqB,CAAC+H,QAAQ,cAAG9K,IAAA,QAAK+K,GAAG,CAAEhI,qBAAqB,CAAC+H,QAAS,CAACE,GAAG,CAAC,SAAS,CAAC1D,KAAK,CAAE,CAAEwC,KAAK,CAAE,MAAM,CAAEI,MAAM,CAAE,MAAM,CAAEe,SAAS,CAAE,OAAQ,CAAE,CAAE,CAAC,cAAGjL,IAAA,SAAA0H,QAAA,EAAAkD,qBAAA,CAAO7H,qBAAqB,CAAC2D,UAAU,UAAAkE,qBAAA,iBAAhCA,qBAAA,CAAkCM,MAAM,CAAC,CAAC,CAAC,CAAO,CAAC,CACvN,CAAC,cACNhL,KAAA,QAAAwH,QAAA,eACI1H,IAAA,WAAA0H,QAAA,CAAS3E,qBAAqB,CAAC2D,UAAU,CAAS,CAAC,cACnD1G,IAAA,QAAKsH,KAAK,CAAE,CAAES,KAAK,CAAE,MAAO,CAAE,CAAAL,QAAA,CAAE3E,qBAAqB,CAACyC,KAAK,CAAM,CAAC,cAClExF,IAAA,QAAKsH,KAAK,CAAE,CAAES,KAAK,CAAE,MAAO,CAAE,CAAAL,QAAA,CAAE3E,qBAAqB,CAACoI,KAAK,CAAM,CAAC,EACjE,CAAC,EACL,CAAC,CAELpI,qBAAqB,CAACqI,aAAa,cAChClL,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEC,mBAAmB,CAAE,SAAS,CAAEC,GAAG,CAAE,MAAO,CAAE,CAAApB,QAAA,eACzExH,KAAA,QAAAwH,QAAA,eAAK1H,IAAA,WAAA0H,QAAA,CAAQ,YAAU,CAAQ,CAAC,IAAC,CAAC3E,qBAAqB,CAACqI,aAAa,CAACC,SAAS,EAAM,CAAC,cACtFnL,KAAA,QAAAwH,QAAA,eAAK1H,IAAA,WAAA0H,QAAA,CAAQ,cAAY,CAAQ,CAAC,IAAC,CAAC3E,qBAAqB,CAACqI,aAAa,CAACE,UAAU,EAAM,CAAC,cACzFpL,KAAA,QAAAwH,QAAA,eAAK1H,IAAA,WAAA0H,QAAA,CAAQ,mBAAiB,CAAQ,CAAC,IAAC,CAAC3E,qBAAqB,CAACqI,aAAa,CAACG,eAAe,EAAM,CAAC,cACnGrL,KAAA,QAAAwH,QAAA,eAAK1H,IAAA,WAAA0H,QAAA,CAAQ,SAAO,CAAQ,CAAC,IAAC,CAAC3E,qBAAqB,CAACqI,aAAa,CAACI,YAAY,EAAM,CAAC,EACrF,CAAC,cAENxL,IAAA,MAAGsH,KAAK,CAAE,CAAES,KAAK,CAAE,MAAM,CAAEkB,SAAS,CAAE,QAAS,CAAE,CAAAvB,QAAA,CAAC,4CAA0C,CAAG,CAClG,CAEA3E,qBAAqB,CAAC0I,QAAQ,eAC3BvL,KAAA,QAAKoH,KAAK,CAAE,CAAEc,SAAS,CAAE,MAAM,CAAEsD,SAAS,CAAE,gBAAgB,CAAEC,UAAU,CAAE,MAAO,CAAE,CAAAjE,QAAA,eAC/E1H,IAAA,WAAA0H,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAAC3E,qBAAqB,CAAC0I,QAAQ,EACtD,CACR,EACA,CAAC,cAENzL,IAAA,MAAGsH,KAAK,CAAE,CAAES,KAAK,CAAE,MAAO,CAAE,CAAAL,QAAA,CAAC,yBAAuB,CAAG,CAC1D,CACA,CACR,GAzDK7C,GAAG,CAACF,EA0DT,CAAC,EACT,CAAC,CACD,CAAC,EACL,CACN,cAEDzE,KAAA,QAAKoH,KAAK,CAAE,CAAEc,SAAS,CAAE,MAAO,CAAE,CAAAV,QAAA,eAChCxH,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAES,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QAAQ,CAAE1B,YAAY,CAAE,MAAO,CAAE,CAAAF,QAAA,eAC3G1H,IAAA,OAAA0H,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxB1H,IAAA,CAACL,MAAM,EAACgI,OAAO,CAAEA,CAAA,GAAMnG,iBAAiB,CAAC,CAACD,cAAc,CAAE,CAAAmG,QAAA,CACvDnG,cAAc,CAAG,QAAQ,CAAG,qBAAqB,CAC5C,CAAC,EACN,CAAC,CAELA,cAAc,eACbrB,KAAA,SAAMyJ,QAAQ,CAAE3D,kBAAmB,CAACsB,KAAK,CAAE,CACzCmB,eAAe,CAAE5I,MAAM,CAAC0J,OAAO,CAAEb,OAAO,CAAE,MAAM,CAAEC,YAAY,CAAE,KAAK,CAAEf,YAAY,CAAE,MAAM,CAC3FE,MAAM,cAAArB,MAAA,CAAe5G,MAAM,CAACmI,OAAO,CACrC,CAAE,CAAAN,QAAA,eACA1H,IAAA,OAAIsH,KAAK,CAAE,CAAEc,SAAS,CAAE,CAAC,CAAEL,KAAK,CAAE,OAAQ,CAAE,CAAAL,QAAA,CAAC,oBAAkB,CAAI,CAAC,cACpExH,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,MAAM,CAAE8C,QAAQ,CAAE,MAAO,CAAE,CAAAlE,QAAA,eAC7D1H,IAAA,QAAKsH,KAAK,CAAE,CAAE+C,IAAI,CAAE,CAAC,CAAEwB,QAAQ,CAAE,OAAQ,CAAE,CAAAnE,QAAA,cACzC1H,IAAA,CAACJ,KAAK,EAACkM,KAAK,CAAC,aAAa,CAACC,WAAW,CAAC,iBAAiB,CAACjG,KAAK,CAAErE,aAAc,CAAC2I,QAAQ,CAAEzE,sBAAuB,CAAE,CAAC,CAChH,CAAC,cACN3F,IAAA,QAAKsH,KAAK,CAAE,CAAE+C,IAAI,CAAE,CAAC,CAAEwB,QAAQ,CAAE,OAAQ,CAAE,CAAAnE,QAAA,cACzC1H,IAAA,CAACJ,KAAK,EAACkM,KAAK,CAAC,QAAQ,CAACC,WAAW,CAAC,gBAAgB,CAACjG,KAAK,CAAEnE,eAAgB,CAACyI,QAAQ,CAAGhF,CAAC,EAAKxD,kBAAkB,CAACwD,CAAC,CAACS,MAAM,CAACC,KAAK,CAAE,CAAE,CAAC,CAC/H,CAAC,cACN9F,IAAA,QAAKsH,KAAK,CAAE,CAAEwC,KAAK,CAAE,OAAQ,CAAE,CAAApC,QAAA,cAC7B1H,IAAA,CAACJ,KAAK,EAACkM,KAAK,CAAC,UAAU,CAACjC,IAAI,CAAC,QAAQ,CAAC/D,KAAK,CAAEjE,iBAAkB,CAACuI,QAAQ,CAAGhF,CAAC,EAAKtD,oBAAoB,CAACsD,CAAC,CAACS,MAAM,CAACC,KAAK,CAAE,CAAE,CAAC,CACtH,CAAC,EACH,CAAC,cAEN5F,KAAA,QAAKoH,KAAK,CAAE,CAAEM,YAAY,CAAE,MAAM,CAAEgB,OAAO,CAAE,MAAM,CAAEoD,aAAa,CAAE,QAAQ,CAAElD,GAAG,CAAE,MAAO,CAAE,CAAApB,QAAA,eACxFxH,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEU,UAAU,CAAE,QAAQ,CAAER,GAAG,CAAE,MAAO,CAAE,CAAApB,QAAA,eAC/D1H,IAAA,UACE6J,IAAI,CAAC,UAAU,CACflF,EAAE,CAAC,mBAAmB,CACtBsH,OAAO,CAAElK,cAAe,CACxBqI,QAAQ,CAAGhF,CAAC,EAAKpD,iBAAiB,CAACoD,CAAC,CAACS,MAAM,CAACoG,OAAO,CAAE,CACrD3E,KAAK,CAAE,CAAEwC,KAAK,CAAE,MAAM,CAAEI,MAAM,CAAE,MAAO,CAAE,CAC1C,CAAC,cACFhK,KAAA,UAAOgM,OAAO,CAAC,mBAAmB,CAAC5E,KAAK,CAAE,CAAEW,MAAM,CAAE,SAAU,CAAE,CAAAP,QAAA,EAAC,iBAC9C,cAAA1H,IAAA,WAAA0H,QAAA,CAAQ,cAAY,CAAQ,CAAC,qBAChD,EAAO,CAAC,EACP,CAAC,cAENxH,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEU,UAAU,CAAE,QAAQ,CAAER,GAAG,CAAE,MAAO,CAAE,CAAApB,QAAA,eAC/D1H,IAAA,UACE6J,IAAI,CAAC,UAAU,CACflF,EAAE,CAAC,kBAAkB,CACrBsH,OAAO,CAAE9J,qBAAsB,CAC/BiI,QAAQ,CAAGhF,CAAC,EAAKhD,wBAAwB,CAACgD,CAAC,CAACS,MAAM,CAACoG,OAAO,CAAE,CAC5D3E,KAAK,CAAE,CAAEwC,KAAK,CAAE,MAAM,CAAEI,MAAM,CAAE,MAAO,CAAE,CAC1C,CAAC,cACFhK,KAAA,UAAOgM,OAAO,CAAC,kBAAkB,CAAC5E,KAAK,CAAE,CAAEW,MAAM,CAAE,SAAU,CAAE,CAAAP,QAAA,EAAC,eAC/C,cAAA1H,IAAA,WAAA0H,QAAA,CAAQ,iBAAe,CAAQ,CAAC,iBACjD,EAAO,CAAC,EACP,CAAC,cAENxH,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEU,UAAU,CAAE,QAAQ,CAAER,GAAG,CAAE,MAAO,CAAE,CAAApB,QAAA,eAC/D1H,IAAA,UACE6J,IAAI,CAAC,UAAU,CACflF,EAAE,CAAC,iBAAiB,CACpBsH,OAAO,CAAEhK,kBAAmB,CAC5BmI,QAAQ,CAAGhF,CAAC,EAAKlD,qBAAqB,CAACkD,CAAC,CAACS,MAAM,CAACoG,OAAO,CAAE,CACzD3E,KAAK,CAAE,CAAEwC,KAAK,CAAE,MAAM,CAAEI,MAAM,CAAE,MAAO,CAAE,CAC1C,CAAC,cACFhK,KAAA,UAAOgM,OAAO,CAAC,iBAAiB,CAAC5E,KAAK,CAAE,CAAEW,MAAM,CAAE,SAAU,CAAE,CAAAP,QAAA,EAAC,MACvD,cAAA1H,IAAA,WAAA0H,QAAA,CAAQ,QAAM,CAAQ,CAAC,kBAC/B,EAAO,CAAC,EACP,CAAC,EACL,CAAC,CAELvF,qBAAqB,eAClBjC,KAAA,QAAKoH,KAAK,CAAE,CAAEM,YAAY,CAAE,MAAO,CAAE,CAAAF,QAAA,eACjC1H,IAAA,CAACJ,KAAK,EACFkM,KAAK,CAAC,YAAY,CAClBC,WAAW,CAAC,2BAA2B,CACvCjG,KAAK,CAAEzD,mBAAoB,CAC3B+H,QAAQ,CAAErE,qBAAsB,CACnC,CAAC,cACF/F,IAAA,MAAGsH,KAAK,CAAE,CAAEG,MAAM,CAAE,WAAW,CAAES,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,MAAO,CAAE,CAAAL,QAAA,CAAC,yEAEpE,CAAG,CAAC,EACH,CACR,cAED1H,IAAA,CAACL,MAAM,EAACkK,IAAI,CAAC,QAAQ,CAAAnC,QAAA,CAAC,aAAW,CAAQ,CAAC,EACtC,CACP,CAEAvG,SAAS,cACRnB,IAAA,MAAA0H,QAAA,CAAG,oBAAkB,CAAG,CAAC,CACvB3G,OAAO,CAACuE,MAAM,GAAK,CAAC,cACtBtF,IAAA,MAAGsH,KAAK,CAAE,CAAES,KAAK,CAAE,MAAM,CAAEkB,SAAS,CAAE,QAAS,CAAE,CAAAvB,QAAA,CAAC,mBAAiB,CAAG,CAAC,cAEvE1H,IAAA,QAAKsH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,MAAO,CAAE,CAAApB,QAAA,CAC1C3G,OAAO,CAACoI,GAAG,CAACgD,MAAM,OAAAC,eAAA,oBACjBlM,KAAA,QAAqBoH,KAAK,CAAE,CAC1BmB,eAAe,CAAE5I,MAAM,CAAC0J,OAAO,CAAEb,OAAO,CAAE,MAAM,CAAEC,YAAY,CAAE,KAAK,CACrEb,MAAM,cAAArB,MAAA,CAAe5G,MAAM,CAACiI,MAAM,CAAE,CAAEc,OAAO,CAAE,MAAM,CAAES,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QACtG,CAAE,CAAA5B,QAAA,eACAxH,KAAA,QAAAwH,QAAA,eACE1H,IAAA,OAAIsH,KAAK,CAAE,CAAEG,MAAM,CAAE,CAAC,CAAEM,KAAK,CAAElI,MAAM,CAACmI,OAAQ,CAAE,CAAAN,QAAA,CAAEyE,MAAM,CAAChE,IAAI,CAAK,CAAC,cACnEjI,KAAA,MAAGoH,KAAK,CAAE,CAAEG,MAAM,CAAE,WAAW,CAAES,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,MAAO,CAAE,CAAAL,QAAA,EAChEyE,MAAM,CAAC9D,MAAM,CAAC,UAAG,CAAC,EAAA+D,eAAA,CAAAD,MAAM,CAAC7D,OAAO,UAAA8D,eAAA,iBAAdA,eAAA,CAAgB9G,MAAM,GAAI,CAAC,CAAC,KAAG,CAAC6G,MAAM,CAAC5D,WAAW,CAAC,UACtE,CAAC4D,MAAM,CAACpK,cAAc,eAAI/B,IAAA,SAAMsH,KAAK,CAAE,CAAEkB,UAAU,CAAE,MAAM,CAAEN,QAAQ,CAAE,MAAM,CAAEJ,MAAM,CAAE,gBAAgB,CAAEY,OAAO,CAAE,SAAS,CAAEC,YAAY,CAAE,KAAM,CAAE,CAAAjB,QAAA,CAAC,QAAM,CAAM,CAAC,EAChK,CAAC,EACD,CAAC,cACNxH,KAAA,QAAKoH,KAAK,CAAE,CAAEsB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,MAAO,CAAE,CAAApB,QAAA,eAC3C1H,IAAA,CAACL,MAAM,EAAC8J,OAAO,CAAC,WAAW,CAAC9B,OAAO,CAAEA,CAAA,GAAMrG,iBAAiB,CAAC6K,MAAM,CAAE,CAAC7E,KAAK,CAAE,CAAEoB,OAAO,CAAE,UAAU,CAAER,QAAQ,CAAE,MAAO,CAAE,CAAAR,QAAA,CAAC,QAExH,CAAQ,CAAC,cACT1H,IAAA,CAACL,MAAM,EAAC8J,OAAO,CAAC,QAAQ,CAAC9B,OAAO,CAAEA,CAAA,GAAMvB,kBAAkB,CAAC+F,MAAM,CAACxH,EAAE,CAAE,CAAC2C,KAAK,CAAE,CAAEoB,OAAO,CAAE,UAAU,CAAER,QAAQ,CAAE,MAAO,CAAE,CAAAR,QAAA,CAAC,QAEzH,CAAQ,CAAC,EACN,CAAC,GAlBEyE,MAAM,CAACxH,EAmBZ,CAAC,EACP,CAAC,CACC,CACN,EACE,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAxE,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}