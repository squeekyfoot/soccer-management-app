{"ast":null,"code":"/**\n * Compresses and resizes an image file to a maximum dimension.\n * Returns a Promise that resolves to a new File object.\n * * @param {File} file - The original image file\n * @param {number} maxWidth - Max width/height (default 300px for avatars)\n * @param {number} quality - JPEG quality 0-1 (default 0.7)\n */\nexport const compressImage = (file, maxWidth = 300, quality = 0.7) => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = event => {\n      const img = new Image();\n      img.src = event.target.result;\n      img.onload = () => {\n        let width = img.width;\n        let height = img.height;\n\n        // Calculate new dimensions maintaining aspect ratio\n        if (width > height) {\n          if (width > maxWidth) {\n            height = Math.round(height * maxWidth / width);\n            width = maxWidth;\n          }\n        } else {\n          if (height > maxWidth) {\n            width = Math.round(width * maxWidth / height);\n            height = maxWidth;\n          }\n        }\n        const canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0, width, height);\n        canvas.toBlob(blob => {\n          if (!blob) {\n            reject(new Error('Canvas is empty'));\n            return;\n          }\n          // Convert Blob back to File to keep metadata properties consistent\n          const newFile = new File([blob], file.name, {\n            type: 'image/jpeg',\n            lastModified: Date.now()\n          });\n          resolve(newFile);\n        }, 'image/jpeg', quality);\n      };\n      img.onerror = error => reject(error);\n    };\n    reader.onerror = error => reject(error);\n  });\n};","map":{"version":3,"names":["compressImage","file","maxWidth","quality","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","event","img","Image","src","target","result","width","height","Math","round","canvas","document","createElement","ctx","getContext","drawImage","toBlob","blob","Error","newFile","File","name","type","lastModified","Date","now","onerror","error"],"sources":["/Users/dbroxton/Documents/Projects/soccer-management-app/src/utils/imageUtils.js"],"sourcesContent":["/**\n * Compresses and resizes an image file to a maximum dimension.\n * Returns a Promise that resolves to a new File object.\n * * @param {File} file - The original image file\n * @param {number} maxWidth - Max width/height (default 300px for avatars)\n * @param {number} quality - JPEG quality 0-1 (default 0.7)\n */\nexport const compressImage = (file, maxWidth = 300, quality = 0.7) => {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        \n        reader.onload = (event) => {\n            const img = new Image();\n            img.src = event.target.result;\n            \n            img.onload = () => {\n                let width = img.width;\n                let height = img.height;\n\n                // Calculate new dimensions maintaining aspect ratio\n                if (width > height) {\n                    if (width > maxWidth) {\n                        height = Math.round((height * maxWidth) / width);\n                        width = maxWidth;\n                    }\n                } else {\n                    if (height > maxWidth) {\n                        width = Math.round((width * maxWidth) / height);\n                        height = maxWidth;\n                    }\n                }\n\n                const canvas = document.createElement('canvas');\n                canvas.width = width;\n                canvas.height = height;\n\n                const ctx = canvas.getContext('2d');\n                ctx.drawImage(img, 0, 0, width, height);\n\n                canvas.toBlob(\n                    (blob) => {\n                        if (!blob) {\n                            reject(new Error('Canvas is empty'));\n                            return;\n                        }\n                        // Convert Blob back to File to keep metadata properties consistent\n                        const newFile = new File([blob], file.name, {\n                            type: 'image/jpeg',\n                            lastModified: Date.now(),\n                        });\n                        resolve(newFile);\n                    },\n                    'image/jpeg',\n                    quality\n                );\n            };\n            \n            img.onerror = (error) => reject(error);\n        };\n        \n        reader.onerror = (error) => reject(error);\n    });\n};"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,aAAa,GAAGA,CAACC,IAAI,EAAEC,QAAQ,GAAG,GAAG,EAAEC,OAAO,GAAG,GAAG,KAAK;EAClE,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpC,MAAMC,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;IAC/BD,MAAM,CAACE,aAAa,CAACR,IAAI,CAAC;IAE1BM,MAAM,CAACG,MAAM,GAAIC,KAAK,IAAK;MACvB,MAAMC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;MACvBD,GAAG,CAACE,GAAG,GAAGH,KAAK,CAACI,MAAM,CAACC,MAAM;MAE7BJ,GAAG,CAACF,MAAM,GAAG,MAAM;QACf,IAAIO,KAAK,GAAGL,GAAG,CAACK,KAAK;QACrB,IAAIC,MAAM,GAAGN,GAAG,CAACM,MAAM;;QAEvB;QACA,IAAID,KAAK,GAAGC,MAAM,EAAE;UAChB,IAAID,KAAK,GAAGf,QAAQ,EAAE;YAClBgB,MAAM,GAAGC,IAAI,CAACC,KAAK,CAAEF,MAAM,GAAGhB,QAAQ,GAAIe,KAAK,CAAC;YAChDA,KAAK,GAAGf,QAAQ;UACpB;QACJ,CAAC,MAAM;UACH,IAAIgB,MAAM,GAAGhB,QAAQ,EAAE;YACnBe,KAAK,GAAGE,IAAI,CAACC,KAAK,CAAEH,KAAK,GAAGf,QAAQ,GAAIgB,MAAM,CAAC;YAC/CA,MAAM,GAAGhB,QAAQ;UACrB;QACJ;QAEA,MAAMmB,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;QAC/CF,MAAM,CAACJ,KAAK,GAAGA,KAAK;QACpBI,MAAM,CAACH,MAAM,GAAGA,MAAM;QAEtB,MAAMM,GAAG,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;QACnCD,GAAG,CAACE,SAAS,CAACd,GAAG,EAAE,CAAC,EAAE,CAAC,EAAEK,KAAK,EAAEC,MAAM,CAAC;QAEvCG,MAAM,CAACM,MAAM,CACRC,IAAI,IAAK;UACN,IAAI,CAACA,IAAI,EAAE;YACPtB,MAAM,CAAC,IAAIuB,KAAK,CAAC,iBAAiB,CAAC,CAAC;YACpC;UACJ;UACA;UACA,MAAMC,OAAO,GAAG,IAAIC,IAAI,CAAC,CAACH,IAAI,CAAC,EAAE3B,IAAI,CAAC+B,IAAI,EAAE;YACxCC,IAAI,EAAE,YAAY;YAClBC,YAAY,EAAEC,IAAI,CAACC,GAAG,CAAC;UAC3B,CAAC,CAAC;UACF/B,OAAO,CAACyB,OAAO,CAAC;QACpB,CAAC,EACD,YAAY,EACZ3B,OACJ,CAAC;MACL,CAAC;MAEDS,GAAG,CAACyB,OAAO,GAAIC,KAAK,IAAKhC,MAAM,CAACgC,KAAK,CAAC;IAC1C,CAAC;IAED/B,MAAM,CAAC8B,OAAO,GAAIC,KAAK,IAAKhC,MAAM,CAACgC,KAAK,CAAC;EAC7C,CAAC,CAAC;AACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}