{"ast":null,"code":"import React from'react';import{ChevronLeft,MoreVertical}from'lucide-react';import{COLORS}from'../../constants';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatHeader=_ref=>{var _selectedChat$partici2;let{selectedChat,userProfiles,loggedInUser,onShowDetails,onBack,totalUnreadCount}=_ref;if(!selectedChat)return null;const isDM=selectedChat.type==='dm'||selectedChat.participants&&selectedChat.participants.length===2&&selectedChat.type!=='roster';let displayTitle=selectedChat.name;let iconImage=null;// LOGIC FIX:\nif(isDM){var _selectedChat$partici;const otherUser=(_selectedChat$partici=selectedChat.participantDetails)===null||_selectedChat$partici===void 0?void 0:_selectedChat$partici.find(p=>p.uid!==loggedInUser.uid);if(otherUser){const freshUser=userProfiles[otherUser.uid];displayTitle=freshUser?freshUser.playerName||otherUser.name:otherUser.name;iconImage=freshUser?freshUser.photoURL:otherUser.photoURL;}}else if(selectedChat.type==='roster'){displayTitle=\"\\u26BD \".concat(selectedChat.name);}else{// Group Chat\niconImage=selectedChat.photoURL;}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px',borderBottom:\"1px solid \".concat(COLORS.border),backgroundColor:COLORS.background,boxSizing:'border-box',display:'flex',justifyContent:'space-between',alignItems:'center',minHeight:'100px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:1,display:'flex',alignItems:'center',minWidth:'60px'},children:onBack&&/*#__PURE__*/_jsxs(\"button\",{onClick:onBack,style:{background:'none',border:'none',color:COLORS.primary,cursor:'pointer',display:'flex',alignItems:'center',fontSize:'16px',fontWeight:'500'},children:[/*#__PURE__*/_jsx(ChevronLeft,{size:28}),totalUnreadCount>0&&/*#__PURE__*/_jsx(\"span\",{style:{backgroundColor:COLORS.primary,color:'#000',borderRadius:'50%',width:'20px',height:'20px',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'12px',fontWeight:'bold',marginLeft:'2px'},children:totalUnreadCount})]})}),/*#__PURE__*/_jsxs(\"div\",{onClick:onShowDetails,style:{flex:2,display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'50px',height:'50px',borderRadius:'50%',backgroundColor:'#444',overflow:'hidden',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'20px',border:'1px solid #666',marginBottom:'6px'},children:iconImage?/*#__PURE__*/_jsx(\"img\",{src:iconImage,alt:\"\",style:{width:'100%',height:'100%',objectFit:'cover'}}):/*#__PURE__*/_jsx(\"span\",{children:displayTitle.charAt(0)})}),/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,fontSize:'16px',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis',maxWidth:'200px',lineHeight:'1.2'},children:displayTitle}),!isDM&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'11px',color:'#888',marginTop:'2px'},children:[((_selectedChat$partici2=selectedChat.participantDetails)===null||_selectedChat$partici2===void 0?void 0:_selectedChat$partici2.length)||0,\" members\"]})]}),/*#__PURE__*/_jsx(\"div\",{onClick:onShowDetails,style:{flex:1,display:'flex',justifyContent:'flex-end',alignItems:'center',cursor:'pointer'},children:/*#__PURE__*/_jsx(MoreVertical,{size:24,color:\"#666\"})})]});};export default ChatHeader;","map":{"version":3,"names":["React","ChevronLeft","MoreVertical","COLORS","jsx","_jsx","jsxs","_jsxs","ChatHeader","_ref","_selectedChat$partici2","selectedChat","userProfiles","loggedInUser","onShowDetails","onBack","totalUnreadCount","isDM","type","participants","length","displayTitle","name","iconImage","_selectedChat$partici","otherUser","participantDetails","find","p","uid","freshUser","playerName","photoURL","concat","style","padding","borderBottom","border","backgroundColor","background","boxSizing","display","justifyContent","alignItems","minHeight","children","flex","minWidth","onClick","color","primary","cursor","fontSize","fontWeight","size","borderRadius","width","height","marginLeft","flexDirection","overflow","marginBottom","src","alt","objectFit","charAt","margin","whiteSpace","textOverflow","maxWidth","lineHeight","marginTop"],"sources":["/Users/dbroxton/Documents/Projects/soccer-management-app/src/components/chat/ChatHeader.js"],"sourcesContent":["import React from 'react';\nimport { ChevronLeft, MoreVertical } from 'lucide-react'; \nimport { COLORS } from '../../constants';\n\nconst ChatHeader = ({ \n  selectedChat, \n  userProfiles, \n  loggedInUser, \n  onShowDetails, \n  onBack,\n  totalUnreadCount\n}) => {\n  if (!selectedChat) return null;\n\n  const isDM = selectedChat.type === 'dm' || (selectedChat.participants && selectedChat.participants.length === 2 && selectedChat.type !== 'roster');\n  let displayTitle = selectedChat.name;\n  let iconImage = null;\n  \n  // LOGIC FIX:\n  if (isDM) {\n    const otherUser = selectedChat.participantDetails?.find(p => p.uid !== loggedInUser.uid);\n    if (otherUser) {\n      const freshUser = userProfiles[otherUser.uid];\n      displayTitle = freshUser ? (freshUser.playerName || otherUser.name) : otherUser.name;\n      iconImage = freshUser ? freshUser.photoURL : otherUser.photoURL;\n    }\n  } else if (selectedChat.type === 'roster') {\n      displayTitle = `âš½ ${selectedChat.name}`;\n  } else {\n      // Group Chat\n      iconImage = selectedChat.photoURL;\n  }\n\n  return (\n    <div style={{ \n      padding: '10px', borderBottom: `1px solid ${COLORS.border}`, backgroundColor: COLORS.background, \n      boxSizing: 'border-box', display: 'flex', justifyContent: 'space-between', alignItems: 'center', minHeight: '100px'\n    }}>\n      \n      {/* LEFT: Back Button (Mobile Only) */}\n      <div style={{ flex: 1, display: 'flex', alignItems: 'center', minWidth: '60px' }}>\n        {onBack && (\n          <button \n            onClick={onBack}\n            style={{ \n              background: 'none', border: 'none', color: COLORS.primary, cursor: 'pointer', \n              display: 'flex', alignItems: 'center', fontSize: '16px', fontWeight: '500'\n            }}\n          >\n            <ChevronLeft size={28} />\n            {totalUnreadCount > 0 && (\n              <span style={{ \n                backgroundColor: COLORS.primary, color: '#000', borderRadius: '50%', width: '20px', height: '20px',\n                display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '12px', fontWeight: 'bold', marginLeft: '2px'\n              }}>\n                {totalUnreadCount}\n              </span>\n            )}\n          </button>\n        )}\n      </div>\n\n      {/* CENTER: Chat Info (Clickable) */}\n      <div \n        onClick={onShowDetails}\n        style={{ flex: 2, display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', cursor: 'pointer' }}\n      >\n         <div style={{ \n           width: '50px', height: '50px', borderRadius: '50%', backgroundColor: '#444', \n           overflow: 'hidden', display: 'flex', alignItems: 'center', justifyContent: 'center',\n           fontSize: '20px', border: '1px solid #666', marginBottom: '6px'\n         }}>\n           {iconImage ? (\n             <img src={iconImage} alt=\"\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\n           ) : (\n             <span>{displayTitle.charAt(0)}</span>\n           )}\n         </div>\n\n         <h3 style={{ margin: 0, fontSize: '16px', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis', maxWidth: '200px', lineHeight: '1.2' }}>\n           {displayTitle}\n         </h3>\n\n         {!isDM && (\n           <span style={{ fontSize: '11px', color: '#888', marginTop: '2px' }}>\n             {selectedChat.participantDetails?.length || 0} members\n           </span>\n         )}\n      </div>\n\n      {/* RIGHT: Action Indicator */}\n      <div \n        onClick={onShowDetails}\n        style={{ flex: 1, display: 'flex', justifyContent: 'flex-end', alignItems: 'center', cursor: 'pointer' }}\n      >\n        <MoreVertical size={24} color=\"#666\" />\n      </div>\n\n    </div>\n  );\n};\n\nexport default ChatHeader;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}