{"ast":null,"code":"import _objectSpread from\"/Users/dbroxton/Documents/Projects/soccer-management-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useCallback}from'react';import{useAuth}from'../context/AuthContext';import{useChat}from'../context/ChatContext';import{collection,query,orderBy,onSnapshot,limitToLast,where}from\"firebase/firestore\";import{db}from\"../firebase\";import UserSearch from'./UserSearch';import{COLORS,MOBILE_BREAKPOINT}from'../constants';import{compressImage}from'../utils/imageUtils';import{SquarePen}from'lucide-react';import ChatList from'./chat/ChatList';import ImageViewer from'./chat/ImageViewer';import ChatHeader from'./chat/ChatHeader';import MessageList from'./chat/MessageList';import MessageInput from'./chat/MessageInput';import ChatDetailsModal from'./chat/ChatDetailsModal';import Header from'./common/Header';import Button from'./common/Button';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function TeamChat(){const{uploadImage,loggedInUser}=useAuth();const{sendMessage,createChat,hideChat,leaveChat,renameChat,updateGroupPhoto,addParticipant,myChats,markChatAsRead}=useChat();const[selectedChat,setSelectedChat]=useState(null);const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState(\"\");const[selectedFile,setSelectedFile]=useState(null);const fileInputRef=useRef(null);const[isCreatingChat,setIsCreatingChat]=useState(false);const[selectedEmails,setSelectedEmails]=useState([]);const[newChatName,setNewChatName]=useState(\"\");const[viewingImage,setViewingImage]=useState(null);const[showChatDetails,setShowChatDetails]=useState(false);const[userProfiles,setUserProfiles]=useState({});const[isMobile,setIsMobile]=useState(window.innerWidth<MOBILE_BREAKPOINT);useEffect(()=>{const handleResize=()=>{setIsMobile(window.innerWidth<MOBILE_BREAKPOINT);};window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);useEffect(()=>{if(selectedChat){const freshChatData=myChats.find(c=>c.id===selectedChat.id);if(freshChatData){if(JSON.stringify(freshChatData)!==JSON.stringify(selectedChat)){setSelectedChat(freshChatData);}}}},[myChats,selectedChat]);const totalUnread=myChats.reduce((acc,chat)=>{const count=chat.unreadCounts&&chat.unreadCounts[loggedInUser.uid]||0;return acc+count;},0);useEffect(()=>{const usersRef=collection(db,\"users\");const unsubscribe=onSnapshot(usersRef,snapshot=>{const profiles={};snapshot.docs.forEach(doc=>{profiles[doc.id]=doc.data();});setUserProfiles(profiles);});return()=>unsubscribe();},[]);useEffect(()=>{if(!selectedChat||isCreatingChat){if(messages.length>0)setMessages([]);return;}markChatAsRead(selectedChat.id);const messagesRef=collection(db,\"chats\",selectedChat.id,\"messages\");let qConstraints=[orderBy(\"createdAt\",\"asc\"),limitToLast(50)];if(selectedChat.hiddenHistory&&selectedChat.hiddenHistory[loggedInUser.uid]){const cutoffTimestamp=selectedChat.hiddenHistory[loggedInUser.uid];qConstraints.push(where(\"createdAt\",\">=\",cutoffTimestamp));}const q=query(messagesRef,...qConstraints);const unsubscribe=onSnapshot(q,snapshot=>{const msgs=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setMessages(msgs);markChatAsRead(selectedChat.id);});return()=>unsubscribe();},[selectedChat,isCreatingChat,loggedInUser.uid]);const handleFileChange=e=>{if(e.target.files[0]){setSelectedFile(e.target.files[0]);}if(fileInputRef.current){fileInputRef.current.value=\"\";}};const startNewChat=useCallback(()=>{setIsCreatingChat(true);setSelectedChat(null);setMessages([]);setNewChatName(\"\");setSelectedEmails([]);setNewMessage(\"\");setSelectedFile(null);},[]);const handleSelectChat=useCallback(chat=>{setMessages([]);setSelectedChat(chat);setIsCreatingChat(false);},[]);const handleBackToList=()=>{setSelectedChat(null);setIsCreatingChat(false);};const handleRenameGroup=async()=>{if(!selectedChat)return;const newName=window.prompt(\"Enter new group name:\",selectedChat.name);if(newName&&newName.trim()!==\"\"){await renameChat(selectedChat.id,newName.trim());}};const handleAddMember=async(email,includeHistory)=>{if(!selectedChat)return;await addParticipant(selectedChat.id,email,includeHistory);};const handleGroupPhotoChange=async file=>{if(!selectedChat||!file)return;const isGroup=selectedChat.type==='group'||selectedChat.participants.length>2&&selectedChat.type!=='roster';if(isGroup){try{const compressedFile=await compressImage(file,300,0.8);const imageUrl=await uploadImage(compressedFile,\"chat_avatars/\".concat(selectedChat.id,\"/\").concat(Date.now()));if(imageUrl){await updateGroupPhoto(selectedChat.id,imageUrl);}}catch(error){console.error(\"Failed to compress or upload group photo\",error);alert(\"Failed to update photo. Please try again.\");}}};const handleDeleteChat=useCallback(async chat=>{if(chat.type==='roster'){alert(\"Team Roster chats cannot be deleted.\");return;}const isGroup=chat.type==='group'||chat.participants.length>2&&chat.type!=='roster';if(isGroup){if(window.confirm(\"Are you sure you want to leave this group? You will no longer receive messages.\")){await leaveChat(chat.id);setSelectedChat(null);setShowChatDetails(false);}}else{if(window.confirm(\"Are you sure you want to delete this chat history?\")){await hideChat(chat.id,chat.visibleTo);setSelectedChat(null);setShowChatDetails(false);}}},[leaveChat,hideChat]);const handleSend=async e=>{e.preventDefault();if(isCreatingChat){if(selectedEmails.length===0){alert(\"Please add at least one person to the chat.\");return;}const chatResult=await createChat(selectedEmails,newChatName);if(chatResult&&chatResult.id){const newChatId=chatResult.id;const participants=chatResult.participants;const text=newMessage;let fileToUpload=selectedFile;setNewMessage(\"\");setSelectedFile(null);let imageUrl=null;if(fileToUpload){imageUrl=await uploadImage(fileToUpload,\"chat_images/\".concat(newChatId));}if(text||imageUrl){await sendMessage(newChatId,text,participants,imageUrl);}const optimisticChat={id:newChatId,name:chatResult.name||newChatName||\"New Chat\",type:selectedEmails.length>0?'group':'dm',participants:participants,participantDetails:chatResult.participantDetails||[]};setSelectedChat(optimisticChat);setIsCreatingChat(false);setNewChatName(\"\");setSelectedEmails([]);}}else{if(!newMessage.trim()&&!selectedFile||!selectedChat)return;const text=newMessage;let fileToUpload=selectedFile;setNewMessage(\"\");setSelectedFile(null);let imageUrl=null;try{if(fileToUpload){imageUrl=await uploadImage(fileToUpload,\"chat_images/\".concat(selectedChat.id));}await sendMessage(selectedChat.id,text,selectedChat.participants,imageUrl);}catch(error){console.error(\"Error sending message/image:\",error);alert(\"Failed to send message.\");}}};const canSend=isCreatingChat?selectedEmails.length>0:true;// Determine logic for showing the banner and list\nconst showList=!isMobile||!selectedChat&&!isCreatingChat;const showChat=!isMobile||selectedChat||isCreatingChat;// Show header on Desktop OR Mobile List View\nconst showHeader=!isMobile||showList;return(/*#__PURE__*/// Use height: 100% to fill the parent \"main-content\" container\n_jsxs(\"div\",{style:{height:'100%',width:'100%',display:'flex',flexDirection:'column',overflow:'hidden'},children:[showHeader&&/*#__PURE__*/_jsx(Header,{title:\"Messaging\",actions:/*#__PURE__*/_jsxs(Button,{onClick:startNewChat,style:{padding:'5px 10px',fontSize:'14px'},children:[/*#__PURE__*/_jsx(SquarePen,{size:18}),/*#__PURE__*/_jsx(\"span\",{children:\"New Message\"})]}),style:{maxWidth:'1000px',margin:'0 auto 20px'}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flex:1,width:'100%',maxWidth:'1000px',margin:'0 auto',backgroundColor:COLORS.background,borderRadius:isMobile?'0':'8px',overflow:'hidden',boxSizing:'border-box',border:isMobile?'none':\"1px solid \".concat(COLORS.border),minHeight:0// Allows flex container to shrink/scroll correctly\n},children:[showList&&/*#__PURE__*/_jsx(ChatList,{myChats:myChats,selectedChat:selectedChat,onSelectChat:handleSelectChat,onDeleteChat:handleDeleteChat,userProfiles:userProfiles,isMobile:isMobile}),showChat&&/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,display:'flex',flexDirection:'column',backgroundColor:COLORS.sidebar,minWidth:0,height:'100%'},children:[isCreatingChat?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'15px',borderBottom:\"1px solid \".concat(COLORS.border),backgroundColor:COLORS.background,display:'flex',alignItems:'center'},children:[isMobile&&/*#__PURE__*/_jsx(\"button\",{onClick:handleBackToList,style:{background:'none',border:'none',color:COLORS.primary,fontSize:'24px',marginRight:'10px',cursor:'pointer'},children:\"\\u2039\"}),/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,color:'white'},children:\"New Message\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px'},children:/*#__PURE__*/_jsx(UserSearch,{onSelectionChange:setSelectedEmails})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}})]}):selectedChat?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ChatHeader,{selectedChat:selectedChat,userProfiles:userProfiles,loggedInUser:loggedInUser,onShowDetails:()=>setShowChatDetails(true),onBack:isMobile?handleBackToList:null,totalUnreadCount:totalUnread}),/*#__PURE__*/_jsx(MessageList,{messages:messages,loggedInUser:loggedInUser,onImageClick:setViewingImage,selectedChatId:selectedChat.id})]}):/*#__PURE__*/_jsx(\"div\",{style:{flex:1,display:'flex',justifyContent:'center',alignItems:'center',color:'#888'},children:\"Select a conversation or start a new one.\"}),(isCreatingChat||selectedChat)&&/*#__PURE__*/_jsx(MessageInput,{messageText:newMessage,onMessageChange:setNewMessage,onSend:handleSend,selectedFile:selectedFile,onFileChange:handleFileChange,onRemoveFile:()=>setSelectedFile(null),fileInputRef:fileInputRef,canSend:canSend})]}),/*#__PURE__*/_jsx(ImageViewer,{imageUrl:viewingImage,onClose:()=>setViewingImage(null)}),showChatDetails&&/*#__PURE__*/_jsx(ChatDetailsModal,{chat:selectedChat,onClose:()=>setShowChatDetails(false),onRename:handleRenameGroup,onDelete:handleDeleteChat,onUpdatePhoto:handleGroupPhotoChange,onAddMember:handleAddMember,userProfiles:userProfiles,loggedInUser:loggedInUser})]})]}));}export default TeamChat;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useAuth","useChat","collection","query","orderBy","onSnapshot","limitToLast","where","db","UserSearch","COLORS","MOBILE_BREAKPOINT","compressImage","SquarePen","ChatList","ImageViewer","ChatHeader","MessageList","MessageInput","ChatDetailsModal","Header","Button","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TeamChat","uploadImage","loggedInUser","sendMessage","createChat","hideChat","leaveChat","renameChat","updateGroupPhoto","addParticipant","myChats","markChatAsRead","selectedChat","setSelectedChat","messages","setMessages","newMessage","setNewMessage","selectedFile","setSelectedFile","fileInputRef","isCreatingChat","setIsCreatingChat","selectedEmails","setSelectedEmails","newChatName","setNewChatName","viewingImage","setViewingImage","showChatDetails","setShowChatDetails","userProfiles","setUserProfiles","isMobile","setIsMobile","window","innerWidth","handleResize","addEventListener","removeEventListener","freshChatData","find","c","id","JSON","stringify","totalUnread","reduce","acc","chat","count","unreadCounts","uid","usersRef","unsubscribe","snapshot","profiles","docs","forEach","doc","data","length","messagesRef","qConstraints","hiddenHistory","cutoffTimestamp","push","q","msgs","map","_objectSpread","handleFileChange","e","target","files","current","value","startNewChat","handleSelectChat","handleBackToList","handleRenameGroup","newName","prompt","name","trim","handleAddMember","email","includeHistory","handleGroupPhotoChange","file","isGroup","type","participants","compressedFile","imageUrl","concat","Date","now","error","console","alert","handleDeleteChat","confirm","visibleTo","handleSend","preventDefault","chatResult","newChatId","text","fileToUpload","optimisticChat","participantDetails","canSend","showList","showChat","showHeader","style","height","width","display","flexDirection","overflow","children","title","actions","onClick","padding","fontSize","size","maxWidth","margin","flex","backgroundColor","background","borderRadius","boxSizing","border","minHeight","onSelectChat","onDeleteChat","sidebar","minWidth","borderBottom","alignItems","color","primary","marginRight","cursor","onSelectionChange","onShowDetails","onBack","totalUnreadCount","onImageClick","selectedChatId","justifyContent","messageText","onMessageChange","onSend","onFileChange","onRemoveFile","onClose","onRename","onDelete","onUpdatePhoto","onAddMember"],"sources":["/Users/dbroxton/Documents/Projects/soccer-management-app/src/components/TeamChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useChat } from '../context/ChatContext'; \nimport { collection, query, orderBy, onSnapshot, limitToLast, where } from \"firebase/firestore\"; \nimport { db } from \"../firebase\";\nimport UserSearch from './UserSearch';\nimport { COLORS, MOBILE_BREAKPOINT } from '../constants';\nimport { compressImage } from '../utils/imageUtils'; \nimport { SquarePen } from 'lucide-react';\n\nimport ChatList from './chat/ChatList';\nimport ImageViewer from './chat/ImageViewer';\nimport ChatHeader from './chat/ChatHeader';\nimport MessageList from './chat/MessageList';\nimport MessageInput from './chat/MessageInput';\nimport ChatDetailsModal from './chat/ChatDetailsModal'; \nimport Header from './common/Header'; \nimport Button from './common/Button';\n\nfunction TeamChat() {\n  const { uploadImage, loggedInUser } = useAuth();\n  const { \n    sendMessage, createChat, hideChat, leaveChat, renameChat, \n    updateGroupPhoto, addParticipant, myChats, markChatAsRead \n  } = useChat();\n  \n  const [selectedChat, setSelectedChat] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  \n  const [selectedFile, setSelectedFile] = useState(null);\n  const fileInputRef = useRef(null); \n  \n  const [isCreatingChat, setIsCreatingChat] = useState(false);\n  const [selectedEmails, setSelectedEmails] = useState([]); \n  const [newChatName, setNewChatName] = useState(\"\");\n\n  const [viewingImage, setViewingImage] = useState(null);\n  const [showChatDetails, setShowChatDetails] = useState(false); \n  \n  const [userProfiles, setUserProfiles] = useState({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < MOBILE_BREAKPOINT);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  useEffect(() => {\n    if (selectedChat) {\n      const freshChatData = myChats.find(c => c.id === selectedChat.id);\n      if (freshChatData) {\n        if (JSON.stringify(freshChatData) !== JSON.stringify(selectedChat)) {\n          setSelectedChat(freshChatData);\n        }\n      }\n    }\n  }, [myChats, selectedChat]);\n\n  const totalUnread = myChats.reduce((acc, chat) => {\n    const count = (chat.unreadCounts && chat.unreadCounts[loggedInUser.uid]) || 0;\n    return acc + count;\n  }, 0);\n\n  useEffect(() => {\n    const usersRef = collection(db, \"users\");\n    const unsubscribe = onSnapshot(usersRef, (snapshot) => {\n      const profiles = {};\n      snapshot.docs.forEach(doc => {\n        profiles[doc.id] = doc.data();\n      });\n      setUserProfiles(profiles);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  useEffect(() => {\n    if (!selectedChat || isCreatingChat) {\n        if(messages.length > 0) setMessages([]); \n        return;\n    }\n    \n    markChatAsRead(selectedChat.id);\n\n    const messagesRef = collection(db, \"chats\", selectedChat.id, \"messages\");\n    \n    let qConstraints = [orderBy(\"createdAt\", \"asc\"), limitToLast(50)];\n\n    if (selectedChat.hiddenHistory && selectedChat.hiddenHistory[loggedInUser.uid]) {\n         const cutoffTimestamp = selectedChat.hiddenHistory[loggedInUser.uid];\n         qConstraints.push(where(\"createdAt\", \">=\", cutoffTimestamp));\n    }\n\n    const q = query(messagesRef, ...qConstraints);\n\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const msgs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setMessages(msgs);\n      markChatAsRead(selectedChat.id);\n    });\n    return () => unsubscribe();\n  }, [selectedChat, isCreatingChat, loggedInUser.uid]); \n\n  const handleFileChange = (e) => {\n    if (e.target.files[0]) {\n      setSelectedFile(e.target.files[0]);\n    }\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n\n  const startNewChat = useCallback(() => {\n      setIsCreatingChat(true);\n      setSelectedChat(null);\n      setMessages([]); \n      setNewChatName(\"\");\n      setSelectedEmails([]);\n      setNewMessage(\"\");\n      setSelectedFile(null);\n  }, []);\n\n  const handleSelectChat = useCallback((chat) => {\n    setMessages([]); \n    setSelectedChat(chat);\n    setIsCreatingChat(false);\n  }, []);\n\n  const handleBackToList = () => {\n    setSelectedChat(null);\n    setIsCreatingChat(false);\n  };\n\n  const handleRenameGroup = async () => {\n    if (!selectedChat) return;\n    const newName = window.prompt(\"Enter new group name:\", selectedChat.name);\n    if (newName && newName.trim() !== \"\") {\n      await renameChat(selectedChat.id, newName.trim());\n    }\n  };\n\n  const handleAddMember = async (email, includeHistory) => {\n      if(!selectedChat) return;\n      await addParticipant(selectedChat.id, email, includeHistory);\n  };\n\n  const handleGroupPhotoChange = async (file) => {\n    if (!selectedChat || !file) return;\n    const isGroup = selectedChat.type === 'group' || (selectedChat.participants.length > 2 && selectedChat.type !== 'roster');\n    \n    if (isGroup) {\n       try {\n           const compressedFile = await compressImage(file, 300, 0.8);\n           const imageUrl = await uploadImage(compressedFile, `chat_avatars/${selectedChat.id}/${Date.now()}`);\n           if (imageUrl) {\n               await updateGroupPhoto(selectedChat.id, imageUrl);\n           }\n       } catch (error) {\n           console.error(\"Failed to compress or upload group photo\", error);\n           alert(\"Failed to update photo. Please try again.\");\n       }\n    }\n  };\n\n  const handleDeleteChat = useCallback(async (chat) => {\n    if (chat.type === 'roster') {\n      alert(\"Team Roster chats cannot be deleted.\");\n      return;\n    }\n\n    const isGroup = chat.type === 'group' || (chat.participants.length > 2 && chat.type !== 'roster');\n\n    if (isGroup) {\n       if (window.confirm(\"Are you sure you want to leave this group? You will no longer receive messages.\")) {\n          await leaveChat(chat.id);\n          setSelectedChat(null);\n          setShowChatDetails(false);\n       }\n    } else {\n       if (window.confirm(\"Are you sure you want to delete this chat history?\")) {\n           await hideChat(chat.id, chat.visibleTo);\n           setSelectedChat(null);\n           setShowChatDetails(false);\n       }\n    }\n  }, [leaveChat, hideChat]);\n\n  const handleSend = async (e) => {\n    e.preventDefault();\n    if (isCreatingChat) {\n        if (selectedEmails.length === 0) {\n            alert(\"Please add at least one person to the chat.\");\n            return;\n        }\n        const chatResult = await createChat(selectedEmails, newChatName);\n        if (chatResult && chatResult.id) {\n             const newChatId = chatResult.id;\n             const participants = chatResult.participants;\n             const text = newMessage;\n             let fileToUpload = selectedFile;\n             \n             setNewMessage(\"\"); \n             setSelectedFile(null); \n             \n             let imageUrl = null;\n             if (fileToUpload) {\n                 imageUrl = await uploadImage(fileToUpload, `chat_images/${newChatId}`);\n             }\n             if (text || imageUrl) {\n                await sendMessage(newChatId, text, participants, imageUrl);\n             }\n\n             const optimisticChat = {\n                 id: newChatId,\n                 name: chatResult.name || newChatName || \"New Chat\",\n                 type: selectedEmails.length > 0 ? 'group' : 'dm',\n                 participants: participants,\n                 participantDetails: chatResult.participantDetails || [] \n             };\n             setSelectedChat(optimisticChat);\n             setIsCreatingChat(false);\n             setNewChatName(\"\");\n             setSelectedEmails([]);\n        }\n    } else {\n        if ((!newMessage.trim() && !selectedFile) || !selectedChat) return;\n        const text = newMessage;\n        let fileToUpload = selectedFile;\n\n        setNewMessage(\"\"); \n        setSelectedFile(null); \n        let imageUrl = null;\n        try {\n            if (fileToUpload) {\n                imageUrl = await uploadImage(fileToUpload, `chat_images/${selectedChat.id}`);\n            }\n            await sendMessage(selectedChat.id, text, selectedChat.participants, imageUrl);\n        } catch (error) {\n            console.error(\"Error sending message/image:\", error);\n            alert(\"Failed to send message.\");\n        }\n    }\n  };\n\n  const canSend = isCreatingChat ? (selectedEmails.length > 0) : true; \n  \n  // Determine logic for showing the banner and list\n  const showList = !isMobile || (!selectedChat && !isCreatingChat);\n  const showChat = !isMobile || (selectedChat || isCreatingChat);\n  // Show header on Desktop OR Mobile List View\n  const showHeader = !isMobile || showList; \n\n  return (\n    // Use height: 100% to fill the parent \"main-content\" container\n    <div style={{ height: '100%', width: '100%', display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>\n        \n        {showHeader && (\n          <Header \n            title=\"Messaging\" \n            actions={\n              <Button onClick={startNewChat} style={{ padding: '5px 10px', fontSize: '14px' }}>\n                 <SquarePen size={18} />\n                 <span>New Message</span>\n              </Button>\n            }\n            style={{ maxWidth: '1000px', margin: '0 auto 20px' }} \n          />\n        )}\n        \n        <div style={{ \n          display: 'flex', flex: 1, width: '100%', maxWidth: '1000px', \n          margin: '0 auto', backgroundColor: COLORS.background, \n          borderRadius: isMobile ? '0' : '8px', overflow: 'hidden', boxSizing: 'border-box',\n          border: isMobile ? 'none' : `1px solid ${COLORS.border}`,\n          minHeight: 0 // Allows flex container to shrink/scroll correctly\n        }}>\n          \n          {showList && (\n            <ChatList \n              myChats={myChats}\n              selectedChat={selectedChat}\n              onSelectChat={handleSelectChat}\n              onDeleteChat={handleDeleteChat}\n              userProfiles={userProfiles}\n              isMobile={isMobile}\n            />\n          )}\n\n          {showChat && (\n            <div style={{ flex: 1, display: 'flex', flexDirection: 'column', backgroundColor: COLORS.sidebar, minWidth: 0, height: '100%' }}>\n              \n              {isCreatingChat ? (\n                  <>\n                      <div style={{ padding: '15px', borderBottom: `1px solid ${COLORS.border}`, backgroundColor: COLORS.background, display: 'flex', alignItems: 'center' }}>\n                          {isMobile && (\n                            <button onClick={handleBackToList} style={{ background: 'none', border: 'none', color: COLORS.primary, fontSize: '24px', marginRight: '10px', cursor: 'pointer' }}>\n                              â€¹\n                            </button>\n                          )}\n                          <h3 style={{ margin: 0, color: 'white' }}>New Message</h3>\n                      </div>\n                      <div style={{ padding: '20px' }}>\n                          <UserSearch onSelectionChange={setSelectedEmails} />\n                      </div>\n                      <div style={{ flex: 1 }} />\n                  </>\n              ) : selectedChat ? (\n                <>\n                  <ChatHeader \n                    selectedChat={selectedChat}\n                    userProfiles={userProfiles}\n                    loggedInUser={loggedInUser}\n                    onShowDetails={() => setShowChatDetails(true)}\n                    onBack={isMobile ? handleBackToList : null}\n                    totalUnreadCount={totalUnread}\n                  />\n\n                  <MessageList \n                    messages={messages}\n                    loggedInUser={loggedInUser}\n                    onImageClick={setViewingImage}\n                    selectedChatId={selectedChat.id}\n                  />\n                </>\n              ) : (\n                <div style={{ flex: 1, display: 'flex', justifyContent: 'center', alignItems: 'center', color: '#888' }}>\n                    Select a conversation or start a new one.\n                </div>\n              )}\n\n              {(isCreatingChat || selectedChat) && (\n                  <MessageInput \n                    messageText={newMessage}\n                    onMessageChange={setNewMessage}\n                    onSend={handleSend}\n                    selectedFile={selectedFile}\n                    onFileChange={handleFileChange}\n                    onRemoveFile={() => setSelectedFile(null)}\n                    fileInputRef={fileInputRef}\n                    canSend={canSend}\n                  />\n              )}\n            </div>\n          )}\n\n          <ImageViewer imageUrl={viewingImage} onClose={() => setViewingImage(null)} />\n          \n          {showChatDetails && (\n            <ChatDetailsModal \n              chat={selectedChat} \n              onClose={() => setShowChatDetails(false)}\n              onRename={handleRenameGroup}\n              onDelete={handleDeleteChat}\n              onUpdatePhoto={handleGroupPhotoChange}\n              onAddMember={handleAddMember}\n              userProfiles={userProfiles}\n              loggedInUser={loggedInUser}\n            />\n          )}\n\n        </div>\n    </div>\n  );\n}\n\nexport default TeamChat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}