{"ast":null,"code":"import React,{useState}from'react';import Card from'../../../common/Card';import Button from'../../../common/Button';import Avatar from'../../../common/Avatar';import Modal from'../../../common/Modal';import{useAuth}from'../../../../context/AuthContext';import{COLORS}from'../../../../lib/constants';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const IncomingRequests=_ref=>{let{requests,onApprove,onDeny,myGroups}=_ref;const{fetchPlayerDetails}=useAuth();const[expandedId,setExpandedId]=useState(null);const[details,setDetails]=useState(null);const[loading,setLoading]=useState(false);// Approval Modal State\nconst[requestToApprove,setRequestToApprove]=useState(null);const[targetGroupId,setTargetGroupId]=useState(\"\");const toggleDetails=async req=>{if(expandedId===req.id){setExpandedId(null);setDetails(null);return;}setExpandedId(req.id);setLoading(true);const data=await fetchPlayerDetails(req.userId);setDetails(data);setLoading(false);};const initiateApproval=req=>{const associated=myGroups.find(g=>g.associatedRosterId===req.rosterId);setTargetGroupId(associated?associated.id:\"\");setRequestToApprove(req);};const confirmApproval=()=>{onApprove(requestToApprove,targetGroupId||null);setRequestToApprove(null);};if(!requests.length)return null;return/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',marginBottom:'40px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:COLORS.primary},children:\"Incoming Join Requests\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'10px'},children:requests.map(req=>/*#__PURE__*/_jsxs(Card,{style:{border:\"1px solid \".concat(COLORS.primary)},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold'},children:req.userName}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#aaa',margin:'0 10px'},children:\"wants to join\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'white'},children:req.rosterName})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>toggleDetails(req),style:{padding:'5px 15px',fontSize:'12px'},children:expandedId===req.id?\"Hide\":\"Profile\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>initiateApproval(req),style:{padding:'5px 15px',fontSize:'12px'},children:\"Approve\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>onDeny(req),style:{padding:'5px 15px',fontSize:'12px'},children:\"Deny\"})]})]}),expandedId===req.id&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'15px',padding:'15px',backgroundColor:'#333',borderRadius:'5px'},children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):details?/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'15px',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(Avatar,{src:details.photoURL,text:details.playerName,size:50}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:details.playerName}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#aaa'},children:details.email}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#aaa'},children:details.phone})]})]})}):/*#__PURE__*/_jsx(\"p\",{style:{color:COLORS.danger},children:\"Failed to load.\"})})]},req.id))}),requestToApprove&&/*#__PURE__*/_jsxs(Modal,{title:\"Confirm Approval\",onClose:()=>setRequestToApprove(null),actions:/*#__PURE__*/_jsx(Button,{onClick:confirmApproval,children:\"Confirm\"}),children:[/*#__PURE__*/_jsxs(\"p\",{style:{color:'#ccc'},children:[\"Approve \",/*#__PURE__*/_jsx(\"strong\",{children:requestToApprove.userName}),\" for \",/*#__PURE__*/_jsx(\"strong\",{children:requestToApprove.rosterName}),\"?\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'10px'},children:\"Add to Community Group (Optional):\"}),/*#__PURE__*/_jsxs(\"select\",{value:targetGroupId,onChange:e=>setTargetGroupId(e.target.value),style:{width:'100%',padding:'10px',borderRadius:'5px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- No Group --\"}),myGroups.map(g=>/*#__PURE__*/_jsx(\"option\",{value:g.id,children:g.name},g.id))]})]})]})]});};export default IncomingRequests;","map":{"version":3,"names":["React","useState","Card","Button","Avatar","Modal","useAuth","COLORS","jsx","_jsx","jsxs","_jsxs","IncomingRequests","_ref","requests","onApprove","onDeny","myGroups","fetchPlayerDetails","expandedId","setExpandedId","details","setDetails","loading","setLoading","requestToApprove","setRequestToApprove","targetGroupId","setTargetGroupId","toggleDetails","req","id","data","userId","initiateApproval","associated","find","g","associatedRosterId","rosterId","confirmApproval","length","style","marginTop","marginBottom","children","color","primary","display","gap","map","border","concat","justifyContent","alignItems","fontWeight","userName","margin","rosterName","variant","onClick","padding","fontSize","backgroundColor","borderRadius","src","photoURL","text","playerName","size","email","phone","danger","title","onClose","actions","value","onChange","e","target","width","name"],"sources":["/Users/dbroxton/Documents/Projects/soccer-management-app/src/components/views/Manager/components/IncomingRequests.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Card from '../../../common/Card';\nimport Button from '../../../common/Button';\nimport Avatar from '../../../common/Avatar';\nimport Modal from '../../../common/Modal';\nimport { useAuth } from '../../../../context/AuthContext';\nimport { COLORS } from '../../../../lib/constants';\n\nconst IncomingRequests = ({ requests, onApprove, onDeny, myGroups }) => {\n  const { fetchPlayerDetails } = useAuth();\n  const [expandedId, setExpandedId] = useState(null);\n  const [details, setDetails] = useState(null);\n  const [loading, setLoading] = useState(false);\n  \n  // Approval Modal State\n  const [requestToApprove, setRequestToApprove] = useState(null);\n  const [targetGroupId, setTargetGroupId] = useState(\"\");\n\n  const toggleDetails = async (req) => {\n    if (expandedId === req.id) {\n      setExpandedId(null); setDetails(null); return;\n    }\n    setExpandedId(req.id);\n    setLoading(true);\n    const data = await fetchPlayerDetails(req.userId);\n    setDetails(data);\n    setLoading(false);\n  };\n\n  const initiateApproval = (req) => {\n      const associated = myGroups.find(g => g.associatedRosterId === req.rosterId);\n      setTargetGroupId(associated ? associated.id : \"\");\n      setRequestToApprove(req);\n  };\n\n  const confirmApproval = () => {\n      onApprove(requestToApprove, targetGroupId || null);\n      setRequestToApprove(null);\n  };\n\n  if (!requests.length) return null;\n\n  return (\n    <div style={{ marginTop: '10px', marginBottom: '40px' }}>\n      <h3 style={{ color: COLORS.primary }}>Incoming Join Requests</h3>\n      <div style={{ display: 'grid', gap: '10px' }}>\n        {requests.map(req => (\n          <Card key={req.id} style={{ border: `1px solid ${COLORS.primary}` }}>\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n              <div>\n                <span style={{ fontWeight: 'bold' }}>{req.userName}</span>\n                <span style={{ color: '#aaa', margin: '0 10px' }}>wants to join</span>\n                <span style={{ fontWeight: 'bold', color: 'white' }}>{req.rosterName}</span>\n              </div>\n              <div style={{ display: 'flex', gap: '10px' }}>\n                <Button variant=\"secondary\" onClick={() => toggleDetails(req)} style={{ padding: '5px 15px', fontSize: '12px' }}>\n                    {expandedId === req.id ? \"Hide\" : \"Profile\"}\n                </Button>\n                <Button onClick={() => initiateApproval(req)} style={{ padding: '5px 15px', fontSize: '12px' }}>Approve</Button>\n                <Button variant=\"danger\" onClick={() => onDeny(req)} style={{ padding: '5px 15px', fontSize: '12px' }}>Deny</Button>\n              </div>\n            </div>\n            {expandedId === req.id && (\n              <div style={{ marginTop: '15px', padding: '15px', backgroundColor: '#333', borderRadius: '5px' }}>\n                {loading ? <p>Loading...</p> : details ? (\n                    <div style={{ fontSize: '14px' }}>\n                        <div style={{ display: 'flex', gap: '15px', marginBottom: '10px' }}>\n                            <Avatar src={details.photoURL} text={details.playerName} size={50} />\n                            <div>\n                                <strong>{details.playerName}</strong>\n                                <div style={{ color: '#aaa' }}>{details.email}</div>\n                                <div style={{ color: '#aaa' }}>{details.phone}</div>\n                            </div>\n                        </div>\n                        {/* Add more details here if needed */}\n                    </div>\n                ) : <p style={{ color: COLORS.danger }}>Failed to load.</p>}\n              </div>\n            )}\n          </Card>\n        ))}\n      </div>\n\n      {requestToApprove && (\n          <Modal title=\"Confirm Approval\" onClose={() => setRequestToApprove(null)} actions={<Button onClick={confirmApproval}>Confirm</Button>}>\n              <p style={{ color: '#ccc' }}>Approve <strong>{requestToApprove.userName}</strong> for <strong>{requestToApprove.rosterName}</strong>?</p>\n              <div style={{ marginBottom: '20px' }}>\n                  <label style={{ display: 'block', marginBottom: '10px' }}>Add to Community Group (Optional):</label>\n                  <select value={targetGroupId} onChange={(e) => setTargetGroupId(e.target.value)} style={{ width: '100%', padding: '10px', borderRadius: '5px' }}>\n                      <option value=\"\">-- No Group --</option>\n                      {myGroups.map(g => (<option key={g.id} value={g.id}>{g.name}</option>))}\n                  </select>\n              </div>\n          </Modal>\n      )}\n    </div>\n  );\n};\n\nexport default IncomingRequests;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}